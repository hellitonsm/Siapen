/******************************************************************************/
/****         Generated by IBExpert 2008.08.08 10/10/2011 20:57:18         ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES NONE;

CREATE DATABASE 'siap:siap'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 16384
DEFAULT CHARACTER SET NONE;



/******************************************************************************/
/****                        User Defined Functions                        ****/
/******************************************************************************/

DECLARE EXTERNAL FUNCTION ADDDAY
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addDay' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDDAY2
    TIMESTAMP,
    INTEGER,
    TIMESTAMP
    RETURNS PARAMETER 3
    ENTRY_POINT 'addDay2' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDHOUR
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addHour' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDMILLISECOND
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addMilliSecond' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDMINUTE
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addMinute' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDMONTH
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addMonth' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDSECOND
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addSecond' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDWEEK
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addWeek' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ADDYEAR
    TIMESTAMP,
    INTEGER
    RETURNS TIMESTAMP
    ENTRY_POINT 'addYear' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION DIV
    INTEGER,
    INTEGER
    RETURNS DOUBLE PRECISION BY VALUE
    ENTRY_POINT 'IB_UDF_div' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION DNULLIF
    DOUBLE PRECISION BY DESCRIPTOR,
    DOUBLE PRECISION BY DESCRIPTOR
    RETURNS DOUBLE PRECISION BY DESCRIPTOR
    ENTRY_POINT 'dNullIf' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION DNVL
    DOUBLE PRECISION BY DESCRIPTOR,
    DOUBLE PRECISION BY DESCRIPTOR
    RETURNS DOUBLE PRECISION BY DESCRIPTOR
    ENTRY_POINT 'idNvl' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION DOW
    TIMESTAMP,
    VARCHAR(15)
    RETURNS PARAMETER 2
    ENTRY_POINT 'DOW' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION DPOWER
    DOUBLE PRECISION BY DESCRIPTOR,
    DOUBLE PRECISION BY DESCRIPTOR,
    DOUBLE PRECISION BY DESCRIPTOR
    RETURNS PARAMETER 3
    ENTRY_POINT 'power' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION GETEXACTTIMESTAMP
    TIMESTAMP
    RETURNS PARAMETER 1
    ENTRY_POINT 'getExactTimestamp' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION GETEXACTTIMESTAMPUTC
    TIMESTAMP
    RETURNS PARAMETER 1
    ENTRY_POINT 'getExactTimestampUTC' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION I64NULLIF
    NUMERIC(18,4) BY DESCRIPTOR,
    NUMERIC(18,4) BY DESCRIPTOR
    RETURNS NUMERIC(18,4) BY DESCRIPTOR
    ENTRY_POINT 'iNullIf' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION I64NVL
    NUMERIC(18,0) BY DESCRIPTOR,
    NUMERIC(18,0) BY DESCRIPTOR
    RETURNS NUMERIC(18,0) BY DESCRIPTOR
    ENTRY_POINT 'idNvl' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION I64ROUND
    NUMERIC(18,4) BY DESCRIPTOR,
    NUMERIC(18,4) BY DESCRIPTOR
    RETURNS PARAMETER 2
    ENTRY_POINT 'fbround' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION I64TRUNCATE
    NUMERIC(18,0) BY DESCRIPTOR,
    NUMERIC(18,0) BY DESCRIPTOR
    RETURNS PARAMETER 2
    ENTRY_POINT 'fbtruncate' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION INULLIF
    INTEGER BY DESCRIPTOR,
    INTEGER BY DESCRIPTOR
    RETURNS INTEGER BY DESCRIPTOR
    ENTRY_POINT 'iNullIf' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION INVL
    INTEGER BY DESCRIPTOR,
    INTEGER BY DESCRIPTOR
    RETURNS INTEGER BY DESCRIPTOR
    ENTRY_POINT 'idNvl' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION ISLEAPYEAR
    TIMESTAMP
    RETURNS INTEGER BY VALUE
    ENTRY_POINT 'isLeapYear' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION LTRIM
    CSTRING(255)
    RETURNS CSTRING(255) FREE_IT
    ENTRY_POINT 'IB_UDF_ltrim' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION "ROUND"
    INTEGER BY DESCRIPTOR,
    INTEGER BY DESCRIPTOR
    RETURNS PARAMETER 2
    ENTRY_POINT 'fbround' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION RTRIM
    CSTRING(255)
    RETURNS CSTRING(255) FREE_IT
    ENTRY_POINT 'IB_UDF_rtrim' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION SDOW
    TIMESTAMP,
    VARCHAR(5)
    RETURNS PARAMETER 2
    ENTRY_POINT 'SDOW' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION SNULLIF
    VARCHAR(100) BY DESCRIPTOR,
    VARCHAR(100) BY DESCRIPTOR,
    VARCHAR(100) BY DESCRIPTOR
    RETURNS PARAMETER 3
    ENTRY_POINT 'sNullIf' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION SNVL
    VARCHAR(100) BY DESCRIPTOR,
    VARCHAR(100) BY DESCRIPTOR,
    VARCHAR(100) BY DESCRIPTOR
    RETURNS PARAMETER 3
    ENTRY_POINT 'sNvl' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION SRAND

    RETURNS DOUBLE PRECISION BY VALUE
    ENTRY_POINT 'IB_UDF_srand' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION SRIGHT
    VARCHAR(100) BY DESCRIPTOR,
    SMALLINT,
    VARCHAR(100) BY DESCRIPTOR
    RETURNS PARAMETER 3
    ENTRY_POINT 'right' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION STRING2BLOB
    VARCHAR(300) BY DESCRIPTOR,
    BLOB
    RETURNS PARAMETER 2
    ENTRY_POINT 'string2blob' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION STRLEN
    CSTRING(32767)
    RETURNS INTEGER BY VALUE
    ENTRY_POINT 'IB_UDF_strlen' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION SUBSTR
    CSTRING(255),
    SMALLINT,
    SMALLINT
    RETURNS CSTRING(255) FREE_IT
    ENTRY_POINT 'IB_UDF_substr' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION SUBSTRLEN
    CSTRING(255),
    SMALLINT,
    SMALLINT
    RETURNS CSTRING(255) FREE_IT
    ENTRY_POINT 'IB_UDF_substrlen' MODULE_NAME 'ib_udf';


DECLARE EXTERNAL FUNCTION TRUNCATE
    INTEGER BY DESCRIPTOR,
    INTEGER BY DESCRIPTOR
    RETURNS PARAMETER 2
    ENTRY_POINT 'fbtruncate' MODULE_NAME 'fbudf';


DECLARE EXTERNAL FUNCTION UDF_FRAC
    DOUBLE PRECISION
    RETURNS DOUBLE PRECISION BY VALUE
    ENTRY_POINT 'IB_UDF_frac' MODULE_NAME 'ib_udf';




/******************************************************************************/
/****                               Domains                                ****/
/******************************************************************************/

CREATE DOMAIN DM_CEP AS
VARCHAR(8);

CREATE DOMAIN DM_CPF AS
VARCHAR(11);

CREATE DOMAIN DM_DATA AS
TIMESTAMP;

CREATE DOMAIN DM_FONE AS
VARCHAR(10);

CREATE DOMAIN DM_FOTO AS
BLOB SUB_TYPE -1 SEGMENT SIZE 8192;

CREATE DOMAIN DM_HORA AS
TIME;

CREATE DOMAIN DM_ID AS
INTEGER
NOT NULL;

CREATE DOMAIN DM_INTEGER AS
INTEGER;

CREATE DOMAIN DM_MEMO AS
VARCHAR(16386);

CREATE DOMAIN DM_NOME AS
VARCHAR(50);

CREATE DOMAIN DM_UF AS
VARCHAR(2);

CREATE DOMAIN DM_VARCHAR1 AS
VARCHAR(1);

CREATE DOMAIN DM_VARCHAR100 AS
VARCHAR(100);

CREATE DOMAIN DM_VARCHAR16386 AS
VARCHAR(16386);

CREATE DOMAIN DM_VARCHAR200 AS
VARCHAR(200);

CREATE DOMAIN DM_VARCHAR30 AS
VARCHAR(30);

CREATE DOMAIN PERMISSAO AS
VARCHAR(4);



/******************************************************************************/
/****                              Generators                              ****/
/******************************************************************************/

CREATE GENERATOR COD_UP;
SET GENERATOR COD_UP TO 80;

CREATE GENERATOR IDATENDIEMNTO_PSICOSOCIAL;
SET GENERATOR IDATENDIEMNTO_PSICOSOCIAL TO 0;

CREATE GENERATOR IDBACKUP_SINCRONISMO_BLOB_GEN;
SET GENERATOR IDBACKUP_SINCRONISMO_BLOB_GEN TO 40163;

CREATE GENERATOR IDBACKUP_SINCRONISMO_GEN;
SET GENERATOR IDBACKUP_SINCRONISMO_GEN TO 407085;

CREATE GENERATOR IDBACKUP_VISITANTE;
SET GENERATOR IDBACKUP_VISITANTE TO 9915907;

CREATE GENERATOR IDCALC_TRABALHO_ITENS;
SET GENERATOR IDCALC_TRABALHO_ITENS TO 0;

CREATE GENERATOR IDCODIGO_PENAL;
SET GENERATOR IDCODIGO_PENAL TO 0;

CREATE GENERATOR IDCONDENACAO_INTERNO;
SET GENERATOR IDCONDENACAO_INTERNO TO 0;

CREATE GENERATOR IDCONDICAO_INTERNO;
SET GENERATOR IDCONDICAO_INTERNO TO 0;

CREATE GENERATOR IDHISTORICO_ESTUDO;
SET GENERATOR IDHISTORICO_ESTUDO TO 99;

CREATE GENERATOR IDHISTORICO_INTERNO;
SET GENERATOR IDHISTORICO_INTERNO TO 0;

CREATE GENERATOR IDPADRAO;
SET GENERATOR IDPADRAO TO 0;

CREATE GENERATOR IDSEREIESTUDO;
SET GENERATOR IDSEREIESTUDO TO 12;

CREATE GENERATOR IDSINCRONISMO_BLOB_GEN;
SET GENERATOR IDSINCRONISMO_BLOB_GEN TO 116404;

CREATE GENERATOR IDSINCRONISMO_CONTROLE_GEN;
SET GENERATOR IDSINCRONISMO_CONTROLE_GEN TO 0;

CREATE GENERATOR IDSINCRONISMO_GEN;
SET GENERATOR IDSINCRONISMO_GEN TO 804682;

CREATE GENERATOR ID_ADVOGADO;
SET GENERATOR ID_ADVOGADO TO 0;

CREATE GENERATOR ID_AREA_SERVIDOR;
SET GENERATOR ID_AREA_SERVIDOR TO 1;

CREATE GENERATOR ID_ARTIGO;
SET GENERATOR ID_ARTIGO TO 0;

CREATE GENERATOR ID_CALC_SETOR_TRABALHO;
SET GENERATOR ID_CALC_SETOR_TRABALHO TO 5;

CREATE GENERATOR ID_CELA;
SET GENERATOR ID_CELA TO 0;

CREATE GENERATOR ID_CIDADE;
SET GENERATOR ID_CIDADE TO 0;

CREATE GENERATOR ID_DESTINO;
SET GENERATOR ID_DESTINO TO 0;

CREATE GENERATOR ID_ESCOLARIDADE;
SET GENERATOR ID_ESCOLARIDADE TO 0;

CREATE GENERATOR ID_ESTADO;
SET GENERATOR ID_ESTADO TO 0;

CREATE GENERATOR ID_FUNCAO_FUNCIONARIO;
SET GENERATOR ID_FUNCAO_FUNCIONARIO TO 0;

CREATE GENERATOR ID_FUNCAO_INTERNO;
SET GENERATOR ID_FUNCAO_INTERNO TO 0;

CREATE GENERATOR ID_FUNCIONARIO;
SET GENERATOR ID_FUNCIONARIO TO 0;

CREATE GENERATOR ID_GALERIA;
SET GENERATOR ID_GALERIA TO 0;

CREATE GENERATOR ID_GRAU_PARENTESCO;
SET GENERATOR ID_GRAU_PARENTESCO TO 0;

CREATE GENERATOR ID_HISTORICO_VISITANTE;
SET GENERATOR ID_HISTORICO_VISITANTE TO 0;

CREATE GENERATOR ID_INTERNO;
SET GENERATOR ID_INTERNO TO 1;

CREATE GENERATOR ID_MENORES;
SET GENERATOR ID_MENORES TO 0;

CREATE GENERATOR ID_MOV_DIARIO_VISITANTE;
SET GENERATOR ID_MOV_DIARIO_VISITANTE TO 23056;

CREATE GENERATOR ID_MOV_INTERNO;
SET GENERATOR ID_MOV_INTERNO TO 0;

CREATE GENERATOR ID_MOV_TRABALHO;
SET GENERATOR ID_MOV_TRABALHO TO 0;

CREATE GENERATOR ID_NACIONALIDADE;
SET GENERATOR ID_NACIONALIDADE TO 0;

CREATE GENERATOR ID_NATURALIDADE;
SET GENERATOR ID_NATURALIDADE TO 0;

CREATE GENERATOR ID_PAVILHAO;
SET GENERATOR ID_PAVILHAO TO 0;

CREATE GENERATOR ID_PROCEDENCIA;
SET GENERATOR ID_PROCEDENCIA TO 0;

CREATE GENERATOR ID_PROCESSO;
SET GENERATOR ID_PROCESSO TO 0;

CREATE GENERATOR ID_PROFFISSAO;
SET GENERATOR ID_PROFFISSAO TO 1891;

CREATE GENERATOR ID_RACA;
SET GENERATOR ID_RACA TO 0;

CREATE GENERATOR ID_SETOR_TRABALHO;
SET GENERATOR ID_SETOR_TRABALHO TO 9915;

CREATE GENERATOR ID_SOLARIO;
SET GENERATOR ID_SOLARIO TO 0;

CREATE GENERATOR ID_TRABALHO;
SET GENERATOR ID_TRABALHO TO 0;

CREATE GENERATOR ID_UNIDADE_PENAL;
SET GENERATOR ID_UNIDADE_PENAL TO 3;

CREATE GENERATOR ID_VISITANTE;
SET GENERATOR ID_VISITANTE TO 0;

CREATE GENERATOR ID_VISITANTE_INTERNO;
SET GENERATOR ID_VISITANTE_INTERNO TO 0;

CREATE GENERATOR NEW_GENERATOR;
SET GENERATOR NEW_GENERATOR TO 0;

CREATE GENERATOR ORDENAR_VISITA;
SET GENERATOR ORDENAR_VISITA TO 151;



/******************************************************************************/
/****                              Exceptions                              ****/
/******************************************************************************/

CREATE EXCEPTION MESSAGEM_DIVERSAS 'MENSAGEM';



SET TERM ^ ; 



/******************************************************************************/
/****                          Stored Procedures                           ****/
/******************************************************************************/

CREATE PROCEDURE CALCULA_DIAS_UTEIS (
    DAT_INI DATE,
    DAT_FIM DATE,
    IGNORAR VARCHAR(10))
RETURNS (
    UTEIS INTEGER)
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE NEW_PROCEDURE (
    CAMPO VARCHAR(16386))
AS
BEGIN
  EXIT;
END^


CREATE PROCEDURE SP_CRIAR_TRIGGERS_TABELA (
    TABELA VARCHAR(31),
    PK_TABELA VARCHAR(31))
AS
BEGIN
  EXIT;
END^


CREATE PROCEDURE SP_ENVIAR_TODOS_BLOB
AS
BEGIN
  EXIT;
END^


CREATE PROCEDURE SP_GERA_CONSTRAINT
RETURNS (
    DELETA VARCHAR(276),
    CRIA VARCHAR(915))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_GERA_SCRIPT_BLOB_TRIGGER (
    TABELA VARCHAR(31),
    PK_TABELA VARCHAR(31))
RETURNS (
    RETORNO VARCHAR(32500))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_GERA_SCRIPT_INSERT_TRIGGER (
    TABELA VARCHAR(31))
RETURNS (
    RETORNO VARCHAR(32500))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_GERA_SCRIPT_UPDATE_TRIGGER (
    TABELA VARCHAR(31),
    PK_TABELA VARCHAR(31))
RETURNS (
    RETORNO VARCHAR(32500))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_GERA_TRIGGERS_REPLICACAO
RETURNS (
    RETORNO VARCHAR(16384))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_LIMPA_CHAR (
    CAMPO VARCHAR(16386))
RETURNS (
    RETORNO VARCHAR(16386))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_MIGRA_CONFERE
RETURNS (
    NOME VARCHAR(100),
    PAVILHAO VARCHAR(50),
    IDPAVILHAO INTEGER,
    GALERIA VARCHAR(50),
    IDGALERIA INTEGER,
    SOLARIO VARCHAR(50),
    IDSOLARIO INTEGER,
    CELA VARCHAR(50),
    IDCELA INTEGER)
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_MIGRA_CONFERE_2
RETURNS (
    CONCATENATION VARCHAR(169))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_MIGRA_CONFERE_3
RETURNS (
    IDCELA INTEGER,
    IDPAVILHAO INTEGER,
    IDGALERIA INTEGER,
    IDSOLARIO INTEGER,
    CELA VARCHAR(50),
    NOME VARCHAR(100))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_MIGRA_CONFERE_4
RETURNS (
    ID_INTERNO INTEGER,
    NOME_INTERNO VARCHAR(50),
    RGI VARCHAR(30),
    IDPROFISSAO INTEGER,
    IDGALERIA INTEGER,
    IDPAVILHAO INTEGER,
    IDSOLARIO INTEGER,
    IDCELA INTEGER,
    DATA_ENTRADA TIMESTAMP,
    MAE VARCHAR(50),
    PAI VARCHAR(50),
    IDNATURALIDADE INTEGER,
    IDNACIONALIDADE INTEGER,
    IDRACA INTEGER,
    IDESCOLARIDADE INTEGER,
    ENDERECO VARCHAR(50),
    NUMERO VARCHAR(10),
    BAIRRO VARCHAR(30),
    COMPLEMENETO VARCHAR(30),
    CEP VARCHAR(8),
    IDCIDADE INTEGER,
    FONE VARCHAR(10),
    CONTATO VARCHAR(50),
    RELIGIAO VARCHAR(50),
    IDADVOGADO INTEGER,
    ID_PROCEDENCIA INTEGER,
    CONDENACAO VARCHAR(100),
    DATA_PRISAO TIMESTAMP,
    HISTORICO VARCHAR(16386),
    ST VARCHAR(8),
    SEXO VARCHAR(1),
    ID_UP INTEGER,
    IDCONDICAO_INTERNO INTEGER,
    IDDESTINO INTEGER,
    ID_FUNCIONARIO INTEGER,
    STATUS_ISOLAMENTO VARCHAR(30),
    IDSETOR_TRABALHO INTEGER,
    DATA_SETOR TIMESTAMP)
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_ORDENA_VISITANTE
AS
BEGIN
  EXIT;
END^


CREATE PROCEDURE SP_REDUNDANCIA
RETURNS (
    ID_INTERNO INTEGER,
    NOME_INTERNO VARCHAR(50),
    RGI VARCHAR(30),
    IDPROFISSAO INTEGER,
    IDGALERIA INTEGER,
    IDPAVILHAO INTEGER,
    IDSOLARIO INTEGER,
    IDCELA INTEGER,
    DATA_ENTRADA TIMESTAMP,
    MAE VARCHAR(50),
    PAI VARCHAR(50),
    IDNATURALIDADE INTEGER,
    IDNACIONALIDADE INTEGER,
    IDRACA INTEGER,
    IDESCOLARIDADE INTEGER,
    ENDERECO VARCHAR(50),
    NUMERO VARCHAR(10),
    BAIRRO VARCHAR(30),
    COMPLEMENETO VARCHAR(30),
    CEP VARCHAR(8),
    IDCIDADE INTEGER,
    FONE VARCHAR(10),
    CONTATO VARCHAR(50),
    RELIGIAO VARCHAR(50),
    IDADVOGADO INTEGER,
    ID_PROCEDENCIA INTEGER,
    CONDENACAO VARCHAR(100),
    DATA_PRISAO TIMESTAMP,
    HISTORICO VARCHAR(16386),
    ST VARCHAR(1),
    SEXO VARCHAR(1),
    ID_UP INTEGER,
    IDCONDICAO_INTERNO INTEGER,
    IDDESTINO INTEGER,
    ID_FUNCIONARIO INTEGER,
    STATUS_ISOLAMENTO VARCHAR(30),
    IDSETOR_TRABALHO INTEGER,
    DATA_SETOR TIMESTAMP,
    FOTO BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_PERFIL BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_TATUAGEM BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    DATA_SAIDA TIMESTAMP,
    MOTIVO_SAIDA VARCHAR(100),
    ID_FUNCAOINTERNO INTEGER,
    OBSTRABALHO VARCHAR(100),
    DATA_NASCIMENTO TIMESTAMP,
    RG VARCHAR(30),
    CPF VARCHAR(11),
    ESTADO_CIVIL VARCHAR(30),
    VULGO VARCHAR(100),
    OUTRO_NOME VARCHAR(100),
    SINAIS_PARTICULARES VARCHAR(200),
    ALTURA VARCHAR(30),
    PESO VARCHAR(30),
    CI VARCHAR(30),
    CISAIDA VARCHAR(30),
    FOTO_SINAIS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS1 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS2 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS3 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS4 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    ARTIGO VARCHAR(100),
    DATA_ISOLAMENTO TIMESTAMP,
    DATA_MATRICULA TIMESTAMP,
    OBSEDUCACAO VARCHAR(16386),
    DEFICIENCIA VARCHAR(100),
    IDSERIEESTUDO INTEGER,
    COR_OLHOS VARCHAR(100),
    COR_CABELOS VARCHAR(100),
    NOME_SOCIAL VARCHAR(50),
    ORIENTACAO_SEXUAL VARCHAR(50),
    IDENTIDADE_GENERO VARCHAR(50),
    HISTORICO_VELHO VARCHAR(16386),
    TIPOPROCESSO VARCHAR(100),
    CONCEITO_DISCIPLINAR VARCHAR(200),
    TIPOCONDUTA VARCHAR(30),
    PERIODO VARCHAR(30),
    FAMILIARPRESO VARCHAR(30),
    PARENTESCOPRESO VARCHAR(50),
    UPFAMILIARPRESO VARCHAR(200),
    MOTIVODELITO VARCHAR(200),
    MAIORPERDA VARCHAR(200),
    PAISVIVOS VARCHAR(30),
    PAISSEPARADOS VARCHAR(30),
    IDADEPAISSEPARADOS VARCHAR(30),
    PROFISSAOPAIS VARCHAR(100),
    QUEMCRIOU VARCHAR(100),
    TRABALHOFAMILIA VARCHAR(100),
    QTDEIRMAOS VARCHAR(30),
    CRIADOIRMAOS VARCHAR(30),
    MORADIA VARCHAR(100),
    REPRESENTACAOPAIS VARCHAR(200),
    EDUCACAORECEBIDA VARCHAR(200),
    MUDANCAFAMILIA VARCHAR(100),
    FUGACASA VARCHAR(100),
    CONDICOESCRIACAO VARCHAR(30),
    INSTITUICAOASSISTENCIAL VARCHAR(100),
    VIOLENCIADOMESTICA VARCHAR(200),
    MORADIAANTESPRESO VARCHAR(100),
    RESIDENCIAFAMILIAR VARCHAR(100),
    QTDEFILHOS VARCHAR(100),
    FILHOSMENORES16 VARCHAR(100),
    FILHOSVIVEM VARCHAR(200),
    FILHOADOCAO VARCHAR(200),
    PROVEDORFAMILIA VARCHAR(30),
    RENDIMENTOFAMILIAR VARCHAR(200),
    PROGRAMASOCIAL VARCHAR(200),
    AUXRECLUSAO VARCHAR(200),
    REPROVADOESCOLA VARCHAR(200),
    IDADETRABALHO VARCHAR(200),
    CURSOPROFISSIONALIZANTE VARCHAR(200),
    EXERCICIATRABALHO VARCHAR(100),
    REGISTROCARTEIRA VARCHAR(100),
    TRABALHOUPANTERIOR VARCHAR(200),
    DOCUMENTOS VARCHAR(200),
    USODROGAS VARCHAR(200),
    DATADEPENDENCIA VARCHAR(100),
    ABANDONODROGAS VARCHAR(200),
    DROGASCOMCRIME VARCHAR(200),
    DOENCAGRAVE VARCHAR(30),
    DOENCAMENTAL VARCHAR(30),
    PROBLEMASAUDE VARCHAR(200),
    DOENCALABORAL VARCHAR(200),
    VISITAOUTRAPESSOA VARCHAR(200),
    ESTUDOCUMPENA VARCHAR(100),
    TRABALHOCUMPENA VARCHAR(100),
    PROFISSAOCUMPENA VARCHAR(100),
    DATAPSICOSSOCIAL TIMESTAMP,
    IDTECNICO INTEGER,
    OBSPSICOSSOCIAL VARCHAR(200),
    DATA_DELITO TIMESTAMP,
    DATA_REABILITACAO TIMESTAMP,
    MP INTEGER,
    SUICIDIO VARCHAR(100),
    CID VARCHAR(100),
    EFEITOSDROGA VARCHAR(200),
    SINTOMASDEPRESSIVOS VARCHAR(200),
    EPISODIOSHUMOR VARCHAR(200),
    SINTOMASPSICOTICOS VARCHAR(200),
    DELIRIOS VARCHAR(200),
    ALUCINACOES VARCHAR(100),
    PERSONALIDADE VARCHAR(100),
    VISITANTES VARCHAR(200),
    MEDICACAOCONTROLADA VARCHAR(200),
    DOENCAINFECTOCONTAGIOSA VARCHAR(200),
    TRATAMENTOINFECTO VARCHAR(200),
    RESULTADOINFECTO VARCHAR(200),
    SITUACAOCIVIL VARCHAR(100))
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_REDUNDANCIA_UNICO_INATIVO
RETURNS (
    MAXIMO INTEGER,
    NOME_INTERNO VARCHAR(50),
    SUBSTR VARCHAR(255),
    SUBSTR1 VARCHAR(255),
    NUM INTEGER)
AS
BEGIN
  SUSPEND;
END^


CREATE PROCEDURE SP_SINCRONIZA_GENERATOR
AS
BEGIN
  EXIT;
END^



SET TERM ; ^



/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/



CREATE TABLE AA_REDUNDANCIA (
    IDINTERNO_1  INTEGER,
    IDINTERNO_2  INTEGER
);

CREATE TABLE ADVOGADO (
    ID_ADVOGADO  DM_ID,
    ADVOGADO     DM_NOME,
    OAB          DM_VARCHAR30
);

CREATE TABLE AREA_SERVIDOR (
    ID_AREA        DM_ID,
    AREA_SERVIDOR  DM_NOME
);

CREATE TABLE ARTIGO (
    ID_ARTIGO  DM_ID,
    ARTIGO     DM_NOME
);

CREATE TABLE ATENDIMENTO_PSICOSSOCIAL (
    ID_ATENDIMENTO         DM_ID,
    IDINTERNO              DM_INTEGER,
    DATAATENDIMENTO        DM_DATA,
    IDTECNICO              DM_INTEGER,
    DESCRICAO_ATENDIMENTO  DM_MEMO
);

CREATE TABLE BACKUP_SINCRONISMO (
    IDBACKUP_SINCRONISMO    INTEGER NOT NULL,
    IDSINCRONISMO           INTEGER NOT NULL,
    IDSINCRONISMO_CONTROLE  INTEGER NOT NULL,
    SCRIPT                  VARCHAR(8192),
    STATUS                  VARCHAR(1),
    ORDEM                   DM_INTEGER,
    DATA_HORA               TIMESTAMP,
    RETORNO                 VARCHAR(1),
    ERRO                    VARCHAR(32000),
    TRANSACAO               VARCHAR(50)
);

CREATE TABLE BACKUP_SINCRONISMO_BLOB (
    IDBACKUP_SINCRONISMO_BLOB  DM_INTEGER NOT NULL,
    DATA_HORA_BACKUP           TIMESTAMP NOT NULL,
    IDSINCRONISMO_BLOB         DM_INTEGER NOT NULL,
    IDSINCRONISMO_CONTROLE     DM_INTEGER NOT NULL,
    DATA_HORA                  TIMESTAMP NOT NULL,
    USUARIO                    DM_NOME,
    TABELA                     DM_NOME,
    CAMPO                      DM_NOME,
    NOME_PK                    DM_NOME,
    VALOR_PK                   DM_NOME NOT NULL
);

CREATE TABLE BACKUP_VISITANTE (
    IDBACKUP_VISITANTE  DM_ID,
    DATA_HORA           DM_DATA,
    ID_VISITANTE        DM_ID,
    VISITANTE           DM_NOME,
    ID_GRAU_PARENTESCO  DM_INTEGER,
    ID_INTERNO          DM_INTEGER,
    NUMERO_CARTEIRINHA  DM_VARCHAR30,
    CPF                 DM_CPF,
    RG                  DM_VARCHAR30,
    ORGAO_EXPEDIDOR     DM_VARCHAR30,
    SEXO                DM_FONE,
    DATA_CADASTRO       DM_DATA,
    STATUS              DM_VARCHAR1,
    DATA_ULT_VISITA     DM_DATA,
    FOTO                DM_FOTO,
    TIPO_REGISTRO       DM_VARCHAR1,
    MOTIVO_INATIVO      DM_VARCHAR200
);

CREATE TABLE CALC_SETOR_TRABALHO (
    IDCALC_SETOR_TRABALHO  DM_ID,
    ID_INTERNO             DM_INTEGER,
    DATA_INICIAL           DM_DATA,
    DATA_FINAL             DM_DATA,
    QTDEDIASTRABALHADO     DM_INTEGER,
    DIANAOREMIDO           DM_INTEGER,
    QTDEDIASREMIDO         DM_INTEGER,
    DIASTRABALHADOEXTENSO  DM_VARCHAR100,
    DIASREMIDOEXTENSO      DM_VARCHAR100,
    TOTALDIASTRABALHO      DM_INTEGER,
    TOTALDIASREMIDO        DM_INTEGER,
    ID_SETOR_TRABALHO      DM_INTEGER
);

CREATE TABLE CALC_TRABALHO_ITENS (
    ID_CALC_TRABALHO_ITENS  DM_ID,
    ID_CALC_TRABALHO        DM_INTEGER,
    DATA_INICIAL            DM_DATA,
    DATA_FINAL              DM_DATA,
    ID_SETOR_TRABALHO       DM_INTEGER,
    DIASTRABALHADO          DM_INTEGER,
    DIASREMIDO              DM_INTEGER
);

CREATE TABLE CELA (
    ID_CELA     DM_ID,
    CELA        DM_NOME,
    IDSOLARIO   DM_INTEGER,
    IDPAVILHAO  DM_INTEGER,
    IDGALERIA   DM_INTEGER,
    ISOLAMENTO  DM_VARCHAR1
);

CREATE TABLE CIDADE (
    ID_CIDADE         DM_ID,
    CIDADE            DM_VARCHAR100,
    UF                DM_UF,
    ID_ESTADO         DM_INTEGER,
    ID_NACIONALIDADE  DM_INTEGER
);

CREATE TABLE CODIGO_PENAL (
    IDCODIGO_PENAL    DM_INTEGER NOT NULL,
    ARTIGO            DM_NOME,
    DESCRICAO_ARTIGO  DM_MEMO
);

CREATE TABLE CONDENACAO_INTERNO (
    IDCONDENACAO_INTERNO  DM_ID,
    IDINTERNO             DM_ID,
    ARTIGO                DM_VARCHAR100,
    OBSERVACAO            DM_VARCHAR100,
    TOTAL_PENA_ANO        DM_INTEGER,
    TOTAL_PENA_MES        DM_INTEGER,
    TOTAL_PENA_DIA        DM_INTEGER,
    IDCOMARCA             DM_INTEGER,
    VARA                  DM_VARCHAR100,
    PRISAO                DM_VARCHAR100,
    REU                   DM_VARCHAR100,
    NPROCESSO             DM_VARCHAR100,
    GR                    DM_VARCHAR100,
    SITUACAOJURIDICA      DM_VARCHAR100,
    TIPOJUSTICA           DM_VARCHAR30
);

CREATE TABLE CONDICAO_INTERNO (
    IDCONDICAO_INTERNO  INTEGER NOT NULL,
    DESCRICAO           DM_VARCHAR100
);

CREATE TABLE CONFERE (
    IDCONFERE                 INTEGER,
    NOME                      VARCHAR(100),
    PAVILHAO                  VARCHAR(50),
    SOLARIO                   VARCHAR(50),
    CELA                      VARCHAR(50),
    GALERIA                   VARCHAR(50),
    DATA                      TIMESTAMP,
    NOME_PAI                  VARCHAR(50),
    NOME_MAE                  VARCHAR(50),
    HISTORICO                 VARCHAR(16384),
    CAMPO1                    VARCHAR(50),
    STATUS                    VARCHAR(1),
    LOCAL_SAIDA               VARCHAR(256),
    PROFISSAO                 VARCHAR(50),
    ARTIGO                    VARCHAR(50),
    CONDENACAO                VARCHAR(50),
    DATA_PRISAO               TIMESTAMP,
    DATA_SETOR                TIMESTAMP,
    TOTAL_DIAS_MES            INTEGER,
    OBSERVACAO                VARCHAR(16384),
    IDSETOR                   INTEGER,
    FUNCAO_SETOR              VARCHAR(50),
    DATA_EXCLUSAO             TIMESTAMP,
    DATA_NASCIMENTO           TIMESTAMP,
    NATURALIDADE              VARCHAR(50),
    NASCIMENTO                VARCHAR(50),
    ENDERECO                  VARCHAR(100),
    FONE                      VARCHAR(10),
    CONTATO                   VARCHAR(50),
    TIPODOCUMENTO             VARCHAR(50),
    LOCALDOCUMENTO            VARCHAR(50),
    RACA                      VARCHAR(50),
    ESCOLARIDADE              VARCHAR(50),
    NOME_UP_ESTUDOU           VARCHAR(50),
    ESCOLA_UP                 VARCHAR(50),
    STATUS_ARTIGO             VARCHAR(50),
    ADVOGADO                  VARCHAR(50),
    RELIGIAO                  VARCHAR(50),
    IDPROFISSAO               INTEGER,
    VISITA                    VARCHAR(50),
    APOIOFINANCEIRO           VARCHAR(50),
    CASAPROPRIA               VARCHAR(50),
    BENEFICIOGOVERNO          VARCHAR(50),
    APOIOAFAMILIA             VARCHAR(50),
    INSERIDO_ESCOLA           VARCHAR(50),
    CASTIGO_DISCIPLINAR       VARCHAR(50),
    DOENCA_INFECCIOSA         VARCHAR(50),
    DOENCA_NAO_TRASMISSIVEL   VARCHAR(50),
    TIPO_TRATAMENTO           VARCHAR(50),
    USA_DROGA                 VARCHAR(50),
    CURSO_PROFISSIONALIZANTE  VARCHAR(50),
    BENEFICIO_REGIME          VARCHAR(16384),
    IDARTIGO                  INTEGER,
    IDCELA                    DM_INTEGER,
    IDSOLARIO                 DM_INTEGER,
    IDGALERIA                 DM_INTEGER,
    IDPAVILHAO                DM_INTEGER
);

CREATE TABLE DESTINO (
    ID_DESTINO  DM_ID,
    DESTINO     DM_VARCHAR100,
    CAPITAL     DM_VARCHAR30
);

CREATE TABLE ESCOLARIDADE (
    ID_ESCOLARIDADE  DM_ID,
    ESCOLARIDADE     DM_NOME
);

CREATE TABLE ESTADO (
    ID_ESTADO  DM_INTEGER NOT NULL,
    ESTADO     DM_NOME,
    UF         DM_UF
);

CREATE TABLE FUNCAO_FUNCIONARIO (
    ID_FUNCAO_FUNCIONARIO  DM_ID,
    FUNCAO_FUNCIONARIO     DM_NOME
);

CREATE TABLE FUNCAO_INTERNO (
    ID_FUNCAO_INTERNO  DM_ID,
    FUNCAO_INTERNO     DM_NOME
);

CREATE TABLE FUNCIONARIO (
    ID_FUNCIONARIO           DM_ID,
    NOME_FUNCIONARIO         DM_VARCHAR100,
    MATRICULA                DM_VARCHAR30,
    SENHA                    DM_VARCHAR30,
    CPF                      DM_CPF,
    ID_FUNCAO                DM_INTEGER,
    LOGIN                    DM_VARCHAR30,
    ID_UP                    DM_INTEGER,
    PERMISSAO_CONFERE        PERMISSAO,
    PERMISSAO_VISITANTE      PERMISSAO,
    PERMISSAO_SETORTRABALHO  PERMISSAO,
    PERMISSAO_SETOREDUCACAO  PERMISSAO,
    CONFIGURACOES            PERMISSAO,
    FUNCAO_TEMP              DM_VARCHAR200,
    FUNCAO                   DM_VARCHAR30,
    ADMISSAO                 DM_DATA,
    CLASSE                   DM_VARCHAR1,
    MAE                      DM_NOME,
    PAI                      DM_NOME,
    RG                       DM_VARCHAR30,
    ORGAOEMISSOR             DM_VARCHAR30,
    FATORRH                  DM_VARCHAR30,
    ID_NATURALIDADE          DM_INTEGER,
    DTNASCIMENTO             DM_DATA,
    CARGO                    DM_VARCHAR30,
    AREA                     DM_VARCHAR30,
    FOTO                     DM_FOTO,
    IMPRIMIR                 DM_VARCHAR1,
    DIGITAL                  DM_FOTO,
    ENDERECO                 DM_VARCHAR100,
    BAIRRO                   DM_NOME,
    COMPLEMENTO              DM_NOME,
    ID_CIDADE                DM_INTEGER,
    CEP                      DM_CEP,
    FONE                     DM_FONE,
    CELULAR                  DM_CEP,
    EMAIL                    DM_FONE,
    NUMERO                   DM_VARCHAR30,
    DATA_LOTACAO             DM_DATA,
    ESCOLARIDADE             DM_VARCHAR30,
    SEXO                     DM_VARCHAR1,
    PLANTAO_EXPEDIENTE       DM_VARCHAR30,
    NFUNCIONAL               DM_INTEGER,
    PERMISSAO_CADASTRO       PERMISSAO,
    PERMISSAO_PSICOSSOCIAL   DM_VARCHAR30,
    PERMISSAO_JURIDICA       DM_VARCHAR30,
    PERMISSAO_DISCIPLINA     DM_VARCHAR30,
    DIRETORIO_RELATORIO      DM_VARCHAR200,
    DIRETORIO_RELATORIO1     DM_VARCHAR200
);

CREATE TABLE GALERIA (
    ID_GALERIA  DM_ID,
    GALERIA     DM_NOME,
    IDPAVILHAO  DM_INTEGER
);

CREATE TABLE GRAU_PARENTESCO (
    ID_GRAU_PARENTESCO  DM_ID,
    GRAU_PARENTESCO     DM_NOME
);

CREATE TABLE HISTORICO_ESTUDO (
    ID_HISTORICO_ESTUDO  DM_ID,
    DATA_HISTORICO       DM_DATA,
    ID_INTERNO           DM_INTEGER,
    HISTORICO            DM_VARCHAR16386
);

CREATE TABLE HISTORICO_INTERNO (
    IDHISTORICO_INTERNO  DM_ID,
    DESCRICAO            DM_VARCHAR16386 NOT NULL,
    DATA_HORA            DM_DATA NOT NULL,
    IDINTERNO            DM_ID,
    STATUS               DM_VARCHAR1,
    MOTIVO_SAIDA         DM_NOME,
    IDPROCEDENCIA        DM_INTEGER,
    IDUP                 DM_INTEGER
);

CREATE TABLE HISTORICO_VISITANTE (
    ID_HISTORICO_VISITANTE  DM_ID,
    ID_VISITANTE            DM_ID,
    NOME_VISITANTE          DM_NOME,
    ID_GRAU_PARENTESCO      DM_INTEGER,
    ID_INTERNO              DM_INTEGER,
    NUMERO_CARTEIRINHA      DM_VARCHAR30,
    CPF                     DM_CPF,
    RG                      DM_CPF,
    ORGAO_EXPEDIDOR         DM_VARCHAR30,
    SEXO                    DM_CPF,
    DATA_VISITA             DM_DATA,
    HORA_VISITA             DM_DATA,
    ORDEM                   DM_INTEGER
);

CREATE TABLE INT_CT (
    NOME_INTERNO          DM_VARCHAR100,
    PAVILHAO              DM_VARCHAR100,
    CELA                  DM_VARCHAR100,
    TIPO_CELA             DM_VARCHAR100,
    VULGO                 DM_VARCHAR100,
    OUTRO_NOME            DM_VARCHAR100,
    PROCEDENCIA           DM_VARCHAR100,
    DATA_ENTRADA          DM_VARCHAR100,
    SETOR_TRABALHO        DM_VARCHAR100,
    DATA_INICIO_TRABALHO  DM_VARCHAR100,
    DATA_FINAL_TRABALHO   DM_VARCHAR100,
    STATUS                DM_VARCHAR100
);

CREATE TABLE INTERNO (
    ID_INTERNO               DM_ID,
    NOME_INTERNO             DM_NOME,
    RGI                      DM_VARCHAR30,
    IDPROFISSAO              DM_INTEGER,
    IDGALERIA                DM_INTEGER,
    IDPAVILHAO               DM_INTEGER,
    IDSOLARIO                DM_INTEGER,
    IDCELA                   DM_INTEGER,
    DATA_ENTRADA             DM_DATA,
    MAE                      DM_NOME,
    PAI                      DM_NOME,
    IDNATURALIDADE           DM_INTEGER,
    IDNACIONALIDADE          DM_INTEGER,
    IDRACA                   DM_INTEGER,
    IDESCOLARIDADE           DM_INTEGER,
    ENDERECO                 DM_NOME,
    NUMERO                   DM_FONE,
    BAIRRO                   DM_VARCHAR30,
    COMPLEMENETO             DM_VARCHAR30,
    CEP                      DM_CEP,
    IDCIDADE                 DM_INTEGER,
    FONE                     DM_FONE,
    CONTATO                  DM_NOME,
    RELIGIAO                 DM_NOME,
    IDADVOGADO               DM_INTEGER,
    ID_PROCEDENCIA           DM_INTEGER,
    CONDENACAO               DM_VARCHAR100,
    DATA_PRISAO              DM_DATA,
    HISTORICO                DM_MEMO,
    ST                       DM_VARCHAR1,
    SEXO                     DM_VARCHAR1,
    ID_UP                    DM_INTEGER,
    IDCONDICAO_INTERNO       DM_INTEGER,
    IDDESTINO                DM_INTEGER,
    ID_FUNCIONARIO           DM_INTEGER,
    STATUS_ISOLAMENTO        DM_VARCHAR30,
    IDSETOR_TRABALHO         DM_INTEGER,
    DATA_SETOR               DM_DATA,
    FOTO                     DM_FOTO,
    FOTO_PERFIL              DM_FOTO,
    FOTO_TATUAGEM            DM_FOTO,
    DATA_SAIDA               DM_DATA,
    MOTIVO_SAIDA             DM_VARCHAR100,
    ID_FUNCAOINTERNO         DM_INTEGER,
    OBSTRABALHO              DM_VARCHAR100,
    DATA_NASCIMENTO          DM_DATA,
    RG                       DM_VARCHAR30,
    CPF                      DM_CPF,
    ESTADO_CIVIL             DM_VARCHAR30,
    VULGO                    DM_VARCHAR100,
    OUTRO_NOME               DM_VARCHAR100,
    SINAIS_PARTICULARES      DM_VARCHAR200,
    ALTURA                   DM_VARCHAR30,
    PESO                     DM_VARCHAR30,
    CI                       DM_VARCHAR30,
    CISAIDA                  DM_VARCHAR30,
    FOTO_SINAIS              DM_FOTO,
    FOTO_SINAIS1             DM_FOTO,
    FOTO_SINAIS2             DM_FOTO,
    FOTO_SINAIS3             DM_FOTO,
    FOTO_SINAIS4             DM_FOTO,
    ARTIGO                   DM_VARCHAR100,
    DATA_ISOLAMENTO          DM_DATA,
    DATA_MATRICULA           DM_DATA,
    OBSEDUCACAO              DM_VARCHAR16386,
    DEFICIENCIA              DM_VARCHAR100,
    IDSERIEESTUDO            DM_INTEGER,
    COR_OLHOS                DM_VARCHAR100,
    COR_CABELOS              DM_VARCHAR100,
    NOME_SOCIAL              DM_NOME,
    ORIENTACAO_SEXUAL        DM_NOME,
    IDENTIDADE_GENERO        DM_NOME,
    HISTORICO_VELHO          DM_VARCHAR16386,
    TIPOPROCESSO             DM_VARCHAR100,
    CONCEITO_DISCIPLINAR     DM_VARCHAR200,
    TIPOCONDUTA              DM_VARCHAR30,
    PERIODO                  DM_VARCHAR30,
    FAMILIARPRESO            DM_VARCHAR30,
    PARENTESCOPRESO          DM_NOME,
    UPFAMILIARPRESO          DM_VARCHAR200,
    MOTIVODELITO             DM_VARCHAR200,
    MAIORPERDA               DM_VARCHAR200,
    PAISVIVOS                DM_VARCHAR30,
    PAISSEPARADOS            DM_VARCHAR30,
    IDADEPAISSEPARADOS       DM_VARCHAR30,
    PROFISSAOPAIS            DM_VARCHAR100,
    QUEMCRIOU                DM_VARCHAR100,
    TRABALHOFAMILIA          DM_VARCHAR100,
    QTDEIRMAOS               DM_VARCHAR30,
    CRIADOIRMAOS             DM_VARCHAR30,
    MORADIA                  DM_VARCHAR100,
    REPRESENTACAOPAIS        DM_VARCHAR200,
    EDUCACAORECEBIDA         DM_VARCHAR200,
    MUDANCAFAMILIA           DM_VARCHAR100,
    FUGACASA                 DM_VARCHAR100,
    CONDICOESCRIACAO         DM_VARCHAR30,
    INSTITUICAOASSISTENCIAL  DM_VARCHAR100,
    VIOLENCIADOMESTICA       DM_VARCHAR200,
    MORADIAANTESPRESO        DM_VARCHAR100,
    RESIDENCIAFAMILIAR       DM_VARCHAR100,
    QTDEFILHOS               DM_VARCHAR100,
    FILHOSMENORES16          DM_VARCHAR100,
    FILHOSVIVEM              DM_VARCHAR200,
    FILHOADOCAO              DM_VARCHAR200,
    PROVEDORFAMILIA          DM_VARCHAR30,
    RENDIMENTOFAMILIAR       DM_VARCHAR200,
    PROGRAMASOCIAL           DM_VARCHAR200,
    AUXRECLUSAO              DM_VARCHAR200,
    REPROVADOESCOLA          DM_VARCHAR200,
    IDADETRABALHO            DM_VARCHAR200,
    CURSOPROFISSIONALIZANTE  DM_VARCHAR200,
    EXERCICIATRABALHO        DM_VARCHAR100,
    REGISTROCARTEIRA         DM_VARCHAR100,
    TRABALHOUPANTERIOR       DM_VARCHAR200,
    DOCUMENTOS               DM_VARCHAR200,
    USODROGAS                DM_VARCHAR200,
    DATADEPENDENCIA          DM_VARCHAR100,
    ABANDONODROGAS           DM_VARCHAR200,
    DROGASCOMCRIME           DM_VARCHAR200,
    DOENCAGRAVE              DM_VARCHAR30,
    DOENCAMENTAL             DM_VARCHAR30,
    PROBLEMASAUDE            DM_VARCHAR200,
    DOENCALABORAL            DM_VARCHAR200,
    VISITAOUTRAPESSOA        DM_VARCHAR200,
    ESTUDOCUMPENA            DM_VARCHAR100,
    TRABALHOCUMPENA          DM_VARCHAR100,
    PROFISSAOCUMPENA         DM_VARCHAR100,
    DATAPSICOSSOCIAL         DM_DATA,
    IDTECNICO                DM_INTEGER,
    OBSPSICOSSOCIAL          DM_VARCHAR200,
    DATA_DELITO              DM_DATA,
    DATA_REABILITACAO        DM_DATA,
    MP                       DM_INTEGER,
    SUICIDIO                 DM_VARCHAR100,
    CID                      DM_VARCHAR100,
    EFEITOSDROGA             DM_VARCHAR200,
    SINTOMASDEPRESSIVOS      DM_VARCHAR200,
    EPISODIOSHUMOR           DM_VARCHAR200,
    SINTOMASPSICOTICOS       DM_VARCHAR200,
    DELIRIOS                 DM_VARCHAR200,
    ALUCINACOES              DM_VARCHAR100,
    PERSONALIDADE            DM_VARCHAR100,
    VISITANTES               DM_VARCHAR200,
    MEDICACAOCONTROLADA      DM_VARCHAR200,
    DOENCAINFECTOCONTAGIOSA  DM_VARCHAR200,
    TRATAMENTOINFECTO        DM_VARCHAR200,
    RESULTADOINFECTO         DM_VARCHAR200,
    SITUACAOCIVIL            DM_VARCHAR100,
    MEDIDASEGURANCA          DM_VARCHAR30
);

CREATE TABLE MENORES (
    ID_MENORES    DM_ID,
    NOME_MENORES  DM_NOME,
    ID_VISITANTE  DM_INTEGER
);

CREATE TABLE MOV_DIARIO_VISITANTES (
    ID_MOV_DIARIO_VISITANTES  DM_ID,
    ID_VISITANTE              DM_ID,
    NOME_VISITANTE            DM_NOME,
    ID_GRAU_PARENTESCO        DM_INTEGER,
    ID_INTERNO                DM_INTEGER,
    NUMERO_CARTEIRINHA        DM_VARCHAR30,
    CPF                       DM_CPF,
    RG                        DM_CEP,
    ORGAO_EXPEDIDOR           DM_CPF,
    SEXO                      DM_CPF,
    DATA_VISITA               DM_DATA,
    HORA_VISITA               DM_DATA,
    ORDEM_VISITA              DM_INTEGER,
    CANCELADO                 DM_VARCHAR1,
    QUANTIDADE_MENOR          DM_INTEGER,
    ID_UP                     DM_INTEGER
);

CREATE TABLE MOV_INTERNO (
    ID_MOV_INTERNO     DM_ID,
    ID_INTERNO         DM_ID,
    ID_UNIDADE_PENAL   DM_ID,
    TIPO_MOVIMENTACAO  DM_VARCHAR16386,
    DATA_MOVIMENTACAO  DM_DATA,
    HORA_MOVIMENTACAO  DM_HORA,
    ID_FUNCIONARIO     DM_INTEGER,
    ID_PROCEDENCIA     DM_INTEGER,
    ID_DESTINO         DM_INTEGER,
    IDPAVILHAO         DM_INTEGER,
    IDGALERIA          DM_INTEGER,
    IDSOLARIO          DM_INTEGER,
    IDCELA             DM_INTEGER,
    ST_INTERNO         DM_VARCHAR1,
    FOTO_INTERNO       DM_FOTO
);

CREATE TABLE MOV_TRABALHO (
    ID_MOV_TRABALHO    DM_ID,
    ID_TRABALHO        DM_ID,
    ID_INTERNO         DM_INTEGER,
    ID_SETOR_TRABALHO  DM_INTEGER,
    ID_FUNCAO_INTERNO  DM_INTEGER,
    DATA_MOV_TRABALHO  DM_DATA,
    OBS_MOV_TRABALHO   DM_MEMO,
    TIPO_MOV_TRABALHO  DM_VARCHAR30,
    ID_UNIDADE_PENAL   DM_INTEGER
);

CREATE TABLE NACIONALIDADE (
    ID_NACIONALIDADE  DM_ID,
    NACIONALIDADE     DM_NOME
);

CREATE TABLE PADRAO (
    IDPADRAO           DM_ID,
    COD_UP             DM_ID,
    SISTEMA            DM_NOME,
    NOME_PAVILHAO      DM_NOME,
    NOME_GALERIA       DM_NOME,
    NOME_SOLARIO       DM_NOME,
    NOME_CELA          DM_NOME,
    NUMERO_VISITANTES  DM_INTEGER
);

CREATE TABLE PAVILHAO (
    ID_PAVILHAO  DM_ID,
    PAVILHAO     DM_NOME,
    ID_UP        DM_INTEGER
);

CREATE TABLE PROCEDENCIA (
    ID_PROCEDENCIA  DM_ID,
    PROEDENCIA      DM_NOME,
    CAPITAL         DM_VARCHAR30
);

CREATE TABLE PROCESSO (
    ID_PROCESSO         DM_ID,
    ID_INTERNO          DM_ID,
    DATA_PROCESSO       DM_DATA,
    ID_ARTIGO           DM_ID,
    DESCRICAO_PROCESSO  DM_NOME
);

CREATE TABLE PROFISSAO (
    ID_PROFISSAO  DM_ID,
    PROFISSAO     DM_NOME
);

CREATE TABLE RACA (
    ID_RACA  DM_ID,
    RACA     DM_NOME
);

CREATE TABLE SERIE_ESTUDO (
    ID_SERIE_ESTUDO  DM_ID,
    SERIE_ESTUDO     DM_VARCHAR100
);

CREATE TABLE SETOR_TRABALHO (
    ID_SETOR_TRABALHO  DM_ID,
    SETOR_TRABALHO     DM_NOME
);

CREATE TABLE SINCRONISMO (
    IDSINCRONISMO           INTEGER NOT NULL,
    IDSINCRONISMO_CONTROLE  INTEGER NOT NULL,
    SCRIPT                  VARCHAR(8192),
    STATUS                  VARCHAR(1),
    ORDEM                   DM_INTEGER,
    DATA_HORA               TIMESTAMP,
    RETORNO                 VARCHAR(1)
);

CREATE TABLE SINCRONISMO_BLOB (
    IDSINCRONISMO_BLOB      DM_INTEGER NOT NULL,
    IDSINCRONISMO_CONTROLE  DM_INTEGER NOT NULL,
    DATA_HORA               TIMESTAMP NOT NULL,
    USUARIO                 DM_NOME,
    TABELA                  DM_NOME,
    CAMPO                   DM_NOME,
    NOME_PK                 DM_NOME,
    VALOR_PK                DM_NOME NOT NULL
);

CREATE TABLE SINCRONISMO_CONTROLE (
    IDSINCRONISMO_CONTROLE  INTEGER NOT NULL,
    DESCRICAO               VARCHAR(50) NOT NULL,
    CONEXAO                 VARCHAR(50) NOT NULL,
    TIPO_CONTROLE           VARCHAR(10),
    IDEMPRESA               DM_INTEGER,
    USUARIO                 DM_NOME,
    SENHA                   DM_NOME
);

CREATE TABLE SOLARIO (
    ID_SOLARIO  DM_ID,
    SOLARIO     DM_NOME,
    IDGALERIA   DM_INTEGER,
    IDPAVILHAO  DM_INTEGER
);

CREATE TABLE TEMP_PRESOS (
    NOME      DM_VARCHAR100,
    CELA      VARCHAR(3),
    PAVILHAO  VARCHAR(2),
    TRABALHO  VARCHAR(1),
    DATAINI   VARCHAR(20),
    DATAFIM   VARCHAR(20),
    SERVICO   VARCHAR(2)
);

CREATE TABLE TRABALHO (
    ID_TRABALHO          DM_ID,
    ID_INTERNO           DM_ID,
    ID_SETOR_TRABALHO    DM_INTEGER,
    ID_FUNCAO_INTERNO    DM_INTEGER,
    DATA_TRABALHO        DM_DATA,
    OBSERVACAO_TRABALHO  DM_MEMO,
    ID_UNIDADE_PENAL     DM_INTEGER
);

CREATE TABLE UNIDADE_PENAL (
    ID_UP        DM_ID,
    NOME_UP      DM_NOME,
    ENDERECO     DM_NOME,
    NUMERO       DM_VARCHAR30,
    BAIRRO       DM_NOME,
    COMPLEMENTO  DM_NOME,
    CEP          DM_CEP,
    ID_CIDADE    DM_INTEGER,
    FONE         DM_FONE,
    FAX          DM_FONE,
    CONTATO      DM_NOME,
    FOTO         DM_MEMO,
    CAPITAL      DM_VARCHAR30,
    REGIAO       DM_NOME,
    SIGLA        DM_NOME,
    REGIME       DM_VARCHAR30,
    GENERO       DM_VARCHAR30
);

CREATE TABLE VISITANTE (
    ID_VISITANTE        DM_ID,
    VISITANTE           DM_NOME,
    ID_GRAU_PARENTESCO  DM_INTEGER,
    ID_INTERNO          DM_INTEGER,
    NUMERO_CARTEIRINHA  DM_VARCHAR30,
    CPF                 DM_CPF,
    RG                  DM_VARCHAR30,
    ORGAO_EXPEDIDOR     DM_VARCHAR30,
    SEXO                DM_FONE,
    DATA_CADASTRO       DM_DATA,
    STATUS              DM_VARCHAR1,
    DATA_ULT_VISITA     DM_DATA,
    FOTO                DM_FOTO,
    MOTIVO_INATIVO      DM_VARCHAR200,
    QUANTIDADE_MENOR    DM_INTEGER,
    ID_UP               DM_INTEGER
);

CREATE TABLE VISITANTE_INTERNO (
    ID_VISITANTE_INTERNO  INTEGER NOT NULL,
    ID_VISITANTE          DM_INTEGER NOT NULL,
    ID_INTERNO            DM_INTEGER NOT NULL,
    ID_GRAU_PARENTESCO    DM_INTEGER NOT NULL
);



/******************************************************************************/
/****                                Views                                 ****/
/******************************************************************************/


/* View: VW_MIGRA_CENTRO_TRIAGEM */
CREATE VIEW VW_MIGRA_CENTRO_TRIAGEM(
    NOME_INTERNO,
    IDPAVILHAO,
    IDGALERIA,
    IDSOLARIO,
    IDCELA,
    VULGO,
    OUTRO_NOME,
    ID_PROCEDENCIA,
    IDSETOR_TRABALHO,
    ST)
AS
select nome_interno, 
       510 idpavilhao,
       519 idGALERIA,
       552 idSOLARIO,
       (select id_cela
       from cela
       where cela.idpavilhao=510
       and cela.cela='C'||i.cela ) idcela,
--       tipo_cela,
       vulgo, 
       outro_nome, 
       (select first 1 id_procedencia
       from procedencia
       where procedencia.proedencia like '%'||i.procedencia||'%' ) id_procedencia,
       --data_entrada,
       (select first 1 id_setor_trabalho
       from setor_trabalho
       where setor_trabalho.setor_trabalho like '%'||UPPER(i.setor_trabalho)||'%' ) idsetor_trabalho,
--       data_inicio_trabalho,
--       data_final_trabalho,
       SUBSTR(status,1,1) AS ST
from int_ct i
;



/* View: VW_MIGRACAO_SISTEMA */
CREATE VIEW VW_MIGRACAO_SISTEMA(
    NOME_INTERNO,
    IDCELA,
    IDPAVILHAO,
    IDGALERIA,
    IDSOLARIO)
AS
select
NOME NOME_INTERNO,
(SELECT ID_CELA FROM CELA WHERE CELA.CELA=temp_presos.cela
AND IDPAVILHAO = (SELECT ID_PAVILHAO
 FROM PAVILHAO WHERE PAVILHAO.PAVILHAO=temp_presos.pavilhao)
) IDCELA,
(SELECT ID_PAVILHAO
 FROM PAVILHAO WHERE PAVILHAO.PAVILHAO=temp_presos.pavilhao) IDPAVILHAO,
(SELECT galeria.id_galeria FROM PAVILHAO JOIN galeria ON (pavilhao.id_pavilhao=galeria.idpavilhao)
 WHERE PAVILHAO.PAVILHAO=temp_presos.pavilhao) IDGALERIA,
(SELECT solario.id_solario FROM PAVILHAO
 JOIN galeria ON (pavilhao.id_pavilhao=galeria.idpavilhao)
 JOIN solario ON (solario.idgaleria=galeria.id_galeria)
WHERE PAVILHAO.PAVILHAO=temp_presos.pavilhao) IDSOLARIO

from temp_presos
;



/* View: VW_MIGRACAO_SISTEMA_1 */
CREATE VIEW VW_MIGRACAO_SISTEMA_1(
    CONCATENATION)
AS
SELECT
'UPDATE interno SET IDCONDICAO_INTERNO = '||CAST(temp_presos.servico AS integer)||' WHERE ID_INTERNO = '||
INTERNO.id_interno||' ; COMMIT;'

FROM temp_presos, INTERNO
WHERE temp_presos.nome = interno.nome_interno
;



/* View: VW_MOV_VISITANTE */
CREATE VIEW VW_MOV_VISITANTE(
    DATA_VISITA,
    ORDEM_VISITA,
    NOME_VISITANTE,
    TOTAL_MENORES,
    SEXO,
    NUMERO_CARTEIRINHA,
    NOME_INTERNO,
    GRAU_PARENTESCO)
AS
select distinct
    m.data_visita,
    m.ordem_visita,
    m.nome_visitante,
    (SELECT COUNT(*) FROM menores MN
     WHERE MN.id_visitante = M.id_visitante),
    M.SEXO,
    m.numero_carteirinha,
    (select list(distinct i.nome_interno,' / ')
     from interno i
     join visitante_interno v on (m.id_visitante = v.id_visitante)
     where (i.id_interno = v.id_interno) ) as nome_interno,
    (select list(distinct g.grau_parentesco,' / ')
     from interno i
     join visitante_interno v on (m.id_visitante = v.id_visitante)
     JOIN grau_parentesco g ON (v.id_grau_parentesco = G.id_grau_parentesco)
     where (i.id_interno = v.id_interno) ) as grau_parentesco
from mov_diario_visitantes m
where m.cancelado is null
;



/* View: VW_REDUNDANCIA */
CREATE VIEW VW_REDUNDANCIA(
    IDINTERNO)
AS
SELECT
IDINTERNO_1
FROM aa_redundancia
UNION ALL
SELECT
IDINTERNO_2
FROM aa_redundancia
;



/* View: VW_VISITANTE_INTERNO */
CREATE VIEW VW_VISITANTE_INTERNO(
    NOME_INTERNO,
    GRAU_PARENTESCO,
    ID_VISITANTE,
    ID_INTERNO,
    ID_GRAU_PARENTESCO,
    ID_VISITANTE_INTERNO)
AS
select
i.nome_interno,
g.grau_parentesco,
v.id_visitante,
v.id_interno,
v.id_grau_parentesco,
v.id_visitante_interno
from visitante_interno v
inner join interno i on (v.id_interno=i.id_interno)
inner join grau_parentesco g on (v.id_grau_parentesco=g.id_grau_parentesco)
;




/******************************************************************************/
/****                          Unique Constraints                          ****/
/******************************************************************************/

ALTER TABLE CONDICAO_INTERNO ADD CONSTRAINT UNQ1_CONDICAO_INTERNO UNIQUE (DESCRICAO);
ALTER TABLE FUNCAO_INTERNO ADD CONSTRAINT UNQ1_FUNCAO_INTERNO UNIQUE (FUNCAO_INTERNO);
ALTER TABLE FUNCIONARIO ADD CONSTRAINT UNQ1_FUNCIONARIO UNIQUE (LOGIN);
ALTER TABLE GALERIA ADD CONSTRAINT UNQ1_GALERIA UNIQUE (GALERIA, IDPAVILHAO);
ALTER TABLE NACIONALIDADE ADD CONSTRAINT UNQ1_NACIONALIDADE UNIQUE (NACIONALIDADE);
ALTER TABLE SOLARIO ADD CONSTRAINT UNQ1_SOLARIO UNIQUE (SOLARIO, IDGALERIA);
ALTER TABLE VISITANTE_INTERNO ADD CONSTRAINT UNQ1_VISITANTE_INTERNO UNIQUE (ID_VISITANTE, ID_INTERNO);


/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE ADVOGADO ADD CONSTRAINT PK_ADVOGADO PRIMARY KEY (ID_ADVOGADO);
ALTER TABLE AREA_SERVIDOR ADD CONSTRAINT PK_AREA_SERVIDOR PRIMARY KEY (ID_AREA);
ALTER TABLE ARTIGO ADD CONSTRAINT PK_ARTIGO PRIMARY KEY (ID_ARTIGO);
ALTER TABLE ATENDIMENTO_PSICOSSOCIAL ADD CONSTRAINT PK_ATENDIMENTO_PSICOSSOCIAL PRIMARY KEY (ID_ATENDIMENTO);
ALTER TABLE BACKUP_SINCRONISMO ADD CONSTRAINT PK_BACKUP_SINCRONISMO PRIMARY KEY (IDBACKUP_SINCRONISMO);
ALTER TABLE BACKUP_SINCRONISMO_BLOB ADD CONSTRAINT PK_BACKUP_SINCRONISMO_BLOB PRIMARY KEY (IDBACKUP_SINCRONISMO_BLOB);
ALTER TABLE BACKUP_VISITANTE ADD CONSTRAINT PK_BACKUP_VISITANTE PRIMARY KEY (IDBACKUP_VISITANTE);
ALTER TABLE CALC_SETOR_TRABALHO ADD CONSTRAINT PK_CALC_SETOR_TRABALHO PRIMARY KEY (IDCALC_SETOR_TRABALHO);
ALTER TABLE CALC_TRABALHO_ITENS ADD CONSTRAINT PK_CALC_TRABALHO_ITENS PRIMARY KEY (ID_CALC_TRABALHO_ITENS);
ALTER TABLE CELA ADD CONSTRAINT PK_CELA PRIMARY KEY (ID_CELA);
ALTER TABLE CIDADE ADD CONSTRAINT PK_CIDADE PRIMARY KEY (ID_CIDADE);
ALTER TABLE CODIGO_PENAL ADD CONSTRAINT PK_CODIGO_PENAL PRIMARY KEY (IDCODIGO_PENAL);
ALTER TABLE CONDENACAO_INTERNO ADD CONSTRAINT PK_CONDENACAO_INTERNO PRIMARY KEY (IDCONDENACAO_INTERNO);
ALTER TABLE CONDICAO_INTERNO ADD CONSTRAINT PK_CONDICAO_INTERNO PRIMARY KEY (IDCONDICAO_INTERNO);
ALTER TABLE DESTINO ADD CONSTRAINT PK_DESTINO PRIMARY KEY (ID_DESTINO);
ALTER TABLE ESCOLARIDADE ADD CONSTRAINT PK_ESCOLARIDADE PRIMARY KEY (ID_ESCOLARIDADE);
ALTER TABLE ESTADO ADD CONSTRAINT PK_ESTADO PRIMARY KEY (ID_ESTADO);
ALTER TABLE FUNCAO_FUNCIONARIO ADD CONSTRAINT PK_FUNCAO_FUNCIONARIO PRIMARY KEY (ID_FUNCAO_FUNCIONARIO);
ALTER TABLE FUNCAO_INTERNO ADD CONSTRAINT PK_FUNCAO_INTERNO PRIMARY KEY (ID_FUNCAO_INTERNO);
ALTER TABLE FUNCIONARIO ADD CONSTRAINT PK_FUNCIONARIO PRIMARY KEY (ID_FUNCIONARIO);
ALTER TABLE GALERIA ADD CONSTRAINT PK_GALERIA PRIMARY KEY (ID_GALERIA);
ALTER TABLE GRAU_PARENTESCO ADD CONSTRAINT PK_GRAU_PARENTESCO PRIMARY KEY (ID_GRAU_PARENTESCO);
ALTER TABLE HISTORICO_ESTUDO ADD CONSTRAINT PK_HISTORICO_ESTUDO PRIMARY KEY (ID_HISTORICO_ESTUDO);
ALTER TABLE HISTORICO_INTERNO ADD CONSTRAINT PK_HISTORICO_INTERNO PRIMARY KEY (IDHISTORICO_INTERNO);
ALTER TABLE HISTORICO_VISITANTE ADD CONSTRAINT PK_HISTORICO_VISITANTE PRIMARY KEY (ID_HISTORICO_VISITANTE);
ALTER TABLE INTERNO ADD CONSTRAINT PK_INTERNO PRIMARY KEY (ID_INTERNO);
ALTER TABLE MENORES ADD CONSTRAINT PK_MENORES PRIMARY KEY (ID_MENORES);
ALTER TABLE MOV_DIARIO_VISITANTES ADD CONSTRAINT PK_MOV_DIARIO_VISITANTES PRIMARY KEY (ID_MOV_DIARIO_VISITANTES);
ALTER TABLE MOV_INTERNO ADD CONSTRAINT PK_MOV_INTERNO PRIMARY KEY (ID_MOV_INTERNO);
ALTER TABLE MOV_TRABALHO ADD CONSTRAINT PK_MOV_TRABALHO PRIMARY KEY (ID_MOV_TRABALHO);
ALTER TABLE NACIONALIDADE ADD CONSTRAINT PK_NACIONALIDADE PRIMARY KEY (ID_NACIONALIDADE);
ALTER TABLE PADRAO ADD CONSTRAINT PK_PADRAO PRIMARY KEY (IDPADRAO);
ALTER TABLE PAVILHAO ADD CONSTRAINT PK_PAVILHAO PRIMARY KEY (ID_PAVILHAO);
ALTER TABLE PROCEDENCIA ADD CONSTRAINT PK_PROCEDENCIA PRIMARY KEY (ID_PROCEDENCIA);
ALTER TABLE PROCESSO ADD CONSTRAINT PK_PROCESSO PRIMARY KEY (ID_PROCESSO);
ALTER TABLE PROFISSAO ADD CONSTRAINT PK_PROFISSAO PRIMARY KEY (ID_PROFISSAO);
ALTER TABLE RACA ADD CONSTRAINT PK_RACA PRIMARY KEY (ID_RACA);
ALTER TABLE SERIE_ESTUDO ADD CONSTRAINT PK_SERIE_ESTUDO PRIMARY KEY (ID_SERIE_ESTUDO);
ALTER TABLE SETOR_TRABALHO ADD CONSTRAINT PK_SETOR_TRABALHO PRIMARY KEY (ID_SETOR_TRABALHO);
ALTER TABLE SINCRONISMO ADD CONSTRAINT PK_SINCRONISMO PRIMARY KEY (IDSINCRONISMO);
ALTER TABLE SINCRONISMO_BLOB ADD CONSTRAINT PK_SINCRONISMO_BLOB PRIMARY KEY (IDSINCRONISMO_BLOB);
ALTER TABLE SINCRONISMO_CONTROLE ADD CONSTRAINT PK_SINCRONISMO_CONTROLE PRIMARY KEY (IDSINCRONISMO_CONTROLE);
ALTER TABLE SOLARIO ADD CONSTRAINT PK_SOLARIO PRIMARY KEY (ID_SOLARIO);
ALTER TABLE TRABALHO ADD CONSTRAINT PK_TRABALHO PRIMARY KEY (ID_TRABALHO);
ALTER TABLE UNIDADE_PENAL ADD CONSTRAINT PK_UNIDADE_PENAL PRIMARY KEY (ID_UP);
ALTER TABLE VISITANTE ADD CONSTRAINT PK_VISITANTE PRIMARY KEY (ID_VISITANTE);
ALTER TABLE VISITANTE_INTERNO ADD CONSTRAINT PK_VISITANTE_INTERNO PRIMARY KEY (ID_VISITANTE_INTERNO);


/******************************************************************************/
/****                             Foreign Keys                             ****/
/******************************************************************************/

ALTER TABLE ATENDIMENTO_PSICOSSOCIAL ADD CONSTRAINT FK_ATENDIMENTO_PSICOSSOCIAL_1 FOREIGN KEY (IDINTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE ATENDIMENTO_PSICOSSOCIAL ADD CONSTRAINT FK_ATENDIMENTO_PSICOSSOCIAL_2 FOREIGN KEY (IDTECNICO) REFERENCES FUNCIONARIO (ID_FUNCIONARIO);
ALTER TABLE BACKUP_SINCRONISMO_BLOB ADD CONSTRAINT FK_BACKUP_SINCRONISMO_BLOB_1 FOREIGN KEY (IDSINCRONISMO_CONTROLE) REFERENCES SINCRONISMO_CONTROLE (IDSINCRONISMO_CONTROLE);
ALTER TABLE CALC_SETOR_TRABALHO ADD CONSTRAINT FK_CALC_SETOR_TRABALHO_1 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE CALC_SETOR_TRABALHO ADD CONSTRAINT FK_CALC_SETOR_TRABALHO_2 FOREIGN KEY (ID_SETOR_TRABALHO) REFERENCES SETOR_TRABALHO (ID_SETOR_TRABALHO);
ALTER TABLE CALC_TRABALHO_ITENS ADD CONSTRAINT FK_CALC_TRABALHO_ITENS_1 FOREIGN KEY (ID_CALC_TRABALHO) REFERENCES CALC_SETOR_TRABALHO (IDCALC_SETOR_TRABALHO);
ALTER TABLE CALC_TRABALHO_ITENS ADD CONSTRAINT FK_CALC_TRABALHO_ITENS_2 FOREIGN KEY (ID_SETOR_TRABALHO) REFERENCES SETOR_TRABALHO (ID_SETOR_TRABALHO);
ALTER TABLE CIDADE ADD CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY (ID_ESTADO) REFERENCES ESTADO (ID_ESTADO);
ALTER TABLE CIDADE ADD CONSTRAINT FK_CIDADE_NACIONALIDADE FOREIGN KEY (ID_NACIONALIDADE) REFERENCES NACIONALIDADE (ID_NACIONALIDADE);
ALTER TABLE CONDENACAO_INTERNO ADD CONSTRAINT FK_CONDENACAO_INTERNO_2 FOREIGN KEY (IDINTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNCIONARIO_1 FOREIGN KEY (ID_FUNCAO) REFERENCES FUNCAO_FUNCIONARIO (ID_FUNCAO_FUNCIONARIO);
ALTER TABLE HISTORICO_ESTUDO ADD CONSTRAINT FK_HISTORICO_ESTUDO_1 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE HISTORICO_VISITANTE ADD CONSTRAINT FK_HISTORICO_VISITANTE_1 FOREIGN KEY (ID_VISITANTE) REFERENCES VISITANTE (ID_VISITANTE);
ALTER TABLE HISTORICO_VISITANTE ADD CONSTRAINT FK_HISTORICO_VISITANTE_2 FOREIGN KEY (ID_GRAU_PARENTESCO) REFERENCES GRAU_PARENTESCO (ID_GRAU_PARENTESCO);
ALTER TABLE HISTORICO_VISITANTE ADD CONSTRAINT FK_HISTORICO_VISITANTE_3 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_1 FOREIGN KEY (IDPROFISSAO) REFERENCES PROFISSAO (ID_PROFISSAO);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_10 FOREIGN KEY (IDCIDADE) REFERENCES CIDADE (ID_CIDADE);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_11 FOREIGN KEY (IDADVOGADO) REFERENCES ADVOGADO (ID_ADVOGADO);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_12 FOREIGN KEY (ID_PROCEDENCIA) REFERENCES PROCEDENCIA (ID_PROCEDENCIA);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_13 FOREIGN KEY (IDCONDICAO_INTERNO) REFERENCES CONDICAO_INTERNO (IDCONDICAO_INTERNO);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_14 FOREIGN KEY (IDDESTINO) REFERENCES DESTINO (ID_DESTINO);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_17 FOREIGN KEY (IDSERIEESTUDO) REFERENCES SERIE_ESTUDO (ID_SERIE_ESTUDO);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_6 FOREIGN KEY (IDNATURALIDADE) REFERENCES CIDADE (ID_CIDADE);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_7 FOREIGN KEY (IDNACIONALIDADE) REFERENCES NACIONALIDADE (ID_NACIONALIDADE);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_8 FOREIGN KEY (IDRACA) REFERENCES RACA (ID_RACA);
ALTER TABLE INTERNO ADD CONSTRAINT FK_INTERNO_9 FOREIGN KEY (IDESCOLARIDADE) REFERENCES ESCOLARIDADE (ID_ESCOLARIDADE);
ALTER TABLE MENORES ADD CONSTRAINT FK_MENORES_1 FOREIGN KEY (ID_VISITANTE) REFERENCES VISITANTE (ID_VISITANTE);
ALTER TABLE MOV_DIARIO_VISITANTES ADD CONSTRAINT FK_MOV_DIARIO_VISITANTES_1 FOREIGN KEY (ID_GRAU_PARENTESCO) REFERENCES GRAU_PARENTESCO (ID_GRAU_PARENTESCO);
ALTER TABLE MOV_DIARIO_VISITANTES ADD CONSTRAINT FK_MOV_DIARIO_VISITANTES_2 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE MOV_DIARIO_VISITANTES ADD CONSTRAINT FK_MOV_DIARIO_VISITANTES_3 FOREIGN KEY (ID_VISITANTE) REFERENCES VISITANTE (ID_VISITANTE);
ALTER TABLE MOV_INTERNO ADD CONSTRAINT FK_MOV_INTERNO_4 FOREIGN KEY (ID_PROCEDENCIA) REFERENCES PROCEDENCIA (ID_PROCEDENCIA);
ALTER TABLE MOV_INTERNO ADD CONSTRAINT FK_MOV_INTERNO_5 FOREIGN KEY (ID_DESTINO) REFERENCES DESTINO (ID_DESTINO);
ALTER TABLE MOV_TRABALHO ADD CONSTRAINT FK_MOV_TRABALHO_1 FOREIGN KEY (ID_TRABALHO) REFERENCES TRABALHO (ID_TRABALHO);
ALTER TABLE MOV_TRABALHO ADD CONSTRAINT FK_MOV_TRABALHO_2 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE MOV_TRABALHO ADD CONSTRAINT FK_MOV_TRABALHO_3 FOREIGN KEY (ID_SETOR_TRABALHO) REFERENCES SETOR_TRABALHO (ID_SETOR_TRABALHO);
ALTER TABLE MOV_TRABALHO ADD CONSTRAINT FK_MOV_TRABALHO_4 FOREIGN KEY (ID_FUNCAO_INTERNO) REFERENCES FUNCAO_INTERNO (ID_FUNCAO_INTERNO);
ALTER TABLE MOV_TRABALHO ADD CONSTRAINT FK_MOV_TRABALHO_5 FOREIGN KEY (ID_UNIDADE_PENAL) REFERENCES UNIDADE_PENAL (ID_UP);
ALTER TABLE PROCESSO ADD CONSTRAINT FK_PROCESSO_1 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE PROCESSO ADD CONSTRAINT FK_PROCESSO_2 FOREIGN KEY (ID_ARTIGO) REFERENCES ARTIGO (ID_ARTIGO);
ALTER TABLE SINCRONISMO ADD CONSTRAINT FK_SINCRONISMO FOREIGN KEY (IDSINCRONISMO_CONTROLE) REFERENCES SINCRONISMO_CONTROLE (IDSINCRONISMO_CONTROLE);
ALTER TABLE SINCRONISMO_BLOB ADD CONSTRAINT FK_SINCRONISMO_BLOB_1 FOREIGN KEY (IDSINCRONISMO_CONTROLE) REFERENCES SINCRONISMO_CONTROLE (IDSINCRONISMO_CONTROLE);
ALTER TABLE TRABALHO ADD CONSTRAINT FK_TRABALHO_1 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE TRABALHO ADD CONSTRAINT FK_TRABALHO_2 FOREIGN KEY (ID_SETOR_TRABALHO) REFERENCES SETOR_TRABALHO (ID_SETOR_TRABALHO);
ALTER TABLE TRABALHO ADD CONSTRAINT FK_TRABALHO_3 FOREIGN KEY (ID_FUNCAO_INTERNO) REFERENCES FUNCAO_INTERNO (ID_FUNCAO_INTERNO);
ALTER TABLE UNIDADE_PENAL ADD CONSTRAINT FK_UNIDADE_PENAL_1 FOREIGN KEY (ID_CIDADE) REFERENCES CIDADE (ID_CIDADE);
ALTER TABLE VISITANTE ADD CONSTRAINT FK_VISITANTE_1 FOREIGN KEY (ID_INTERNO) REFERENCES INTERNO (ID_INTERNO);
ALTER TABLE VISITANTE ADD CONSTRAINT FK_VISITANTE_2 FOREIGN KEY (ID_GRAU_PARENTESCO) REFERENCES GRAU_PARENTESCO (ID_GRAU_PARENTESCO);
ALTER TABLE VISITANTE_INTERNO ADD CONSTRAINT FK_VISITANTE_INTERNO_1 FOREIGN KEY (ID_VISITANTE) REFERENCES VISITANTE (ID_VISITANTE);
ALTER TABLE VISITANTE_INTERNO ADD CONSTRAINT FK_VISITANTE_INTERNO_3 FOREIGN KEY (ID_GRAU_PARENTESCO) REFERENCES GRAU_PARENTESCO (ID_GRAU_PARENTESCO);


/******************************************************************************/
/****                               Indices                                ****/
/******************************************************************************/

CREATE INDEX AA_REDUNDANCIA_IDX1 ON AA_REDUNDANCIA (IDINTERNO_1);
CREATE INDEX AA_REDUNDANCIA_IDX2 ON AA_REDUNDANCIA (IDINTERNO_2);
CREATE INDEX BACKUP_SINC_BLOB_CAMPO ON BACKUP_SINCRONISMO_BLOB (CAMPO);
CREATE INDEX BACKUP_SINC_BLOB_DATA ON BACKUP_SINCRONISMO_BLOB (DATA_HORA);
CREATE INDEX BACKUP_SINC_BLOB_NOME_PK ON BACKUP_SINCRONISMO_BLOB (NOME_PK);
CREATE INDEX BACKUP_SINC_BLOB_TABELA ON BACKUP_SINCRONISMO_BLOB (TABELA);
CREATE INDEX HISTORICO_INTERNO_IDX1 ON HISTORICO_INTERNO (IDINTERNO);
CREATE INDEX INTERNO_IDX1 ON INTERNO (NOME_INTERNO);
CREATE INDEX INTERNO_IDX2 ON INTERNO (RGI);
CREATE INDEX INTERNO_IDX3 ON INTERNO (ST);
CREATE INDEX INTERNO_IDX4 ON INTERNO (ID_UP);
CREATE INDEX MOV_INTERNO_IDX1 ON MOV_INTERNO (ID_INTERNO);
CREATE INDEX MOV_INTERNO_IDX2 ON MOV_INTERNO (ID_UNIDADE_PENAL);
CREATE INDEX MOV_INTERNO_IDX3 ON MOV_INTERNO (DATA_MOVIMENTACAO);
CREATE INDEX MOV_INTERNO_IDX4 ON MOV_INTERNO (HORA_MOVIMENTACAO);
CREATE INDEX MOV_INTERNO_IDX5 ON MOV_INTERNO (ID_FUNCIONARIO);
CREATE UNIQUE INDEX PADRAO_CODUP ON PADRAO (COD_UP);
CREATE INDEX SINCRONISMO_IDX1 ON SINCRONISMO (ORDEM);
CREATE INDEX SINCRONISMO_IDX2 ON SINCRONISMO (STATUS);
CREATE INDEX SINCRONISMO_IDX3 ON SINCRONISMO (ORDEM, IDSINCRONISMO);
CREATE INDEX SINCRONISMO_BLOB_CAMPO ON SINCRONISMO_BLOB (CAMPO);
CREATE INDEX SINCRONISMO_BLOB_DATA ON SINCRONISMO_BLOB (DATA_HORA);
CREATE INDEX SINCRONISMO_BLOB_NOME_PK ON SINCRONISMO_BLOB (NOME_PK);
CREATE INDEX SINCRONISMO_BLOB_TABELA ON SINCRONISMO_BLOB (TABELA);


/******************************************************************************/
/****                               Triggers                               ****/
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/****                         Triggers for tables                          ****/
/******************************************************************************/



/* Trigger: ADVOGADO_AD_SINCRONISMO */
CREATE TRIGGER ADVOGADO_AD_SINCRONISMO FOR ADVOGADO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6110

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM ADVOGADO WHERE ID_ADVOGADO = '||OLD.ID_ADVOGADO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: ADVOGADO_AI_SINCRONISMO */
CREATE TRIGGER ADVOGADO_AI_SINCRONISMO FOR ADVOGADO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6110

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO ADVOGADO (ID_ADVOGADO,'
||' ADVOGADO,'
||' OAB) VALUES ('
||COALESCE(NEW.ID_ADVOGADO,'NULL')||','
||COALESCE(''''||NEW.ADVOGADO||'''','NULL')||','
||COALESCE(''''||NEW.OAB||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: ADVOGADO_AU_SINCRONISMO */
CREATE TRIGGER ADVOGADO_AU_SINCRONISMO FOR ADVOGADO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6110
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ADVOGADO,'')<>COALESCE(OLD.ADVOGADO,'')) THEN TXT=TXT||',ADVOGADO = '||COALESCE(''''||NEW.ADVOGADO||'''','NULL');
IF (COALESCE(NEW.OAB,'')<>COALESCE(OLD.OAB,'')) THEN TXT=TXT||',OAB = '||COALESCE(''''||NEW.OAB||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE ADVOGADO SET ID_ADVOGADO = '''||NEW.ID_ADVOGADO||''''||TXT||' WHERE ID_ADVOGADO = '''||NEW.ID_ADVOGADO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: ADVOGADO_BI0 */
CREATE TRIGGER ADVOGADO_BI0 FOR ADVOGADO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_advogado IS null or (new.id_advogado = 0)  ) then
    new.id_advogado = gen_id (cod_up, 0) || gen_id (id_advogado, 1);
end
^

/* Trigger: AREA_SERVIDOR_AD_SINCRONISMO */
CREATE TRIGGER AREA_SERVIDOR_AD_SINCRONISMO FOR AREA_SERVIDOR
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM AREA_SERVIDOR WHERE ID_AREA = '||OLD.ID_AREA||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: AREA_SERVIDOR_AI_SINCRONISMO */
CREATE TRIGGER AREA_SERVIDOR_AI_SINCRONISMO FOR AREA_SERVIDOR
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO AREA_SERVIDOR (ID_AREA,'
||' AREA_SERVIDOR) VALUES ('
||COALESCE(NEW.ID_AREA,'NULL')||','
||COALESCE(''''||NEW.AREA_SERVIDOR||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: AREA_SERVIDOR_AU_SINCRONISMO */
CREATE TRIGGER AREA_SERVIDOR_AU_SINCRONISMO FOR AREA_SERVIDOR
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.AREA_SERVIDOR,'')<>COALESCE(OLD.AREA_SERVIDOR,'')) THEN TXT=TXT||',AREA_SERVIDOR = '||COALESCE(''''||NEW.AREA_SERVIDOR||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE AREA_SERVIDOR SET ID_AREA = '''||NEW.ID_AREA||''''||TXT||' WHERE ID_AREA = '''||NEW.ID_AREA||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: AREA_SERVIDOR_BI0 */
CREATE TRIGGER AREA_SERVIDOR_BI0 FOR AREA_SERVIDOR
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
     if (NEW.id_area IS null or (new.id_area = 0)  ) then
    new.id_area = gen_id (cod_up, 0) || gen_id (id_area_servidor, 1);
end
^

/* Trigger: ARTIGO_AD_SINCRONISMO */
CREATE TRIGGER ARTIGO_AD_SINCRONISMO FOR ARTIGO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM ARTIGO WHERE ID_ARTIGO = '||OLD.ID_ARTIGO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: ARTIGO_AI_SINCRONISMO */
CREATE TRIGGER ARTIGO_AI_SINCRONISMO FOR ARTIGO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO ARTIGO (ID_ARTIGO,'
||' ARTIGO) VALUES ('
||COALESCE(NEW.ID_ARTIGO,'NULL')||','
||COALESCE(''''||NEW.ARTIGO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: ARTIGO_AU_SINCRONISMO */
CREATE TRIGGER ARTIGO_AU_SINCRONISMO FOR ARTIGO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ARTIGO,'')<>COALESCE(OLD.ARTIGO,'')) THEN TXT=TXT||',ARTIGO = '||COALESCE(''''||NEW.ARTIGO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE ARTIGO SET ID_ARTIGO = '''||NEW.ID_ARTIGO||''''||TXT||' WHERE ID_ARTIGO = '''||NEW.ID_ARTIGO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: ARTIGO_BI0 */
CREATE TRIGGER ARTIGO_BI0 FOR ARTIGO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_artigo IS null or (new.id_artigo = 0)  ) then
    new.id_artigo = gen_id (cod_up, 0) || gen_id (id_artigo, 1);
end
^

/* Trigger: ATENDIMENTO_PSICOSSOCIAL_AD_SIN */
CREATE TRIGGER ATENDIMENTO_PSICOSSOCIAL_AD_SIN FOR ATENDIMENTO_PSICOSSOCIAL
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.9070

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM ATENDIMENTO_PSICOSSOCIAL WHERE ID_ATENDIMENTO = '||OLD.ID_ATENDIMENTO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: ATENDIMENTO_PSICOSSOCIAL_AI_SIN */
CREATE TRIGGER ATENDIMENTO_PSICOSSOCIAL_AI_SIN FOR ATENDIMENTO_PSICOSSOCIAL
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.9070

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO ATENDIMENTO_PSICOSSOCIAL (ID_ATENDIMENTO,'
||' IDINTERNO,'
||' DATAATENDIMENTO,'
||' IDTECNICO,'
||' DESCRICAO_ATENDIMENTO) VALUES ('
||COALESCE(NEW.ID_ATENDIMENTO,'NULL')||','
||COALESCE(NEW.IDINTERNO,'NULL')||','
||COALESCE(''''||NEW.DATAATENDIMENTO||'''','NULL')||','
||COALESCE(NEW.IDTECNICO,'NULL')||','
||COALESCE(''''||NEW.DESCRICAO_ATENDIMENTO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: ATENDIMENTO_PSICOSSOCIAL_AU_SIN */
CREATE TRIGGER ATENDIMENTO_PSICOSSOCIAL_AU_SIN FOR ATENDIMENTO_PSICOSSOCIAL
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.9070
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.IDINTERNO,'')<>COALESCE(OLD.IDINTERNO,'')) THEN TXT=TXT||',IDINTERNO = '||COALESCE(NEW.IDINTERNO,'NULL');
IF (COALESCE(NEW.DATAATENDIMENTO,'')<>COALESCE(OLD.DATAATENDIMENTO,'')) THEN TXT=TXT||',DATAATENDIMENTO = '||COALESCE(''''||NEW.DATAATENDIMENTO||'''','NULL');
IF (COALESCE(NEW.IDTECNICO,'')<>COALESCE(OLD.IDTECNICO,'')) THEN TXT=TXT||',IDTECNICO = '||COALESCE(NEW.IDTECNICO,'NULL');
IF (COALESCE(NEW.DESCRICAO_ATENDIMENTO,'')<>COALESCE(OLD.DESCRICAO_ATENDIMENTO,'')) THEN TXT=TXT||',DESCRICAO_ATENDIMENTO = '||COALESCE(''''||NEW.DESCRICAO_ATENDIMENTO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE ATENDIMENTO_PSICOSSOCIAL SET ID_ATENDIMENTO = '''||NEW.ID_ATENDIMENTO||''''||TXT||' WHERE ID_ATENDIMENTO = '''||NEW.ID_ATENDIMENTO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: BACKUP_SINCRONISMO_BI0 */
CREATE TRIGGER BACKUP_SINCRONISMO_BI0 FOR BACKUP_SINCRONISMO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  IF ((NEW.IDBACKUP_SINCRONISMO = 0) OR (NEW.IDBACKUP_SINCRONISMO IS NULL))  THEN
      NEW.IDBACKUP_SINCRONISMO = GEN_ID(IDBACKUP_SINCRONISMO_GEN, 1);
end
^

/* Trigger: BACKUP_SINC_BLOB_BI0 */
CREATE TRIGGER BACKUP_SINC_BLOB_BI0 FOR BACKUP_SINCRONISMO_BLOB
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  NEW.DATA_HORA_BACKUP = 'NOW';
  NEW.IDBACKUP_SINCRONISMO_BLOB = GEN_ID(IDBACKUP_SINCRONISMO_BLOB_GEN,1);
END
^

/* Trigger: BACKUP_VISITANTE_BI0 */
CREATE TRIGGER BACKUP_VISITANTE_BI0 FOR BACKUP_VISITANTE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (NEW.idbackup_visitante IS NULL OR (NEW.idbackup_visitante = 0)) then
  BEGIN
    NEW.idbackup_visitante = GEN_ID(cod_up,0)||GEN_ID(idbackup_visitante,1);
  END
end
^

/* Trigger: CALC_SETOR_TRABALHO_AD_SINCRONI */
CREATE TRIGGER CALC_SETOR_TRABALHO_AD_SINCRONI FOR CALC_SETOR_TRABALHO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CALC_SETOR_TRABALHO WHERE IDCALC_SETOR_TRABALHO = '||OLD.IDCALC_SETOR_TRABALHO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CALC_SETOR_TRABALHO_AI_SINCRONI */
CREATE TRIGGER CALC_SETOR_TRABALHO_AI_SINCRONI FOR CALC_SETOR_TRABALHO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CALC_SETOR_TRABALHO (IDCALC_SETOR_TRABALHO,'
||' ID_INTERNO,'
||' DATA_INICIAL,'
||' DATA_FINAL,'
||' QTDEDIASTRABALHADO,'
||' DIANAOREMIDO,'
||' QTDEDIASREMIDO,'
||' DIASTRABALHADOEXTENSO,'
||' DIASREMIDOEXTENSO,'
||' TOTALDIASTRABALHO,'
||' TOTALDIASREMIDO,'
||' ID_SETOR_TRABALHO) VALUES ('
||COALESCE(NEW.IDCALC_SETOR_TRABALHO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.DATA_INICIAL||'''','NULL')||','
||COALESCE(''''||NEW.DATA_FINAL||'''','NULL')||','
||COALESCE(NEW.QTDEDIASTRABALHADO,'NULL')||','
||COALESCE(NEW.DIANAOREMIDO,'NULL')||','
||COALESCE(NEW.QTDEDIASREMIDO,'NULL')||','
||COALESCE(''''||NEW.DIASTRABALHADOEXTENSO||'''','NULL')||','
||COALESCE(''''||NEW.DIASREMIDOEXTENSO||'''','NULL')||','
||COALESCE(NEW.TOTALDIASTRABALHO,'NULL')||','
||COALESCE(NEW.TOTALDIASREMIDO,'NULL')||','
||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CALC_SETOR_TRABALHO_AU_SINCRONI */
CREATE TRIGGER CALC_SETOR_TRABALHO_AU_SINCRONI FOR CALC_SETOR_TRABALHO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6260
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.DATA_INICIAL,'')<>COALESCE(OLD.DATA_INICIAL,'')) THEN TXT=TXT||',DATA_INICIAL = '||COALESCE(''''||NEW.DATA_INICIAL||'''','NULL');
IF (COALESCE(NEW.DATA_FINAL,'')<>COALESCE(OLD.DATA_FINAL,'')) THEN TXT=TXT||',DATA_FINAL = '||COALESCE(''''||NEW.DATA_FINAL||'''','NULL');
IF (COALESCE(NEW.QTDEDIASTRABALHADO,'')<>COALESCE(OLD.QTDEDIASTRABALHADO,'')) THEN TXT=TXT||',QTDEDIASTRABALHADO = '||COALESCE(NEW.QTDEDIASTRABALHADO,'NULL');
IF (COALESCE(NEW.DIANAOREMIDO,'')<>COALESCE(OLD.DIANAOREMIDO,'')) THEN TXT=TXT||',DIANAOREMIDO = '||COALESCE(NEW.DIANAOREMIDO,'NULL');
IF (COALESCE(NEW.QTDEDIASREMIDO,'')<>COALESCE(OLD.QTDEDIASREMIDO,'')) THEN TXT=TXT||',QTDEDIASREMIDO = '||COALESCE(NEW.QTDEDIASREMIDO,'NULL');
IF (COALESCE(NEW.DIASTRABALHADOEXTENSO,'')<>COALESCE(OLD.DIASTRABALHADOEXTENSO,'')) THEN TXT=TXT||',DIASTRABALHADOEXTENSO = '||COALESCE(''''||NEW.DIASTRABALHADOEXTENSO||'''','NULL');
IF (COALESCE(NEW.DIASREMIDOEXTENSO,'')<>COALESCE(OLD.DIASREMIDOEXTENSO,'')) THEN TXT=TXT||',DIASREMIDOEXTENSO = '||COALESCE(''''||NEW.DIASREMIDOEXTENSO||'''','NULL');
IF (COALESCE(NEW.TOTALDIASTRABALHO,'')<>COALESCE(OLD.TOTALDIASTRABALHO,'')) THEN TXT=TXT||',TOTALDIASTRABALHO = '||COALESCE(NEW.TOTALDIASTRABALHO,'NULL');
IF (COALESCE(NEW.TOTALDIASREMIDO,'')<>COALESCE(OLD.TOTALDIASREMIDO,'')) THEN TXT=TXT||',TOTALDIASREMIDO = '||COALESCE(NEW.TOTALDIASREMIDO,'NULL');
IF (COALESCE(NEW.ID_SETOR_TRABALHO,'')<>COALESCE(OLD.ID_SETOR_TRABALHO,'')) THEN TXT=TXT||',ID_SETOR_TRABALHO = '||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CALC_SETOR_TRABALHO SET IDCALC_SETOR_TRABALHO = '''||NEW.IDCALC_SETOR_TRABALHO||''''||TXT||' WHERE IDCALC_SETOR_TRABALHO = '''||NEW.IDCALC_SETOR_TRABALHO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CALC_SETOR_TRABALHO_BI0 */
CREATE TRIGGER CALC_SETOR_TRABALHO_BI0 FOR CALC_SETOR_TRABALHO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.idcalc_setor_trabalho IS null or (new.idcalc_setor_trabalho = 0)  ) then
    new.idcalc_setor_trabalho = gen_id (cod_up, 0) || gen_id (id_calc_setor_trabalho, 1);
end
^

/* Trigger: CALC_TRABALHO_ITENS_AD_SINCRONI */
CREATE TRIGGER CALC_TRABALHO_ITENS_AD_SINCRONI FOR CALC_TRABALHO_ITENS
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6420

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CALC_TRABALHO_ITENS WHERE ID_CALC_TRABALHO_ITENS = '||OLD.ID_CALC_TRABALHO_ITENS||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CALC_TRABALHO_ITENS_AI_SINCRONI */
CREATE TRIGGER CALC_TRABALHO_ITENS_AI_SINCRONI FOR CALC_TRABALHO_ITENS
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6420

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CALC_TRABALHO_ITENS (ID_CALC_TRABALHO_ITENS,'
||' ID_CALC_TRABALHO,'
||' DATA_INICIAL,'
||' DATA_FINAL,'
||' ID_SETOR_TRABALHO,'
||' DIASTRABALHADO,'
||' DIASREMIDO) VALUES ('
||COALESCE(NEW.ID_CALC_TRABALHO_ITENS,'NULL')||','
||COALESCE(NEW.ID_CALC_TRABALHO,'NULL')||','
||COALESCE(''''||NEW.DATA_INICIAL||'''','NULL')||','
||COALESCE(''''||NEW.DATA_FINAL||'''','NULL')||','
||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL')||','
||COALESCE(NEW.DIASTRABALHADO,'NULL')||','
||COALESCE(NEW.DIASREMIDO,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CALC_TRABALHO_ITENS_AU_SINCRONI */
CREATE TRIGGER CALC_TRABALHO_ITENS_AU_SINCRONI FOR CALC_TRABALHO_ITENS
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6420
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_CALC_TRABALHO,'')<>COALESCE(OLD.ID_CALC_TRABALHO,'')) THEN TXT=TXT||',ID_CALC_TRABALHO = '||COALESCE(NEW.ID_CALC_TRABALHO,'NULL');
IF (COALESCE(NEW.DATA_INICIAL,'')<>COALESCE(OLD.DATA_INICIAL,'')) THEN TXT=TXT||',DATA_INICIAL = '||COALESCE(''''||NEW.DATA_INICIAL||'''','NULL');
IF (COALESCE(NEW.DATA_FINAL,'')<>COALESCE(OLD.DATA_FINAL,'')) THEN TXT=TXT||',DATA_FINAL = '||COALESCE(''''||NEW.DATA_FINAL||'''','NULL');
IF (COALESCE(NEW.ID_SETOR_TRABALHO,'')<>COALESCE(OLD.ID_SETOR_TRABALHO,'')) THEN TXT=TXT||',ID_SETOR_TRABALHO = '||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL');
IF (COALESCE(NEW.DIASTRABALHADO,'')<>COALESCE(OLD.DIASTRABALHADO,'')) THEN TXT=TXT||',DIASTRABALHADO = '||COALESCE(NEW.DIASTRABALHADO,'NULL');
IF (COALESCE(NEW.DIASREMIDO,'')<>COALESCE(OLD.DIASREMIDO,'')) THEN TXT=TXT||',DIASREMIDO = '||COALESCE(NEW.DIASREMIDO,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CALC_TRABALHO_ITENS SET ID_CALC_TRABALHO_ITENS = '''||NEW.ID_CALC_TRABALHO_ITENS||''''||TXT||' WHERE ID_CALC_TRABALHO_ITENS = '''||NEW.ID_CALC_TRABALHO_ITENS||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CALC_TRABALHO_ITENS_BI0 */
CREATE TRIGGER CALC_TRABALHO_ITENS_BI0 FOR CALC_TRABALHO_ITENS
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_calc_trabalho_itens IS null or (new.id_calc_trabalho_itens  = 0)  ) then
    new.id_calc_trabalho_itens  = gen_id (cod_up, 0) || gen_id (idcalc_trabalho_itens, 1);
end
^

/* Trigger: CELA_AD_SINCRONISMO */
CREATE TRIGGER CELA_AD_SINCRONISMO FOR CELA
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6420

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CELA WHERE ID_CELA = '||OLD.ID_CELA||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CELA_AI_SINCRONISMO */
CREATE TRIGGER CELA_AI_SINCRONISMO FOR CELA
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6420

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CELA (ID_CELA,'
||' CELA,'
||' IDSOLARIO,'
||' IDPAVILHAO,'
||' IDGALERIA,'
||' ISOLAMENTO) VALUES ('
||COALESCE(NEW.ID_CELA,'NULL')||','
||COALESCE(''''||NEW.CELA||'''','NULL')||','
||COALESCE(NEW.IDSOLARIO,'NULL')||','
||COALESCE(NEW.IDPAVILHAO,'NULL')||','
||COALESCE(NEW.IDGALERIA,'NULL')||','
||COALESCE(''''||NEW.ISOLAMENTO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CELA_AU_SINCRONISMO */
CREATE TRIGGER CELA_AU_SINCRONISMO FOR CELA
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6420
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.CELA,'')<>COALESCE(OLD.CELA,'')) THEN TXT=TXT||',CELA = '||COALESCE(''''||NEW.CELA||'''','NULL');
IF (COALESCE(NEW.IDSOLARIO,'')<>COALESCE(OLD.IDSOLARIO,'')) THEN TXT=TXT||',IDSOLARIO = '||COALESCE(NEW.IDSOLARIO,'NULL');
IF (COALESCE(NEW.IDPAVILHAO,'')<>COALESCE(OLD.IDPAVILHAO,'')) THEN TXT=TXT||',IDPAVILHAO = '||COALESCE(NEW.IDPAVILHAO,'NULL');
IF (COALESCE(NEW.IDGALERIA,'')<>COALESCE(OLD.IDGALERIA,'')) THEN TXT=TXT||',IDGALERIA = '||COALESCE(NEW.IDGALERIA,'NULL');
IF (COALESCE(NEW.ISOLAMENTO,'')<>COALESCE(OLD.ISOLAMENTO,'')) THEN TXT=TXT||',ISOLAMENTO = '||COALESCE(''''||NEW.ISOLAMENTO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CELA SET ID_CELA = '''||NEW.ID_CELA||''''||TXT||' WHERE ID_CELA = '''||NEW.ID_CELA||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CELA_BI0 */
CREATE TRIGGER CELA_BI0 FOR CELA
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_cela IS null or (new.id_cela = 0)  ) then
    new.id_cela = gen_id (cod_up, 0) || gen_id (id_cela, 1);
end
^

/* Trigger: CELA_BIU0 */
CREATE TRIGGER CELA_BIU0 FOR CELA
ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
declare variable tem_galeria integer;
declare variable tem_solario integer;
begin

  tem_galeria = 0 ;
  tem_solario = 0 ;

  select count(*)
  from galeria g
  where g.id_galeria = new.idgaleria
  and g.idpavilhao = new.idpavilhao
  into :tem_galeria;

  if (not (tem_galeria>0)) then
  begin
    exception messagem_diversas 'Galeria nao pertence a este pavilhao!';
  end

  select count(*)
  from solario s
  where s.id_solario = new.idsolario
  and s.idgaleria = new.idgaleria
  into :tem_solario;

  if (not (tem_solario>0)) then
  begin
    exception messagem_diversas 'Solario nao pertence a esta galeria!';
  end




end
^

/* Trigger: CIDADE_AD_SINCRONISMO */
CREATE TRIGGER CIDADE_AD_SINCRONISMO FOR CIDADE
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6580

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CIDADE WHERE ID_CIDADE = '||OLD.ID_CIDADE||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CIDADE_AI_SINCRONISMO */
CREATE TRIGGER CIDADE_AI_SINCRONISMO FOR CIDADE
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6580

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CIDADE (ID_CIDADE,'
||' CIDADE,'
||' UF,'
||' ID_ESTADO,'
||' ID_NACIONALIDADE) VALUES ('
||COALESCE(NEW.ID_CIDADE,'NULL')||','
||COALESCE(''''||NEW.CIDADE||'''','NULL')||','
||COALESCE(''''||NEW.UF||'''','NULL')||','
||COALESCE(NEW.ID_ESTADO,'NULL')||','
||COALESCE(NEW.ID_NACIONALIDADE,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CIDADE_AU_SINCRONISMO */
CREATE TRIGGER CIDADE_AU_SINCRONISMO FOR CIDADE
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6580
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.CIDADE,'')<>COALESCE(OLD.CIDADE,'')) THEN TXT=TXT||',CIDADE = '||COALESCE(''''||NEW.CIDADE||'''','NULL');
IF (COALESCE(NEW.UF,'')<>COALESCE(OLD.UF,'')) THEN TXT=TXT||',UF = '||COALESCE(''''||NEW.UF||'''','NULL');
IF (COALESCE(NEW.ID_ESTADO,'')<>COALESCE(OLD.ID_ESTADO,'')) THEN TXT=TXT||',ID_ESTADO = '||COALESCE(NEW.ID_ESTADO,'NULL');
IF (COALESCE(NEW.ID_NACIONALIDADE,'')<>COALESCE(OLD.ID_NACIONALIDADE,'')) THEN TXT=TXT||',ID_NACIONALIDADE = '||COALESCE(NEW.ID_NACIONALIDADE,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CIDADE SET ID_CIDADE = '''||NEW.ID_CIDADE||''''||TXT||' WHERE ID_CIDADE = '''||NEW.ID_CIDADE||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CIDADE_BI0 */
CREATE TRIGGER CIDADE_BI0 FOR CIDADE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_cidade IS null or (new.id_cidade = 0)  ) then
    new.id_cidade = gen_id (cod_up, 0) || gen_id (id_cidade, 1);

end
^

/* Trigger: CODIGO_PENAL_AD_SINCRONISMO */
CREATE TRIGGER CODIGO_PENAL_AD_SINCRONISMO FOR CODIGO_PENAL
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6730

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CODIGO_PENAL WHERE IDCODIGO_PENAL = '||OLD.IDCODIGO_PENAL||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CODIGO_PENAL_AI_SINCRONISMO */
CREATE TRIGGER CODIGO_PENAL_AI_SINCRONISMO FOR CODIGO_PENAL
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6730

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CODIGO_PENAL (IDCODIGO_PENAL,'
||' ARTIGO,'
||' DESCRICAO_ARTIGO) VALUES ('
||COALESCE(NEW.IDCODIGO_PENAL,'NULL')||','
||COALESCE(''''||NEW.ARTIGO||'''','NULL')||','
||COALESCE(''''||NEW.DESCRICAO_ARTIGO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CODIGO_PENAL_AU_SINCRONISMO */
CREATE TRIGGER CODIGO_PENAL_AU_SINCRONISMO FOR CODIGO_PENAL
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6730
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ARTIGO,'')<>COALESCE(OLD.ARTIGO,'')) THEN TXT=TXT||',ARTIGO = '||COALESCE(''''||NEW.ARTIGO||'''','NULL');
IF (COALESCE(NEW.DESCRICAO_ARTIGO,'')<>COALESCE(OLD.DESCRICAO_ARTIGO,'')) THEN TXT=TXT||',DESCRICAO_ARTIGO = '||COALESCE(''''||NEW.DESCRICAO_ARTIGO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CODIGO_PENAL SET IDCODIGO_PENAL = '''||NEW.IDCODIGO_PENAL||''''||TXT||' WHERE IDCODIGO_PENAL = '''||NEW.IDCODIGO_PENAL||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CODIGO_PENAL_BI0 */
CREATE TRIGGER CODIGO_PENAL_BI0 FOR CODIGO_PENAL
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (NEW.idcodigo_penal = 0 or (NEW.idcodigo_penal IS NULL) ) then
   NEW.idcodigo_penal = gen_id(IDCODIGO_PENAL,1);
end
^

/* Trigger: CONDENACAO_INTERNO_AD_SINCRONIS */
CREATE TRIGGER CONDENACAO_INTERNO_AD_SINCRONIS FOR CONDENACAO_INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.9070

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CONDENACAO_INTERNO WHERE IDCONDENACAO_INTERNO = '||OLD.IDCONDENACAO_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CONDENACAO_INTERNO_AI_SINCRONIS */
CREATE TRIGGER CONDENACAO_INTERNO_AI_SINCRONIS FOR CONDENACAO_INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.9070

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CONDENACAO_INTERNO (IDCONDENACAO_INTERNO,'
||' IDINTERNO,'
||' ARTIGO,'
||' OBSERVACAO,'
||' TOTAL_PENA_ANO,'
||' TOTAL_PENA_MES,'
||' TOTAL_PENA_DIA,'
||' IDCOMARCA,'
||' VARA,'
||' PRISAO,'
||' REU,'
||' NPROCESSO,'
||' GR,'
||' SITUACAOJURIDICA,'
||' TIPOJUSTICA) VALUES ('
||COALESCE(NEW.IDCONDENACAO_INTERNO,'NULL')||','
||COALESCE(NEW.IDINTERNO,'NULL')||','
||COALESCE(''''||NEW.ARTIGO||'''','NULL')||','
||COALESCE(''''||NEW.OBSERVACAO||'''','NULL')||','
||COALESCE(NEW.TOTAL_PENA_ANO,'NULL')||','
||COALESCE(NEW.TOTAL_PENA_MES,'NULL')||','
||COALESCE(NEW.TOTAL_PENA_DIA,'NULL')||','
||COALESCE(NEW.IDCOMARCA,'NULL')||','
||COALESCE(''''||NEW.VARA||'''','NULL')||','
||COALESCE(''''||NEW.PRISAO||'''','NULL')||','
||COALESCE(''''||NEW.REU||'''','NULL')||','
||COALESCE(''''||NEW.NPROCESSO||'''','NULL')||','
||COALESCE(''''||NEW.GR||'''','NULL')||','
||COALESCE(''''||NEW.SITUACAOJURIDICA||'''','NULL')||','
||COALESCE(''''||NEW.TIPOJUSTICA||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CONDENACAO_INTERNO_AU_SINCRONIS */
CREATE TRIGGER CONDENACAO_INTERNO_AU_SINCRONIS FOR CONDENACAO_INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.9070
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.IDINTERNO,'')<>COALESCE(OLD.IDINTERNO,'')) THEN TXT=TXT||',IDINTERNO = '||COALESCE(NEW.IDINTERNO,'NULL');
IF (COALESCE(NEW.ARTIGO,'')<>COALESCE(OLD.ARTIGO,'')) THEN TXT=TXT||',ARTIGO = '||COALESCE(''''||NEW.ARTIGO||'''','NULL');
IF (COALESCE(NEW.OBSERVACAO,'')<>COALESCE(OLD.OBSERVACAO,'')) THEN TXT=TXT||',OBSERVACAO = '||COALESCE(''''||NEW.OBSERVACAO||'''','NULL');
IF (COALESCE(NEW.TOTAL_PENA_ANO,'')<>COALESCE(OLD.TOTAL_PENA_ANO,'')) THEN TXT=TXT||',TOTAL_PENA_ANO = '||COALESCE(NEW.TOTAL_PENA_ANO,'NULL');
IF (COALESCE(NEW.TOTAL_PENA_MES,'')<>COALESCE(OLD.TOTAL_PENA_MES,'')) THEN TXT=TXT||',TOTAL_PENA_MES = '||COALESCE(NEW.TOTAL_PENA_MES,'NULL');
IF (COALESCE(NEW.TOTAL_PENA_DIA,'')<>COALESCE(OLD.TOTAL_PENA_DIA,'')) THEN TXT=TXT||',TOTAL_PENA_DIA = '||COALESCE(NEW.TOTAL_PENA_DIA,'NULL');
IF (COALESCE(NEW.IDCOMARCA,'')<>COALESCE(OLD.IDCOMARCA,'')) THEN TXT=TXT||',IDCOMARCA = '||COALESCE(NEW.IDCOMARCA,'NULL');
IF (COALESCE(NEW.VARA,'')<>COALESCE(OLD.VARA,'')) THEN TXT=TXT||',VARA = '||COALESCE(''''||NEW.VARA||'''','NULL');
IF (COALESCE(NEW.PRISAO,'')<>COALESCE(OLD.PRISAO,'')) THEN TXT=TXT||',PRISAO = '||COALESCE(''''||NEW.PRISAO||'''','NULL');
IF (COALESCE(NEW.REU,'')<>COALESCE(OLD.REU,'')) THEN TXT=TXT||',REU = '||COALESCE(''''||NEW.REU||'''','NULL');
IF (COALESCE(NEW.NPROCESSO,'')<>COALESCE(OLD.NPROCESSO,'')) THEN TXT=TXT||',NPROCESSO = '||COALESCE(''''||NEW.NPROCESSO||'''','NULL');
IF (COALESCE(NEW.GR,'')<>COALESCE(OLD.GR,'')) THEN TXT=TXT||',GR = '||COALESCE(''''||NEW.GR||'''','NULL');
IF (COALESCE(NEW.SITUACAOJURIDICA,'')<>COALESCE(OLD.SITUACAOJURIDICA,'')) THEN TXT=TXT||',SITUACAOJURIDICA = '||COALESCE(''''||NEW.SITUACAOJURIDICA||'''','NULL');
IF (COALESCE(NEW.TIPOJUSTICA,'')<>COALESCE(OLD.TIPOJUSTICA,'')) THEN TXT=TXT||',TIPOJUSTICA = '||COALESCE(''''||NEW.TIPOJUSTICA||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CONDENACAO_INTERNO SET IDCONDENACAO_INTERNO = '''||NEW.IDCONDENACAO_INTERNO||''''||TXT||' WHERE IDCONDENACAO_INTERNO = '''||NEW.IDCONDENACAO_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CONDICAO_INTERNO_AD_SINCRONISMO */
CREATE TRIGGER CONDICAO_INTERNO_AD_SINCRONISMO FOR CONDICAO_INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6730

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM CONDICAO_INTERNO WHERE IDCONDICAO_INTERNO = '||OLD.IDCONDICAO_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: CONDICAO_INTERNO_AI_SINCRONISMO */
CREATE TRIGGER CONDICAO_INTERNO_AI_SINCRONISMO FOR CONDICAO_INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6730

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO CONDICAO_INTERNO (IDCONDICAO_INTERNO,'
||' DESCRICAO) VALUES ('
||COALESCE(NEW.IDCONDICAO_INTERNO,'NULL')||','
||COALESCE(''''||NEW.DESCRICAO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: CONDICAO_INTERNO_AU_SINCRONISMO */
CREATE TRIGGER CONDICAO_INTERNO_AU_SINCRONISMO FOR CONDICAO_INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6730
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.DESCRICAO,'')<>COALESCE(OLD.DESCRICAO,'')) THEN TXT=TXT||',DESCRICAO = '||COALESCE(''''||NEW.DESCRICAO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE CONDICAO_INTERNO SET IDCONDICAO_INTERNO = '''||NEW.IDCONDICAO_INTERNO||''''||TXT||' WHERE IDCONDICAO_INTERNO = '''||NEW.IDCONDICAO_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: CONDICAO_INTERNO_BI0 */
CREATE TRIGGER CONDICAO_INTERNO_BI0 FOR CONDICAO_INTERNO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
 if (NEW.idcondicao_interno IS NULL or (NEW.idcondicao_interno = 0) ) then
    NEW.IDCONDICAO_INTERNO = GEN_ID(cod_up,0)||GEN_ID(IDCONDICAO_INTERNO,1);
end
^

/* Trigger: DESTINO_AD_SINCRONISMO */
CREATE TRIGGER DESTINO_AD_SINCRONISMO FOR DESTINO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM DESTINO WHERE ID_DESTINO = '||OLD.ID_DESTINO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: DESTINO_AI_SINCRONISMO */
CREATE TRIGGER DESTINO_AI_SINCRONISMO FOR DESTINO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO DESTINO (ID_DESTINO,'
||' DESTINO,'
||' CAPITAL) VALUES ('
||COALESCE(NEW.ID_DESTINO,'NULL')||','
||COALESCE(''''||NEW.DESTINO||'''','NULL')||','
||COALESCE(''''||NEW.CAPITAL||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: DESTINO_AU_SINCRONISMO */
CREATE TRIGGER DESTINO_AU_SINCRONISMO FOR DESTINO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.DESTINO,'')<>COALESCE(OLD.DESTINO,'')) THEN TXT=TXT||',DESTINO = '||COALESCE(''''||NEW.DESTINO||'''','NULL');
IF (COALESCE(NEW.CAPITAL,'')<>COALESCE(OLD.CAPITAL,'')) THEN TXT=TXT||',CAPITAL = '||COALESCE(''''||NEW.CAPITAL||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE DESTINO SET ID_DESTINO = '''||NEW.ID_DESTINO||''''||TXT||' WHERE ID_DESTINO = '''||NEW.ID_DESTINO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: DESTINO_BI0 */
CREATE TRIGGER DESTINO_BI0 FOR DESTINO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_destino IS null or (new.id_destino = 0)  ) then
    new.id_destino = gen_id (cod_up, 0) || gen_id (id_destino, 1);
end
^

/* Trigger: ESCOLARIDADE_AD_SINCRONISMO */
CREATE TRIGGER ESCOLARIDADE_AD_SINCRONISMO FOR ESCOLARIDADE
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM ESCOLARIDADE WHERE ID_ESCOLARIDADE = '||OLD.ID_ESCOLARIDADE||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: ESCOLARIDADE_AI_SINCRONISMO */
CREATE TRIGGER ESCOLARIDADE_AI_SINCRONISMO FOR ESCOLARIDADE
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO ESCOLARIDADE (ID_ESCOLARIDADE,'
||' ESCOLARIDADE) VALUES ('
||COALESCE(NEW.ID_ESCOLARIDADE,'NULL')||','
||COALESCE(''''||NEW.ESCOLARIDADE||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: ESCOLARIDADE_AU_SINCRONISMO */
CREATE TRIGGER ESCOLARIDADE_AU_SINCRONISMO FOR ESCOLARIDADE
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ESCOLARIDADE,'')<>COALESCE(OLD.ESCOLARIDADE,'')) THEN TXT=TXT||',ESCOLARIDADE = '||COALESCE(''''||NEW.ESCOLARIDADE||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE ESCOLARIDADE SET ID_ESCOLARIDADE = '''||NEW.ID_ESCOLARIDADE||''''||TXT||' WHERE ID_ESCOLARIDADE = '''||NEW.ID_ESCOLARIDADE||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: ESCOLARIDADE_BI0 */
CREATE TRIGGER ESCOLARIDADE_BI0 FOR ESCOLARIDADE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_escolaridade IS null or (new.id_escolaridade = 0)  ) then
    new.id_escolaridade = gen_id (cod_up, 0) || gen_id (id_escolaridade, 1);
end
^

/* Trigger: ESTADO_AD_SINCRONISMO */
CREATE TRIGGER ESTADO_AD_SINCRONISMO FOR ESTADO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM ESTADO WHERE ID_ESTADO = '||OLD.ID_ESTADO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: ESTADO_AI_SINCRONISMO */
CREATE TRIGGER ESTADO_AI_SINCRONISMO FOR ESTADO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO ESTADO (ID_ESTADO,'
||' ESTADO,'
||' UF) VALUES ('
||COALESCE(NEW.ID_ESTADO,'NULL')||','
||COALESCE(''''||NEW.ESTADO||'''','NULL')||','
||COALESCE(''''||NEW.UF||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: ESTADO_AU_SINCRONISMO */
CREATE TRIGGER ESTADO_AU_SINCRONISMO FOR ESTADO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.6890
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ESTADO,'')<>COALESCE(OLD.ESTADO,'')) THEN TXT=TXT||',ESTADO = '||COALESCE(''''||NEW.ESTADO||'''','NULL');
IF (COALESCE(NEW.UF,'')<>COALESCE(OLD.UF,'')) THEN TXT=TXT||',UF = '||COALESCE(''''||NEW.UF||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE ESTADO SET ID_ESTADO = '''||NEW.ID_ESTADO||''''||TXT||' WHERE ID_ESTADO = '''||NEW.ID_ESTADO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: ESTADO_BI0 */
CREATE TRIGGER ESTADO_BI0 FOR ESTADO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (NEW.id_estado is null or (new.id_estado = 0) ) then
    new.id_estado = gen_id(cod_up,0)||gen_id(id_estado,1);
end
^

/* Trigger: FUNCAO_FUNCIONARIO_AD_SINCRONIS */
CREATE TRIGGER FUNCAO_FUNCIONARIO_AD_SINCRONIS FOR FUNCAO_FUNCIONARIO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM FUNCAO_FUNCIONARIO WHERE ID_FUNCAO_FUNCIONARIO = '||OLD.ID_FUNCAO_FUNCIONARIO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: FUNCAO_FUNCIONARIO_AI_SINCRONIS */
CREATE TRIGGER FUNCAO_FUNCIONARIO_AI_SINCRONIS FOR FUNCAO_FUNCIONARIO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO FUNCAO_FUNCIONARIO (ID_FUNCAO_FUNCIONARIO,'
||' FUNCAO_FUNCIONARIO) VALUES ('
||COALESCE(NEW.ID_FUNCAO_FUNCIONARIO,'NULL')||','
||COALESCE(''''||NEW.FUNCAO_FUNCIONARIO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: FUNCAO_FUNCIONARIO_AU_SINCRONIS */
CREATE TRIGGER FUNCAO_FUNCIONARIO_AU_SINCRONIS FOR FUNCAO_FUNCIONARIO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.FUNCAO_FUNCIONARIO,'')<>COALESCE(OLD.FUNCAO_FUNCIONARIO,'')) THEN TXT=TXT||',FUNCAO_FUNCIONARIO = '||COALESCE(''''||NEW.FUNCAO_FUNCIONARIO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE FUNCAO_FUNCIONARIO SET ID_FUNCAO_FUNCIONARIO = '''||NEW.ID_FUNCAO_FUNCIONARIO||''''||TXT||' WHERE ID_FUNCAO_FUNCIONARIO = '''||NEW.ID_FUNCAO_FUNCIONARIO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: FUNCAO_FUNCIONARIO_BI0 */
CREATE TRIGGER FUNCAO_FUNCIONARIO_BI0 FOR FUNCAO_FUNCIONARIO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_funcao_funcionario IS null or (new.id_funcao_funcionario = 0)  ) then
    new.id_funcao_funcionario = gen_id (cod_up, 0) || gen_id (id_funcao_funcionario, 1);

end
^

/* Trigger: FUNCAO_INTERNO_AD_SINCRONISMO */
CREATE TRIGGER FUNCAO_INTERNO_AD_SINCRONISMO FOR FUNCAO_INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM FUNCAO_INTERNO WHERE ID_FUNCAO_INTERNO = '||OLD.ID_FUNCAO_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: FUNCAO_INTERNO_AI_SINCRONISMO */
CREATE TRIGGER FUNCAO_INTERNO_AI_SINCRONISMO FOR FUNCAO_INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO FUNCAO_INTERNO (ID_FUNCAO_INTERNO,'
||' FUNCAO_INTERNO) VALUES ('
||COALESCE(NEW.ID_FUNCAO_INTERNO,'NULL')||','
||COALESCE(''''||NEW.FUNCAO_INTERNO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: FUNCAO_INTERNO_AU_SINCRONISMO */
CREATE TRIGGER FUNCAO_INTERNO_AU_SINCRONISMO FOR FUNCAO_INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.FUNCAO_INTERNO,'')<>COALESCE(OLD.FUNCAO_INTERNO,'')) THEN TXT=TXT||',FUNCAO_INTERNO = '||COALESCE(''''||NEW.FUNCAO_INTERNO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE FUNCAO_INTERNO SET ID_FUNCAO_INTERNO = '''||NEW.ID_FUNCAO_INTERNO||''''||TXT||' WHERE ID_FUNCAO_INTERNO = '''||NEW.ID_FUNCAO_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: FUNCAO_INTERNO_BI0 */
CREATE TRIGGER FUNCAO_INTERNO_BI0 FOR FUNCAO_INTERNO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_funcao_interno IS null or (new.id_funcao_interno = 0)  ) then
    new.id_funcao_interno = gen_id (cod_up, 0) || gen_id (id_funcao_interno, 1);
end
^

/* Trigger: FUNCIONARIO_AD_SINCRONISMO */
CREATE TRIGGER FUNCIONARIO_AD_SINCRONISMO FOR FUNCIONARIO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM FUNCIONARIO WHERE ID_FUNCIONARIO = '||OLD.ID_FUNCIONARIO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: FUNCIONARIO_AI_SINCRONISMO */
CREATE TRIGGER FUNCIONARIO_AI_SINCRONISMO FOR FUNCIONARIO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO FUNCIONARIO (ID_FUNCIONARIO,'
||' NOME_FUNCIONARIO,'
||' MATRICULA,'
||' SENHA,'
||' CPF,'
||' ID_FUNCAO,'
||' LOGIN,'
||' ID_UP,'
||' PERMISSAO_CONFERE,'
||' PERMISSAO_VISITANTE,'
||' PERMISSAO_SETORTRABALHO,'
||' PERMISSAO_SETOREDUCACAO,'
||' CONFIGURACOES,'
||' FUNCAO_TEMP,'
||' FUNCAO,'
||' ADMISSAO,'
||' CLASSE,'
||' MAE,'
||' PAI,'
||' RG,'
||' ORGAOEMISSOR,'
||' FATORRH,'
||' ID_NATURALIDADE,'
||' DTNASCIMENTO,'
||' CARGO,'
||' AREA,'
||' IMPRIMIR,'
||' ENDERECO,'
||' BAIRRO,'
||' COMPLEMENTO,'
||' ID_CIDADE,'
||' CEP,'
||' FONE,'
||' CELULAR,'
||' EMAIL,'
||' NUMERO,'
||' DATA_LOTACAO,'
||' ESCOLARIDADE,'
||' SEXO,'
||' PLANTAO_EXPEDIENTE,'
||' NFUNCIONAL,'
||' PERMISSAO_CADASTRO,'
||' PERMISSAO_PSICOSSOCIAL,'
||' PERMISSAO_JURIDICA,'
||' PERMISSAO_DISCIPLINA) VALUES ('
||COALESCE(NEW.ID_FUNCIONARIO,'NULL')||','
||COALESCE(''''||NEW.NOME_FUNCIONARIO||'''','NULL')||','
||COALESCE(''''||NEW.MATRICULA||'''','NULL')||','
||COALESCE(''''||NEW.SENHA||'''','NULL')||','
||COALESCE(''''||NEW.CPF||'''','NULL')||','
||COALESCE(NEW.ID_FUNCAO,'NULL')||','
||COALESCE(''''||NEW.LOGIN||'''','NULL')||','
||COALESCE(NEW.ID_UP,'NULL')||','
||COALESCE(''''||NEW.PERMISSAO_CONFERE||'''','NULL')||','
||COALESCE(''''||NEW.PERMISSAO_VISITANTE||'''','NULL')||','
||COALESCE(''''||NEW.PERMISSAO_SETORTRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.PERMISSAO_SETOREDUCACAO||'''','NULL')||','
||COALESCE(''''||NEW.CONFIGURACOES||'''','NULL')||','
||COALESCE(''''||NEW.FUNCAO_TEMP||'''','NULL')||','
||COALESCE(''''||NEW.FUNCAO||'''','NULL')||','
||COALESCE(''''||NEW.ADMISSAO||'''','NULL')||','
||COALESCE(''''||NEW.CLASSE||'''','NULL')||','
||COALESCE(''''||NEW.MAE||'''','NULL')||','
||COALESCE(''''||NEW.PAI||'''','NULL')||','
||COALESCE(''''||NEW.RG||'''','NULL')||','
||COALESCE(''''||NEW.ORGAOEMISSOR||'''','NULL')||','
||COALESCE(''''||NEW.FATORRH||'''','NULL')||','
||COALESCE(NEW.ID_NATURALIDADE,'NULL')||','
||COALESCE(''''||NEW.DTNASCIMENTO||'''','NULL')||','
||COALESCE(''''||NEW.CARGO||'''','NULL')||','
||COALESCE(''''||NEW.AREA||'''','NULL')||','
||COALESCE(''''||NEW.IMPRIMIR||'''','NULL')||','
||COALESCE(''''||NEW.ENDERECO||'''','NULL')||','
||COALESCE(''''||NEW.BAIRRO||'''','NULL')||','
||COALESCE(''''||NEW.COMPLEMENTO||'''','NULL')||','
||COALESCE(NEW.ID_CIDADE,'NULL')||','
||COALESCE(''''||NEW.CEP||'''','NULL')||','
||COALESCE(''''||NEW.FONE||'''','NULL')||','
||COALESCE(''''||NEW.CELULAR||'''','NULL')||','
||COALESCE(''''||NEW.EMAIL||'''','NULL')||','
||COALESCE(''''||NEW.NUMERO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_LOTACAO||'''','NULL')||','
||COALESCE(''''||NEW.ESCOLARIDADE||'''','NULL')||','
||COALESCE(''''||NEW.SEXO||'''','NULL')||','
||COALESCE(''''||NEW.PLANTAO_EXPEDIENTE||'''','NULL')||','
||COALESCE(NEW.NFUNCIONAL,'NULL')||','
||COALESCE(''''||NEW.PERMISSAO_CADASTRO||'''','NULL')||','
||COALESCE(''''||NEW.PERMISSAO_PSICOSSOCIAL||'''','NULL')||','
||COALESCE(''''||NEW.PERMISSAO_JURIDICA||'''','NULL')||','
||COALESCE(''''||NEW.PERMISSAO_DISCIPLINA||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: FUNCIONARIO_AU_SINCRONISMO */
CREATE TRIGGER FUNCIONARIO_AU_SINCRONISMO FOR FUNCIONARIO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.NOME_FUNCIONARIO,'')<>COALESCE(OLD.NOME_FUNCIONARIO,'')) THEN TXT=TXT||',NOME_FUNCIONARIO = '||COALESCE(''''||NEW.NOME_FUNCIONARIO||'''','NULL');
IF (COALESCE(NEW.MATRICULA,'')<>COALESCE(OLD.MATRICULA,'')) THEN TXT=TXT||',MATRICULA = '||COALESCE(''''||NEW.MATRICULA||'''','NULL');
IF (COALESCE(NEW.SENHA,'')<>COALESCE(OLD.SENHA,'')) THEN TXT=TXT||',SENHA = '||COALESCE(''''||NEW.SENHA||'''','NULL');
IF (COALESCE(NEW.CPF,'')<>COALESCE(OLD.CPF,'')) THEN TXT=TXT||',CPF = '||COALESCE(''''||NEW.CPF||'''','NULL');
IF (COALESCE(NEW.ID_FUNCAO,'')<>COALESCE(OLD.ID_FUNCAO,'')) THEN TXT=TXT||',ID_FUNCAO = '||COALESCE(NEW.ID_FUNCAO,'NULL');
IF (COALESCE(NEW.LOGIN,'')<>COALESCE(OLD.LOGIN,'')) THEN TXT=TXT||',LOGIN = '||COALESCE(''''||NEW.LOGIN||'''','NULL');
IF (COALESCE(NEW.ID_UP,'')<>COALESCE(OLD.ID_UP,'')) THEN TXT=TXT||',ID_UP = '||COALESCE(NEW.ID_UP,'NULL');
IF (COALESCE(NEW.PERMISSAO_CONFERE,'')<>COALESCE(OLD.PERMISSAO_CONFERE,'')) THEN TXT=TXT||',PERMISSAO_CONFERE = '||COALESCE(''''||NEW.PERMISSAO_CONFERE||'''','NULL');
IF (COALESCE(NEW.PERMISSAO_VISITANTE,'')<>COALESCE(OLD.PERMISSAO_VISITANTE,'')) THEN TXT=TXT||',PERMISSAO_VISITANTE = '||COALESCE(''''||NEW.PERMISSAO_VISITANTE||'''','NULL');
IF (COALESCE(NEW.PERMISSAO_SETORTRABALHO,'')<>COALESCE(OLD.PERMISSAO_SETORTRABALHO,'')) THEN TXT=TXT||',PERMISSAO_SETORTRABALHO = '||COALESCE(''''||NEW.PERMISSAO_SETORTRABALHO||'''','NULL');
IF (COALESCE(NEW.PERMISSAO_SETOREDUCACAO,'')<>COALESCE(OLD.PERMISSAO_SETOREDUCACAO,'')) THEN TXT=TXT||',PERMISSAO_SETOREDUCACAO = '||COALESCE(''''||NEW.PERMISSAO_SETOREDUCACAO||'''','NULL');
IF (COALESCE(NEW.CONFIGURACOES,'')<>COALESCE(OLD.CONFIGURACOES,'')) THEN TXT=TXT||',CONFIGURACOES = '||COALESCE(''''||NEW.CONFIGURACOES||'''','NULL');
IF (COALESCE(NEW.FUNCAO_TEMP,'')<>COALESCE(OLD.FUNCAO_TEMP,'')) THEN TXT=TXT||',FUNCAO_TEMP = '||COALESCE(''''||NEW.FUNCAO_TEMP||'''','NULL');
IF (COALESCE(NEW.FUNCAO,'')<>COALESCE(OLD.FUNCAO,'')) THEN TXT=TXT||',FUNCAO = '||COALESCE(''''||NEW.FUNCAO||'''','NULL');
IF (COALESCE(NEW.ADMISSAO,'')<>COALESCE(OLD.ADMISSAO,'')) THEN TXT=TXT||',ADMISSAO = '||COALESCE(''''||NEW.ADMISSAO||'''','NULL');
IF (COALESCE(NEW.CLASSE,'')<>COALESCE(OLD.CLASSE,'')) THEN TXT=TXT||',CLASSE = '||COALESCE(''''||NEW.CLASSE||'''','NULL');
IF (COALESCE(NEW.MAE,'')<>COALESCE(OLD.MAE,'')) THEN TXT=TXT||',MAE = '||COALESCE(''''||NEW.MAE||'''','NULL');
IF (COALESCE(NEW.PAI,'')<>COALESCE(OLD.PAI,'')) THEN TXT=TXT||',PAI = '||COALESCE(''''||NEW.PAI||'''','NULL');
IF (COALESCE(NEW.RG,'')<>COALESCE(OLD.RG,'')) THEN TXT=TXT||',RG = '||COALESCE(''''||NEW.RG||'''','NULL');
IF (COALESCE(NEW.ORGAOEMISSOR,'')<>COALESCE(OLD.ORGAOEMISSOR,'')) THEN TXT=TXT||',ORGAOEMISSOR = '||COALESCE(''''||NEW.ORGAOEMISSOR||'''','NULL');
IF (COALESCE(NEW.FATORRH,'')<>COALESCE(OLD.FATORRH,'')) THEN TXT=TXT||',FATORRH = '||COALESCE(''''||NEW.FATORRH||'''','NULL');
IF (COALESCE(NEW.ID_NATURALIDADE,'')<>COALESCE(OLD.ID_NATURALIDADE,'')) THEN TXT=TXT||',ID_NATURALIDADE = '||COALESCE(NEW.ID_NATURALIDADE,'NULL');
IF (COALESCE(NEW.DTNASCIMENTO,'')<>COALESCE(OLD.DTNASCIMENTO,'')) THEN TXT=TXT||',DTNASCIMENTO = '||COALESCE(''''||NEW.DTNASCIMENTO||'''','NULL');
IF (COALESCE(NEW.CARGO,'')<>COALESCE(OLD.CARGO,'')) THEN TXT=TXT||',CARGO = '||COALESCE(''''||NEW.CARGO||'''','NULL');
IF (COALESCE(NEW.AREA,'')<>COALESCE(OLD.AREA,'')) THEN TXT=TXT||',AREA = '||COALESCE(''''||NEW.AREA||'''','NULL');
IF (COALESCE(NEW.IMPRIMIR,'')<>COALESCE(OLD.IMPRIMIR,'')) THEN TXT=TXT||',IMPRIMIR = '||COALESCE(''''||NEW.IMPRIMIR||'''','NULL');
IF (COALESCE(NEW.ENDERECO,'')<>COALESCE(OLD.ENDERECO,'')) THEN TXT=TXT||',ENDERECO = '||COALESCE(''''||NEW.ENDERECO||'''','NULL');
IF (COALESCE(NEW.BAIRRO,'')<>COALESCE(OLD.BAIRRO,'')) THEN TXT=TXT||',BAIRRO = '||COALESCE(''''||NEW.BAIRRO||'''','NULL');
IF (COALESCE(NEW.COMPLEMENTO,'')<>COALESCE(OLD.COMPLEMENTO,'')) THEN TXT=TXT||',COMPLEMENTO = '||COALESCE(''''||NEW.COMPLEMENTO||'''','NULL');
IF (COALESCE(NEW.ID_CIDADE,'')<>COALESCE(OLD.ID_CIDADE,'')) THEN TXT=TXT||',ID_CIDADE = '||COALESCE(NEW.ID_CIDADE,'NULL');
IF (COALESCE(NEW.CEP,'')<>COALESCE(OLD.CEP,'')) THEN TXT=TXT||',CEP = '||COALESCE(''''||NEW.CEP||'''','NULL');
IF (COALESCE(NEW.FONE,'')<>COALESCE(OLD.FONE,'')) THEN TXT=TXT||',FONE = '||COALESCE(''''||NEW.FONE||'''','NULL');
IF (COALESCE(NEW.CELULAR,'')<>COALESCE(OLD.CELULAR,'')) THEN TXT=TXT||',CELULAR = '||COALESCE(''''||NEW.CELULAR||'''','NULL');
IF (COALESCE(NEW.EMAIL,'')<>COALESCE(OLD.EMAIL,'')) THEN TXT=TXT||',EMAIL = '||COALESCE(''''||NEW.EMAIL||'''','NULL');
IF (COALESCE(NEW.NUMERO,'')<>COALESCE(OLD.NUMERO,'')) THEN TXT=TXT||',NUMERO = '||COALESCE(''''||NEW.NUMERO||'''','NULL');
IF (COALESCE(NEW.DATA_LOTACAO,'')<>COALESCE(OLD.DATA_LOTACAO,'')) THEN TXT=TXT||',DATA_LOTACAO = '||COALESCE(''''||NEW.DATA_LOTACAO||'''','NULL');
IF (COALESCE(NEW.ESCOLARIDADE,'')<>COALESCE(OLD.ESCOLARIDADE,'')) THEN TXT=TXT||',ESCOLARIDADE = '||COALESCE(''''||NEW.ESCOLARIDADE||'''','NULL');
IF (COALESCE(NEW.SEXO,'')<>COALESCE(OLD.SEXO,'')) THEN TXT=TXT||',SEXO = '||COALESCE(''''||NEW.SEXO||'''','NULL');
IF (COALESCE(NEW.PLANTAO_EXPEDIENTE,'')<>COALESCE(OLD.PLANTAO_EXPEDIENTE,'')) THEN TXT=TXT||',PLANTAO_EXPEDIENTE = '||COALESCE(''''||NEW.PLANTAO_EXPEDIENTE||'''','NULL');
IF (COALESCE(NEW.NFUNCIONAL,'')<>COALESCE(OLD.NFUNCIONAL,'')) THEN TXT=TXT||',NFUNCIONAL = '||COALESCE(NEW.NFUNCIONAL,'NULL');
IF (COALESCE(NEW.PERMISSAO_CADASTRO,'')<>COALESCE(OLD.PERMISSAO_CADASTRO,'')) THEN TXT=TXT||',PERMISSAO_CADASTRO = '||COALESCE(''''||NEW.PERMISSAO_CADASTRO||'''','NULL');
IF (COALESCE(NEW.PERMISSAO_PSICOSSOCIAL,'')<>COALESCE(OLD.PERMISSAO_PSICOSSOCIAL,'')) THEN TXT=TXT||',PERMISSAO_PSICOSSOCIAL = '||COALESCE(''''||NEW.PERMISSAO_PSICOSSOCIAL||'''','NULL');
IF (COALESCE(NEW.PERMISSAO_JURIDICA,'')<>COALESCE(OLD.PERMISSAO_JURIDICA,'')) THEN TXT=TXT||',PERMISSAO_JURIDICA = '||COALESCE(''''||NEW.PERMISSAO_JURIDICA||'''','NULL');
IF (COALESCE(NEW.PERMISSAO_DISCIPLINA,'')<>COALESCE(OLD.PERMISSAO_DISCIPLINA,'')) THEN TXT=TXT||',PERMISSAO_DISCIPLINA = '||COALESCE(''''||NEW.PERMISSAO_DISCIPLINA||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE FUNCIONARIO SET ID_FUNCIONARIO = '''||NEW.ID_FUNCIONARIO||''''||TXT||' WHERE ID_FUNCIONARIO = '''||NEW.ID_FUNCIONARIO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: FUNCIONARIO_BI0 */
CREATE TRIGGER FUNCIONARIO_BI0 FOR FUNCIONARIO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
  if (NEW.id_funcionario IS null or (new.id_funcionario = 0)  ) then
    new.id_funcionario = gen_id (cod_up, 0) || gen_id (id_funcionario, 1);
end
^

/* Trigger: FUNCIONARIO_IU_SINC_BLOB */
CREATE TRIGGER FUNCIONARIO_IU_SINC_BLOB FOR FUNCIONARIO
ACTIVE BEFORE INSERT OR UPDATE POSITION 999
AS
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7040
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_BLOB_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE
   DO
   BEGIN

    IF (INSERTING) THEN
    BEGIN
      
        IF (NEW.FOTO IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'FUNCIONARIO', 'FOTO', 'ID_FUNCIONARIO', NEW.ID_FUNCIONARIO);
        END

        IF (NEW.DIGITAL IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'FUNCIONARIO', 'DIGITAL', 'ID_FUNCIONARIO', NEW.ID_FUNCIONARIO);
        END

    END
    ELSE
    BEGIN
      
        IF (OLD.FOTO <> NEW.FOTO) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'FUNCIONARIO', 'FOTO', 'ID_FUNCIONARIO', NEW.ID_FUNCIONARIO);
        END

        IF (OLD.DIGITAL <> NEW.DIGITAL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'FUNCIONARIO', 'DIGITAL', 'ID_FUNCIONARIO', NEW.ID_FUNCIONARIO);
        END

    END

   END

END
^

/* Trigger: GALERIA_AD_SINCRONISMO */
CREATE TRIGGER GALERIA_AD_SINCRONISMO FOR GALERIA
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7200

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM GALERIA WHERE ID_GALERIA = '||OLD.ID_GALERIA||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: GALERIA_AI_SINCRONISMO */
CREATE TRIGGER GALERIA_AI_SINCRONISMO FOR GALERIA
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7200

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO GALERIA (ID_GALERIA,'
||' GALERIA,'
||' IDPAVILHAO) VALUES ('
||COALESCE(NEW.ID_GALERIA,'NULL')||','
||COALESCE(''''||NEW.GALERIA||'''','NULL')||','
||COALESCE(NEW.IDPAVILHAO,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: GALERIA_AU_SINCRONISMO */
CREATE TRIGGER GALERIA_AU_SINCRONISMO FOR GALERIA
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7200
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.GALERIA,'')<>COALESCE(OLD.GALERIA,'')) THEN TXT=TXT||',GALERIA = '||COALESCE(''''||NEW.GALERIA||'''','NULL');
IF (COALESCE(NEW.IDPAVILHAO,'')<>COALESCE(OLD.IDPAVILHAO,'')) THEN TXT=TXT||',IDPAVILHAO = '||COALESCE(NEW.IDPAVILHAO,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE GALERIA SET ID_GALERIA = '''||NEW.ID_GALERIA||''''||TXT||' WHERE ID_GALERIA = '''||NEW.ID_GALERIA||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: GALERIA_BI0 */
CREATE TRIGGER GALERIA_BI0 FOR GALERIA
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_galeria IS null or (new.id_galeria = 0)  ) then
    new.id_galeria = gen_id (cod_up, 0) || gen_id (id_galeria, 1);
end
^

/* Trigger: GRAU_PARENTESCO_AD_SINCRONISMO */
CREATE TRIGGER GRAU_PARENTESCO_AD_SINCRONISMO FOR GRAU_PARENTESCO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM GRAU_PARENTESCO WHERE ID_GRAU_PARENTESCO = '||OLD.ID_GRAU_PARENTESCO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: GRAU_PARENTESCO_AI_SINCRONISMO */
CREATE TRIGGER GRAU_PARENTESCO_AI_SINCRONISMO FOR GRAU_PARENTESCO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO GRAU_PARENTESCO (ID_GRAU_PARENTESCO,'
||' GRAU_PARENTESCO) VALUES ('
||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL')||','
||COALESCE(''''||NEW.GRAU_PARENTESCO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: GRAU_PARENTESCO_AU_SINCRONISMO */
CREATE TRIGGER GRAU_PARENTESCO_AU_SINCRONISMO FOR GRAU_PARENTESCO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.GRAU_PARENTESCO,'')<>COALESCE(OLD.GRAU_PARENTESCO,'')) THEN TXT=TXT||',GRAU_PARENTESCO = '||COALESCE(''''||NEW.GRAU_PARENTESCO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE GRAU_PARENTESCO SET ID_GRAU_PARENTESCO = '''||NEW.ID_GRAU_PARENTESCO||''''||TXT||' WHERE ID_GRAU_PARENTESCO = '''||NEW.ID_GRAU_PARENTESCO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: GRAU_PARENTESCO_BI0 */
CREATE TRIGGER GRAU_PARENTESCO_BI0 FOR GRAU_PARENTESCO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_grau_parentesco IS null or (new.id_grau_parentesco = 0)  ) then
    new.id_grau_parentesco = gen_id (cod_up, 0) || gen_id (id_grau_parentesco, 1);
end
^

/* Trigger: HISTORICO_ESTUDO_AD_SINCRONISMO */
CREATE TRIGGER HISTORICO_ESTUDO_AD_SINCRONISMO FOR HISTORICO_ESTUDO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM HISTORICO_ESTUDO WHERE ID_HISTORICO_ESTUDO = '||OLD.ID_HISTORICO_ESTUDO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: HISTORICO_ESTUDO_AI_SINCRONISMO */
CREATE TRIGGER HISTORICO_ESTUDO_AI_SINCRONISMO FOR HISTORICO_ESTUDO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO HISTORICO_ESTUDO (ID_HISTORICO_ESTUDO,'
||' DATA_HISTORICO,'
||' ID_INTERNO,'
||' HISTORICO) VALUES ('
||COALESCE(NEW.ID_HISTORICO_ESTUDO,'NULL')||','
||COALESCE(''''||NEW.DATA_HISTORICO||'''','NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.HISTORICO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: HISTORICO_ESTUDO_AU_SINCRONISMO */
CREATE TRIGGER HISTORICO_ESTUDO_AU_SINCRONISMO FOR HISTORICO_ESTUDO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.DATA_HISTORICO,'')<>COALESCE(OLD.DATA_HISTORICO,'')) THEN TXT=TXT||',DATA_HISTORICO = '||COALESCE(''''||NEW.DATA_HISTORICO||'''','NULL');
IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.HISTORICO,'')<>COALESCE(OLD.HISTORICO,'')) THEN TXT=TXT||',HISTORICO = '||COALESCE(''''||NEW.HISTORICO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE HISTORICO_ESTUDO SET ID_HISTORICO_ESTUDO = '''||NEW.ID_HISTORICO_ESTUDO||''''||TXT||' WHERE ID_HISTORICO_ESTUDO = '''||NEW.ID_HISTORICO_ESTUDO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: HISTORICO_ESTUDO_BI0 */
CREATE TRIGGER HISTORICO_ESTUDO_BI0 FOR HISTORICO_ESTUDO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_historico_estudo IS null or (new.id_historico_estudo = 0)  ) then
    new.id_historico_estudo = gen_id (cod_up, 0) || gen_id (idhistorico_estudo, 1);
end
^

/* Trigger: HISTORICO_INTERNO_AD_SINCRONISM */
CREATE TRIGGER HISTORICO_INTERNO_AD_SINCRONISM FOR HISTORICO_INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM HISTORICO_INTERNO WHERE IDHISTORICO_INTERNO = '||OLD.IDHISTORICO_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: HISTORICO_INTERNO_AI_SINCRONISM */
CREATE TRIGGER HISTORICO_INTERNO_AI_SINCRONISM FOR HISTORICO_INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO HISTORICO_INTERNO (IDHISTORICO_INTERNO,'
||' DESCRICAO,'
||' DATA_HORA,'
||' IDINTERNO,'
||' STATUS,'
||' MOTIVO_SAIDA,'
||' IDPROCEDENCIA,'
||' IDUP) VALUES ('
||COALESCE(NEW.IDHISTORICO_INTERNO,'NULL')||','
||COALESCE(''''||NEW.DESCRICAO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_HORA||'''','NULL')||','
||COALESCE(NEW.IDINTERNO,'NULL')||','
||COALESCE(''''||NEW.STATUS||'''','NULL')||','
||COALESCE(''''||NEW.MOTIVO_SAIDA||'''','NULL')||','
||COALESCE(NEW.IDPROCEDENCIA,'NULL')||','
||COALESCE(NEW.IDUP,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: HISTORICO_INTERNO_AU_SINCRONISM */
CREATE TRIGGER HISTORICO_INTERNO_AU_SINCRONISM FOR HISTORICO_INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7360
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.DESCRICAO,'')<>COALESCE(OLD.DESCRICAO,'')) THEN TXT=TXT||',DESCRICAO = '||COALESCE(''''||NEW.DESCRICAO||'''','NULL');
IF (COALESCE(NEW.DATA_HORA,'')<>COALESCE(OLD.DATA_HORA,'')) THEN TXT=TXT||',DATA_HORA = '||COALESCE(''''||NEW.DATA_HORA||'''','NULL');
IF (COALESCE(NEW.IDINTERNO,'')<>COALESCE(OLD.IDINTERNO,'')) THEN TXT=TXT||',IDINTERNO = '||COALESCE(NEW.IDINTERNO,'NULL');
IF (COALESCE(NEW.STATUS,'')<>COALESCE(OLD.STATUS,'')) THEN TXT=TXT||',STATUS = '||COALESCE(''''||NEW.STATUS||'''','NULL');
IF (COALESCE(NEW.MOTIVO_SAIDA,'')<>COALESCE(OLD.MOTIVO_SAIDA,'')) THEN TXT=TXT||',MOTIVO_SAIDA = '||COALESCE(''''||NEW.MOTIVO_SAIDA||'''','NULL');
IF (COALESCE(NEW.IDPROCEDENCIA,'')<>COALESCE(OLD.IDPROCEDENCIA,'')) THEN TXT=TXT||',IDPROCEDENCIA = '||COALESCE(NEW.IDPROCEDENCIA,'NULL');
IF (COALESCE(NEW.IDUP,'')<>COALESCE(OLD.IDUP,'')) THEN TXT=TXT||',IDUP = '||COALESCE(NEW.IDUP,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE HISTORICO_INTERNO SET IDHISTORICO_INTERNO = '''||NEW.IDHISTORICO_INTERNO||''''||TXT||' WHERE IDHISTORICO_INTERNO = '''||NEW.IDHISTORICO_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: HISTORICO_INTERNO_BI0 */
CREATE TRIGGER HISTORICO_INTERNO_BI0 FOR HISTORICO_INTERNO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (new.idhistorico_interno = 0 or (new.IDHISTORICO_INTERNO is null) ) then
    new.idhistorico_interno = gen_id(cod_up,0)||gen_id(IDHISTORICO_INTERNO,1);
end
^

/* Trigger: HISTORICO_INTERNO_BIU_LIMPA */
CREATE TRIGGER HISTORICO_INTERNO_BIU_LIMPA FOR HISTORICO_INTERNO
ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
begin
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.DESCRICAO) INTO NEW.DESCRICAO;

end
^

/* Trigger: HISTORICO_VISITANTE_AD_SINCRONI */
CREATE TRIGGER HISTORICO_VISITANTE_AD_SINCRONI FOR HISTORICO_VISITANTE
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM HISTORICO_VISITANTE WHERE ID_HISTORICO_VISITANTE = '||OLD.ID_HISTORICO_VISITANTE||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: HISTORICO_VISITANTE_AI_SINCRONI */
CREATE TRIGGER HISTORICO_VISITANTE_AI_SINCRONI FOR HISTORICO_VISITANTE
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO HISTORICO_VISITANTE (ID_HISTORICO_VISITANTE,'
||' ID_VISITANTE,'
||' NOME_VISITANTE,'
||' ID_GRAU_PARENTESCO,'
||' ID_INTERNO,'
||' NUMERO_CARTEIRINHA,'
||' CPF,'
||' RG,'
||' ORGAO_EXPEDIDOR,'
||' SEXO,'
||' DATA_VISITA,'
||' HORA_VISITA,'
||' ORDEM) VALUES ('
||COALESCE(NEW.ID_HISTORICO_VISITANTE,'NULL')||','
||COALESCE(NEW.ID_VISITANTE,'NULL')||','
||COALESCE(''''||NEW.NOME_VISITANTE||'''','NULL')||','
||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.NUMERO_CARTEIRINHA||'''','NULL')||','
||COALESCE(''''||NEW.CPF||'''','NULL')||','
||COALESCE(''''||NEW.RG||'''','NULL')||','
||COALESCE(''''||NEW.ORGAO_EXPEDIDOR||'''','NULL')||','
||COALESCE(''''||NEW.SEXO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_VISITA||'''','NULL')||','
||COALESCE(''''||NEW.HORA_VISITA||'''','NULL')||','
||COALESCE(NEW.ORDEM,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: HISTORICO_VISITANTE_AU_SINCRONI */
CREATE TRIGGER HISTORICO_VISITANTE_AU_SINCRONI FOR HISTORICO_VISITANTE
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_VISITANTE,'')<>COALESCE(OLD.ID_VISITANTE,'')) THEN TXT=TXT||',ID_VISITANTE = '||COALESCE(NEW.ID_VISITANTE,'NULL');
IF (COALESCE(NEW.NOME_VISITANTE,'')<>COALESCE(OLD.NOME_VISITANTE,'')) THEN TXT=TXT||',NOME_VISITANTE = '||COALESCE(''''||NEW.NOME_VISITANTE||'''','NULL');
IF (COALESCE(NEW.ID_GRAU_PARENTESCO,'')<>COALESCE(OLD.ID_GRAU_PARENTESCO,'')) THEN TXT=TXT||',ID_GRAU_PARENTESCO = '||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL');
IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.NUMERO_CARTEIRINHA,'')<>COALESCE(OLD.NUMERO_CARTEIRINHA,'')) THEN TXT=TXT||',NUMERO_CARTEIRINHA = '||COALESCE(''''||NEW.NUMERO_CARTEIRINHA||'''','NULL');
IF (COALESCE(NEW.CPF,'')<>COALESCE(OLD.CPF,'')) THEN TXT=TXT||',CPF = '||COALESCE(''''||NEW.CPF||'''','NULL');
IF (COALESCE(NEW.RG,'')<>COALESCE(OLD.RG,'')) THEN TXT=TXT||',RG = '||COALESCE(''''||NEW.RG||'''','NULL');
IF (COALESCE(NEW.ORGAO_EXPEDIDOR,'')<>COALESCE(OLD.ORGAO_EXPEDIDOR,'')) THEN TXT=TXT||',ORGAO_EXPEDIDOR = '||COALESCE(''''||NEW.ORGAO_EXPEDIDOR||'''','NULL');
IF (COALESCE(NEW.SEXO,'')<>COALESCE(OLD.SEXO,'')) THEN TXT=TXT||',SEXO = '||COALESCE(''''||NEW.SEXO||'''','NULL');
IF (COALESCE(NEW.DATA_VISITA,'')<>COALESCE(OLD.DATA_VISITA,'')) THEN TXT=TXT||',DATA_VISITA = '||COALESCE(''''||NEW.DATA_VISITA||'''','NULL');
IF (COALESCE(NEW.HORA_VISITA,'')<>COALESCE(OLD.HORA_VISITA,'')) THEN TXT=TXT||',HORA_VISITA = '||COALESCE(''''||NEW.HORA_VISITA||'''','NULL');
IF (COALESCE(NEW.ORDEM,'')<>COALESCE(OLD.ORDEM,'')) THEN TXT=TXT||',ORDEM = '||COALESCE(NEW.ORDEM,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE HISTORICO_VISITANTE SET ID_HISTORICO_VISITANTE = '''||NEW.ID_HISTORICO_VISITANTE||''''||TXT||' WHERE ID_HISTORICO_VISITANTE = '''||NEW.ID_HISTORICO_VISITANTE||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: HISTORICO_VISITANTE_BI0 */
CREATE TRIGGER HISTORICO_VISITANTE_BI0 FOR HISTORICO_VISITANTE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_historico_visitante IS null or (new.id_historico_visitante = 0)  ) then
    new.id_historico_visitante = gen_id (cod_up, 0) || gen_id (id_historico_visitante, 1);
end
^

/* Trigger: INTERNO_AD_SINCRONISMO */
CREATE TRIGGER INTERNO_AD_SINCRONISMO FOR INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM INTERNO WHERE ID_INTERNO = '||OLD.ID_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: INTERNO_AI_SINCRONISMO */
CREATE TRIGGER INTERNO_AI_SINCRONISMO FOR INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO INTERNO (ID_INTERNO,'
||' NOME_INTERNO,'
||' RGI,'
||' IDPROFISSAO,'
||' IDGALERIA,'
||' IDPAVILHAO,'
||' IDSOLARIO,'
||' IDCELA,'
||' DATA_ENTRADA,'
||' MAE,'
||' PAI,'
||' IDNATURALIDADE,'
||' IDNACIONALIDADE,'
||' IDRACA,'
||' IDESCOLARIDADE,'
||' ENDERECO,'
||' NUMERO,'
||' BAIRRO,'
||' COMPLEMENETO,'
||' CEP,'
||' IDCIDADE,'
||' FONE,'
||' CONTATO,'
||' RELIGIAO,'
||' IDADVOGADO,'
||' ID_PROCEDENCIA,'
||' CONDENACAO,'
||' DATA_PRISAO,'
||' HISTORICO,'
||' ST,'
||' SEXO,'
||' ID_UP,'
||' IDCONDICAO_INTERNO,'
||' IDDESTINO,'
||' ID_FUNCIONARIO,'
||' STATUS_ISOLAMENTO,'
||' IDSETOR_TRABALHO,'
||' DATA_SETOR,'
||' DATA_SAIDA,'
||' MOTIVO_SAIDA,'
||' ID_FUNCAOINTERNO,'
||' OBSTRABALHO,'
||' DATA_NASCIMENTO,'
||' RG,'
||' CPF,'
||' ESTADO_CIVIL,'
||' VULGO,'
||' OUTRO_NOME,'
||' SINAIS_PARTICULARES,'
||' ALTURA,'
||' PESO,'
||' CI,'
||' CISAIDA,'
||' ARTIGO,'
||' DATA_ISOLAMENTO,'
||' DATA_MATRICULA,'
||' OBSEDUCACAO,'
||' DEFICIENCIA,'
||' IDSERIEESTUDO,'
||' COR_OLHOS,'
||' COR_CABELOS,'
||' NOME_SOCIAL,'
||' ORIENTACAO_SEXUAL,'
||' IDENTIDADE_GENERO,'
||' HISTORICO_VELHO,'
||' TIPOPROCESSO,'
||' CONCEITO_DISCIPLINAR,'
||' TIPOCONDUTA,'
||' PERIODO,'
||' FAMILIARPRESO,'
||' PARENTESCOPRESO,'
||' UPFAMILIARPRESO,'
||' MOTIVODELITO,'
||' MAIORPERDA,'
||' PAISVIVOS,'
||' PAISSEPARADOS,'
||' IDADEPAISSEPARADOS,'
||' PROFISSAOPAIS,'
||' QUEMCRIOU,'
||' TRABALHOFAMILIA,'
||' QTDEIRMAOS,'
||' CRIADOIRMAOS,'
||' MORADIA,'
||' REPRESENTACAOPAIS,'
||' EDUCACAORECEBIDA,'
||' MUDANCAFAMILIA,'
||' FUGACASA,'
||' CONDICOESCRIACAO,'
||' INSTITUICAOASSISTENCIAL,'
||' VIOLENCIADOMESTICA,'
||' MORADIAANTESPRESO,'
||' RESIDENCIAFAMILIAR,'
||' QTDEFILHOS,'
||' FILHOSMENORES16,'
||' FILHOSVIVEM,'
||' FILHOADOCAO,'
||' PROVEDORFAMILIA,'
||' RENDIMENTOFAMILIAR,'
||' PROGRAMASOCIAL,'
||' AUXRECLUSAO,'
||' REPROVADOESCOLA,'
||' IDADETRABALHO,'
||' CURSOPROFISSIONALIZANTE,'
||' EXERCICIATRABALHO,'
||' REGISTROCARTEIRA,'
||' TRABALHOUPANTERIOR,'
||' DOCUMENTOS,'
||' USODROGAS,'
||' DATADEPENDENCIA,'
||' ABANDONODROGAS,'
||' DROGASCOMCRIME,'
||' DOENCAGRAVE,'
||' DOENCAMENTAL,'
||' PROBLEMASAUDE,'
||' DOENCALABORAL,'
||' VISITAOUTRAPESSOA,'
||' ESTUDOCUMPENA,'
||' TRABALHOCUMPENA,'
||' PROFISSAOCUMPENA,'
||' DATAPSICOSSOCIAL,'
||' IDTECNICO,'
||' OBSPSICOSSOCIAL,'
||' DATA_DELITO,'
||' DATA_REABILITACAO,'
||' MP,'
||' SUICIDIO,'
||' CID,'
||' EFEITOSDROGA,'
||' SINTOMASDEPRESSIVOS,'
||' EPISODIOSHUMOR,'
||' SINTOMASPSICOTICOS,'
||' DELIRIOS,'
||' ALUCINACOES,'
||' PERSONALIDADE,'
||' VISITANTES,'
||' MEDICACAOCONTROLADA,'
||' DOENCAINFECTOCONTAGIOSA,'
||' TRATAMENTOINFECTO,'
||' RESULTADOINFECTO,'
||' SITUACAOCIVIL,'
||' MEDIDASEGURANCA) VALUES ('
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.NOME_INTERNO||'''','NULL')||','
||COALESCE(''''||NEW.RGI||'''','NULL')||','
||COALESCE(NEW.IDPROFISSAO,'NULL')||','
||COALESCE(NEW.IDGALERIA,'NULL')||','
||COALESCE(NEW.IDPAVILHAO,'NULL')||','
||COALESCE(NEW.IDSOLARIO,'NULL')||','
||COALESCE(NEW.IDCELA,'NULL')||','
||COALESCE(''''||NEW.DATA_ENTRADA||'''','NULL')||','
||COALESCE(''''||NEW.MAE||'''','NULL')||','
||COALESCE(''''||NEW.PAI||'''','NULL')||','
||COALESCE(NEW.IDNATURALIDADE,'NULL')||','
||COALESCE(NEW.IDNACIONALIDADE,'NULL')||','
||COALESCE(NEW.IDRACA,'NULL')||','
||COALESCE(NEW.IDESCOLARIDADE,'NULL')||','
||COALESCE(''''||NEW.ENDERECO||'''','NULL')||','
||COALESCE(''''||NEW.NUMERO||'''','NULL')||','
||COALESCE(''''||NEW.BAIRRO||'''','NULL')||','
||COALESCE(''''||NEW.COMPLEMENETO||'''','NULL')||','
||COALESCE(''''||NEW.CEP||'''','NULL')||','
||COALESCE(NEW.IDCIDADE,'NULL')||','
||COALESCE(''''||NEW.FONE||'''','NULL')||','
||COALESCE(''''||NEW.CONTATO||'''','NULL')||','
||COALESCE(''''||NEW.RELIGIAO||'''','NULL')||','
||COALESCE(NEW.IDADVOGADO,'NULL')||','
||COALESCE(NEW.ID_PROCEDENCIA,'NULL')||','
||COALESCE(''''||NEW.CONDENACAO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_PRISAO||'''','NULL')||','
||COALESCE(''''||NEW.HISTORICO||'''','NULL')||','
||COALESCE(''''||NEW.ST||'''','NULL')||','
||COALESCE(''''||NEW.SEXO||'''','NULL')||','
||COALESCE(NEW.ID_UP,'NULL')||','
||COALESCE(NEW.IDCONDICAO_INTERNO,'NULL')||','
||COALESCE(NEW.IDDESTINO,'NULL')||','
||COALESCE(NEW.ID_FUNCIONARIO,'NULL')||','
||COALESCE(''''||NEW.STATUS_ISOLAMENTO||'''','NULL')||','
||COALESCE(NEW.IDSETOR_TRABALHO,'NULL')||','
||COALESCE(''''||NEW.DATA_SETOR||'''','NULL')||','
||COALESCE(''''||NEW.DATA_SAIDA||'''','NULL')||','
||COALESCE(''''||NEW.MOTIVO_SAIDA||'''','NULL')||','
||COALESCE(NEW.ID_FUNCAOINTERNO,'NULL')||','
||COALESCE(''''||NEW.OBSTRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_NASCIMENTO||'''','NULL')||','
||COALESCE(''''||NEW.RG||'''','NULL')||','
||COALESCE(''''||NEW.CPF||'''','NULL')||','
||COALESCE(''''||NEW.ESTADO_CIVIL||'''','NULL')||','
||COALESCE(''''||NEW.VULGO||'''','NULL')||','
||COALESCE(''''||NEW.OUTRO_NOME||'''','NULL')||','
||COALESCE(''''||NEW.SINAIS_PARTICULARES||'''','NULL')||','
||COALESCE(''''||NEW.ALTURA||'''','NULL')||','
||COALESCE(''''||NEW.PESO||'''','NULL')||','
||COALESCE(''''||NEW.CI||'''','NULL')||','
||COALESCE(''''||NEW.CISAIDA||'''','NULL')||','
||COALESCE(''''||NEW.ARTIGO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_ISOLAMENTO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_MATRICULA||'''','NULL')||','
||COALESCE(''''||NEW.OBSEDUCACAO||'''','NULL')||','
||COALESCE(''''||NEW.DEFICIENCIA||'''','NULL')||','
||COALESCE(NEW.IDSERIEESTUDO,'NULL')||','
||COALESCE(''''||NEW.COR_OLHOS||'''','NULL')||','
||COALESCE(''''||NEW.COR_CABELOS||'''','NULL')||','
||COALESCE(''''||NEW.NOME_SOCIAL||'''','NULL')||','
||COALESCE(''''||NEW.ORIENTACAO_SEXUAL||'''','NULL')||','
||COALESCE(''''||NEW.IDENTIDADE_GENERO||'''','NULL')||','
||COALESCE(''''||NEW.HISTORICO_VELHO||'''','NULL')||','
||COALESCE(''''||NEW.TIPOPROCESSO||'''','NULL')||','
||COALESCE(''''||NEW.CONCEITO_DISCIPLINAR||'''','NULL')||','
||COALESCE(''''||NEW.TIPOCONDUTA||'''','NULL')||','
||COALESCE(''''||NEW.PERIODO||'''','NULL')||','
||COALESCE(''''||NEW.FAMILIARPRESO||'''','NULL')||','
||COALESCE(''''||NEW.PARENTESCOPRESO||'''','NULL')||','
||COALESCE(''''||NEW.UPFAMILIARPRESO||'''','NULL')||','
||COALESCE(''''||NEW.MOTIVODELITO||'''','NULL')||','
||COALESCE(''''||NEW.MAIORPERDA||'''','NULL')||','
||COALESCE(''''||NEW.PAISVIVOS||'''','NULL')||','
||COALESCE(''''||NEW.PAISSEPARADOS||'''','NULL')||','
||COALESCE(''''||NEW.IDADEPAISSEPARADOS||'''','NULL')||','
||COALESCE(''''||NEW.PROFISSAOPAIS||'''','NULL')||','
||COALESCE(''''||NEW.QUEMCRIOU||'''','NULL')||','
||COALESCE(''''||NEW.TRABALHOFAMILIA||'''','NULL')||','
||COALESCE(''''||NEW.QTDEIRMAOS||'''','NULL')||','
||COALESCE(''''||NEW.CRIADOIRMAOS||'''','NULL')||','
||COALESCE(''''||NEW.MORADIA||'''','NULL')||','
||COALESCE(''''||NEW.REPRESENTACAOPAIS||'''','NULL')||','
||COALESCE(''''||NEW.EDUCACAORECEBIDA||'''','NULL')||','
||COALESCE(''''||NEW.MUDANCAFAMILIA||'''','NULL')||','
||COALESCE(''''||NEW.FUGACASA||'''','NULL')||','
||COALESCE(''''||NEW.CONDICOESCRIACAO||'''','NULL')||','
||COALESCE(''''||NEW.INSTITUICAOASSISTENCIAL||'''','NULL')||','
||COALESCE(''''||NEW.VIOLENCIADOMESTICA||'''','NULL')||','
||COALESCE(''''||NEW.MORADIAANTESPRESO||'''','NULL')||','
||COALESCE(''''||NEW.RESIDENCIAFAMILIAR||'''','NULL')||','
||COALESCE(''''||NEW.QTDEFILHOS||'''','NULL')||','
||COALESCE(''''||NEW.FILHOSMENORES16||'''','NULL')||','
||COALESCE(''''||NEW.FILHOSVIVEM||'''','NULL')||','
||COALESCE(''''||NEW.FILHOADOCAO||'''','NULL')||','
||COALESCE(''''||NEW.PROVEDORFAMILIA||'''','NULL')||','
||COALESCE(''''||NEW.RENDIMENTOFAMILIAR||'''','NULL')||','
||COALESCE(''''||NEW.PROGRAMASOCIAL||'''','NULL')||','
||COALESCE(''''||NEW.AUXRECLUSAO||'''','NULL')||','
||COALESCE(''''||NEW.REPROVADOESCOLA||'''','NULL')||','
||COALESCE(''''||NEW.IDADETRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.CURSOPROFISSIONALIZANTE||'''','NULL')||','
||COALESCE(''''||NEW.EXERCICIATRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.REGISTROCARTEIRA||'''','NULL')||','
||COALESCE(''''||NEW.TRABALHOUPANTERIOR||'''','NULL')||','
||COALESCE(''''||NEW.DOCUMENTOS||'''','NULL')||','
||COALESCE(''''||NEW.USODROGAS||'''','NULL')||','
||COALESCE(''''||NEW.DATADEPENDENCIA||'''','NULL')||','
||COALESCE(''''||NEW.ABANDONODROGAS||'''','NULL')||','
||COALESCE(''''||NEW.DROGASCOMCRIME||'''','NULL')||','
||COALESCE(''''||NEW.DOENCAGRAVE||'''','NULL')||','
||COALESCE(''''||NEW.DOENCAMENTAL||'''','NULL')||','
||COALESCE(''''||NEW.PROBLEMASAUDE||'''','NULL')||','
||COALESCE(''''||NEW.DOENCALABORAL||'''','NULL')||','
||COALESCE(''''||NEW.VISITAOUTRAPESSOA||'''','NULL')||','
||COALESCE(''''||NEW.ESTUDOCUMPENA||'''','NULL')||','
||COALESCE(''''||NEW.TRABALHOCUMPENA||'''','NULL')||','
||COALESCE(''''||NEW.PROFISSAOCUMPENA||'''','NULL')||','
||COALESCE(''''||NEW.DATAPSICOSSOCIAL||'''','NULL')||','
||COALESCE(NEW.IDTECNICO,'NULL')||','
||COALESCE(''''||NEW.OBSPSICOSSOCIAL||'''','NULL')||','
||COALESCE(''''||NEW.DATA_DELITO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_REABILITACAO||'''','NULL')||','
||COALESCE(NEW.MP,'NULL')||','
||COALESCE(''''||NEW.SUICIDIO||'''','NULL')||','
||COALESCE(''''||NEW.CID||'''','NULL')||','
||COALESCE(''''||NEW.EFEITOSDROGA||'''','NULL')||','
||COALESCE(''''||NEW.SINTOMASDEPRESSIVOS||'''','NULL')||','
||COALESCE(''''||NEW.EPISODIOSHUMOR||'''','NULL')||','
||COALESCE(''''||NEW.SINTOMASPSICOTICOS||'''','NULL')||','
||COALESCE(''''||NEW.DELIRIOS||'''','NULL')||','
||COALESCE(''''||NEW.ALUCINACOES||'''','NULL')||','
||COALESCE(''''||NEW.PERSONALIDADE||'''','NULL')||','
||COALESCE(''''||NEW.VISITANTES||'''','NULL')||','
||COALESCE(''''||NEW.MEDICACAOCONTROLADA||'''','NULL')||','
||COALESCE(''''||NEW.DOENCAINFECTOCONTAGIOSA||'''','NULL')||','
||COALESCE(''''||NEW.TRATAMENTOINFECTO||'''','NULL')||','
||COALESCE(''''||NEW.RESULTADOINFECTO||'''','NULL')||','
||COALESCE(''''||NEW.SITUACAOCIVIL||'''','NULL')||','
||COALESCE(''''||NEW.MEDIDASEGURANCA||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: INTERNO_AU_SINCRONISMO */
CREATE TRIGGER INTERNO_AU_SINCRONISMO FOR INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.NOME_INTERNO,'')<>COALESCE(OLD.NOME_INTERNO,'')) THEN TXT=TXT||',NOME_INTERNO = '||COALESCE(''''||NEW.NOME_INTERNO||'''','NULL');
IF (COALESCE(NEW.RGI,'')<>COALESCE(OLD.RGI,'')) THEN TXT=TXT||',RGI = '||COALESCE(''''||NEW.RGI||'''','NULL');
IF (COALESCE(NEW.IDPROFISSAO,'')<>COALESCE(OLD.IDPROFISSAO,'')) THEN TXT=TXT||',IDPROFISSAO = '||COALESCE(NEW.IDPROFISSAO,'NULL');
IF (COALESCE(NEW.IDGALERIA,'')<>COALESCE(OLD.IDGALERIA,'')) THEN TXT=TXT||',IDGALERIA = '||COALESCE(NEW.IDGALERIA,'NULL');
IF (COALESCE(NEW.IDPAVILHAO,'')<>COALESCE(OLD.IDPAVILHAO,'')) THEN TXT=TXT||',IDPAVILHAO = '||COALESCE(NEW.IDPAVILHAO,'NULL');
IF (COALESCE(NEW.IDSOLARIO,'')<>COALESCE(OLD.IDSOLARIO,'')) THEN TXT=TXT||',IDSOLARIO = '||COALESCE(NEW.IDSOLARIO,'NULL');
IF (COALESCE(NEW.IDCELA,'')<>COALESCE(OLD.IDCELA,'')) THEN TXT=TXT||',IDCELA = '||COALESCE(NEW.IDCELA,'NULL');
IF (COALESCE(NEW.DATA_ENTRADA,'')<>COALESCE(OLD.DATA_ENTRADA,'')) THEN TXT=TXT||',DATA_ENTRADA = '||COALESCE(''''||NEW.DATA_ENTRADA||'''','NULL');
IF (COALESCE(NEW.MAE,'')<>COALESCE(OLD.MAE,'')) THEN TXT=TXT||',MAE = '||COALESCE(''''||NEW.MAE||'''','NULL');
IF (COALESCE(NEW.PAI,'')<>COALESCE(OLD.PAI,'')) THEN TXT=TXT||',PAI = '||COALESCE(''''||NEW.PAI||'''','NULL');
IF (COALESCE(NEW.IDNATURALIDADE,'')<>COALESCE(OLD.IDNATURALIDADE,'')) THEN TXT=TXT||',IDNATURALIDADE = '||COALESCE(NEW.IDNATURALIDADE,'NULL');
IF (COALESCE(NEW.IDNACIONALIDADE,'')<>COALESCE(OLD.IDNACIONALIDADE,'')) THEN TXT=TXT||',IDNACIONALIDADE = '||COALESCE(NEW.IDNACIONALIDADE,'NULL');
IF (COALESCE(NEW.IDRACA,'')<>COALESCE(OLD.IDRACA,'')) THEN TXT=TXT||',IDRACA = '||COALESCE(NEW.IDRACA,'NULL');
IF (COALESCE(NEW.IDESCOLARIDADE,'')<>COALESCE(OLD.IDESCOLARIDADE,'')) THEN TXT=TXT||',IDESCOLARIDADE = '||COALESCE(NEW.IDESCOLARIDADE,'NULL');
IF (COALESCE(NEW.ENDERECO,'')<>COALESCE(OLD.ENDERECO,'')) THEN TXT=TXT||',ENDERECO = '||COALESCE(''''||NEW.ENDERECO||'''','NULL');
IF (COALESCE(NEW.NUMERO,'')<>COALESCE(OLD.NUMERO,'')) THEN TXT=TXT||',NUMERO = '||COALESCE(''''||NEW.NUMERO||'''','NULL');
IF (COALESCE(NEW.BAIRRO,'')<>COALESCE(OLD.BAIRRO,'')) THEN TXT=TXT||',BAIRRO = '||COALESCE(''''||NEW.BAIRRO||'''','NULL');
IF (COALESCE(NEW.COMPLEMENETO,'')<>COALESCE(OLD.COMPLEMENETO,'')) THEN TXT=TXT||',COMPLEMENETO = '||COALESCE(''''||NEW.COMPLEMENETO||'''','NULL');
IF (COALESCE(NEW.CEP,'')<>COALESCE(OLD.CEP,'')) THEN TXT=TXT||',CEP = '||COALESCE(''''||NEW.CEP||'''','NULL');
IF (COALESCE(NEW.IDCIDADE,'')<>COALESCE(OLD.IDCIDADE,'')) THEN TXT=TXT||',IDCIDADE = '||COALESCE(NEW.IDCIDADE,'NULL');
IF (COALESCE(NEW.FONE,'')<>COALESCE(OLD.FONE,'')) THEN TXT=TXT||',FONE = '||COALESCE(''''||NEW.FONE||'''','NULL');
IF (COALESCE(NEW.CONTATO,'')<>COALESCE(OLD.CONTATO,'')) THEN TXT=TXT||',CONTATO = '||COALESCE(''''||NEW.CONTATO||'''','NULL');
IF (COALESCE(NEW.RELIGIAO,'')<>COALESCE(OLD.RELIGIAO,'')) THEN TXT=TXT||',RELIGIAO = '||COALESCE(''''||NEW.RELIGIAO||'''','NULL');
IF (COALESCE(NEW.IDADVOGADO,'')<>COALESCE(OLD.IDADVOGADO,'')) THEN TXT=TXT||',IDADVOGADO = '||COALESCE(NEW.IDADVOGADO,'NULL');
IF (COALESCE(NEW.ID_PROCEDENCIA,'')<>COALESCE(OLD.ID_PROCEDENCIA,'')) THEN TXT=TXT||',ID_PROCEDENCIA = '||COALESCE(NEW.ID_PROCEDENCIA,'NULL');
IF (COALESCE(NEW.CONDENACAO,'')<>COALESCE(OLD.CONDENACAO,'')) THEN TXT=TXT||',CONDENACAO = '||COALESCE(''''||NEW.CONDENACAO||'''','NULL');
IF (COALESCE(NEW.DATA_PRISAO,'')<>COALESCE(OLD.DATA_PRISAO,'')) THEN TXT=TXT||',DATA_PRISAO = '||COALESCE(''''||NEW.DATA_PRISAO||'''','NULL');
IF (COALESCE(NEW.HISTORICO,'')<>COALESCE(OLD.HISTORICO,'')) THEN TXT=TXT||',HISTORICO = '||COALESCE(''''||NEW.HISTORICO||'''','NULL');
IF (COALESCE(NEW.ST,'')<>COALESCE(OLD.ST,'')) THEN TXT=TXT||',ST = '||COALESCE(''''||NEW.ST||'''','NULL');
IF (COALESCE(NEW.SEXO,'')<>COALESCE(OLD.SEXO,'')) THEN TXT=TXT||',SEXO = '||COALESCE(''''||NEW.SEXO||'''','NULL');
IF (COALESCE(NEW.ID_UP,'')<>COALESCE(OLD.ID_UP,'')) THEN TXT=TXT||',ID_UP = '||COALESCE(NEW.ID_UP,'NULL');
IF (COALESCE(NEW.IDCONDICAO_INTERNO,'')<>COALESCE(OLD.IDCONDICAO_INTERNO,'')) THEN TXT=TXT||',IDCONDICAO_INTERNO = '||COALESCE(NEW.IDCONDICAO_INTERNO,'NULL');
IF (COALESCE(NEW.IDDESTINO,'')<>COALESCE(OLD.IDDESTINO,'')) THEN TXT=TXT||',IDDESTINO = '||COALESCE(NEW.IDDESTINO,'NULL');
IF (COALESCE(NEW.ID_FUNCIONARIO,'')<>COALESCE(OLD.ID_FUNCIONARIO,'')) THEN TXT=TXT||',ID_FUNCIONARIO = '||COALESCE(NEW.ID_FUNCIONARIO,'NULL');
IF (COALESCE(NEW.STATUS_ISOLAMENTO,'')<>COALESCE(OLD.STATUS_ISOLAMENTO,'')) THEN TXT=TXT||',STATUS_ISOLAMENTO = '||COALESCE(''''||NEW.STATUS_ISOLAMENTO||'''','NULL');
IF (COALESCE(NEW.IDSETOR_TRABALHO,'')<>COALESCE(OLD.IDSETOR_TRABALHO,'')) THEN TXT=TXT||',IDSETOR_TRABALHO = '||COALESCE(NEW.IDSETOR_TRABALHO,'NULL');
IF (COALESCE(NEW.DATA_SETOR,'')<>COALESCE(OLD.DATA_SETOR,'')) THEN TXT=TXT||',DATA_SETOR = '||COALESCE(''''||NEW.DATA_SETOR||'''','NULL');
IF (COALESCE(NEW.DATA_SAIDA,'')<>COALESCE(OLD.DATA_SAIDA,'')) THEN TXT=TXT||',DATA_SAIDA = '||COALESCE(''''||NEW.DATA_SAIDA||'''','NULL');
IF (COALESCE(NEW.MOTIVO_SAIDA,'')<>COALESCE(OLD.MOTIVO_SAIDA,'')) THEN TXT=TXT||',MOTIVO_SAIDA = '||COALESCE(''''||NEW.MOTIVO_SAIDA||'''','NULL');
IF (COALESCE(NEW.ID_FUNCAOINTERNO,'')<>COALESCE(OLD.ID_FUNCAOINTERNO,'')) THEN TXT=TXT||',ID_FUNCAOINTERNO = '||COALESCE(NEW.ID_FUNCAOINTERNO,'NULL');
IF (COALESCE(NEW.OBSTRABALHO,'')<>COALESCE(OLD.OBSTRABALHO,'')) THEN TXT=TXT||',OBSTRABALHO = '||COALESCE(''''||NEW.OBSTRABALHO||'''','NULL');
IF (COALESCE(NEW.DATA_NASCIMENTO,'')<>COALESCE(OLD.DATA_NASCIMENTO,'')) THEN TXT=TXT||',DATA_NASCIMENTO = '||COALESCE(''''||NEW.DATA_NASCIMENTO||'''','NULL');
IF (COALESCE(NEW.RG,'')<>COALESCE(OLD.RG,'')) THEN TXT=TXT||',RG = '||COALESCE(''''||NEW.RG||'''','NULL');
IF (COALESCE(NEW.CPF,'')<>COALESCE(OLD.CPF,'')) THEN TXT=TXT||',CPF = '||COALESCE(''''||NEW.CPF||'''','NULL');
IF (COALESCE(NEW.ESTADO_CIVIL,'')<>COALESCE(OLD.ESTADO_CIVIL,'')) THEN TXT=TXT||',ESTADO_CIVIL = '||COALESCE(''''||NEW.ESTADO_CIVIL||'''','NULL');
IF (COALESCE(NEW.VULGO,'')<>COALESCE(OLD.VULGO,'')) THEN TXT=TXT||',VULGO = '||COALESCE(''''||NEW.VULGO||'''','NULL');
IF (COALESCE(NEW.OUTRO_NOME,'')<>COALESCE(OLD.OUTRO_NOME,'')) THEN TXT=TXT||',OUTRO_NOME = '||COALESCE(''''||NEW.OUTRO_NOME||'''','NULL');
IF (COALESCE(NEW.SINAIS_PARTICULARES,'')<>COALESCE(OLD.SINAIS_PARTICULARES,'')) THEN TXT=TXT||',SINAIS_PARTICULARES = '||COALESCE(''''||NEW.SINAIS_PARTICULARES||'''','NULL');
IF (COALESCE(NEW.ALTURA,'')<>COALESCE(OLD.ALTURA,'')) THEN TXT=TXT||',ALTURA = '||COALESCE(''''||NEW.ALTURA||'''','NULL');
IF (COALESCE(NEW.PESO,'')<>COALESCE(OLD.PESO,'')) THEN TXT=TXT||',PESO = '||COALESCE(''''||NEW.PESO||'''','NULL');
IF (COALESCE(NEW.CI,'')<>COALESCE(OLD.CI,'')) THEN TXT=TXT||',CI = '||COALESCE(''''||NEW.CI||'''','NULL');
IF (COALESCE(NEW.CISAIDA,'')<>COALESCE(OLD.CISAIDA,'')) THEN TXT=TXT||',CISAIDA = '||COALESCE(''''||NEW.CISAIDA||'''','NULL');
IF (COALESCE(NEW.ARTIGO,'')<>COALESCE(OLD.ARTIGO,'')) THEN TXT=TXT||',ARTIGO = '||COALESCE(''''||NEW.ARTIGO||'''','NULL');
IF (COALESCE(NEW.DATA_ISOLAMENTO,'')<>COALESCE(OLD.DATA_ISOLAMENTO,'')) THEN TXT=TXT||',DATA_ISOLAMENTO = '||COALESCE(''''||NEW.DATA_ISOLAMENTO||'''','NULL');
IF (COALESCE(NEW.DATA_MATRICULA,'')<>COALESCE(OLD.DATA_MATRICULA,'')) THEN TXT=TXT||',DATA_MATRICULA = '||COALESCE(''''||NEW.DATA_MATRICULA||'''','NULL');
IF (COALESCE(NEW.OBSEDUCACAO,'')<>COALESCE(OLD.OBSEDUCACAO,'')) THEN TXT=TXT||',OBSEDUCACAO = '||COALESCE(''''||NEW.OBSEDUCACAO||'''','NULL');
IF (COALESCE(NEW.DEFICIENCIA,'')<>COALESCE(OLD.DEFICIENCIA,'')) THEN TXT=TXT||',DEFICIENCIA = '||COALESCE(''''||NEW.DEFICIENCIA||'''','NULL');
IF (COALESCE(NEW.IDSERIEESTUDO,'')<>COALESCE(OLD.IDSERIEESTUDO,'')) THEN TXT=TXT||',IDSERIEESTUDO = '||COALESCE(NEW.IDSERIEESTUDO,'NULL');
IF (COALESCE(NEW.COR_OLHOS,'')<>COALESCE(OLD.COR_OLHOS,'')) THEN TXT=TXT||',COR_OLHOS = '||COALESCE(''''||NEW.COR_OLHOS||'''','NULL');
IF (COALESCE(NEW.COR_CABELOS,'')<>COALESCE(OLD.COR_CABELOS,'')) THEN TXT=TXT||',COR_CABELOS = '||COALESCE(''''||NEW.COR_CABELOS||'''','NULL');
IF (COALESCE(NEW.NOME_SOCIAL,'')<>COALESCE(OLD.NOME_SOCIAL,'')) THEN TXT=TXT||',NOME_SOCIAL = '||COALESCE(''''||NEW.NOME_SOCIAL||'''','NULL');
IF (COALESCE(NEW.ORIENTACAO_SEXUAL,'')<>COALESCE(OLD.ORIENTACAO_SEXUAL,'')) THEN TXT=TXT||',ORIENTACAO_SEXUAL = '||COALESCE(''''||NEW.ORIENTACAO_SEXUAL||'''','NULL');
IF (COALESCE(NEW.IDENTIDADE_GENERO,'')<>COALESCE(OLD.IDENTIDADE_GENERO,'')) THEN TXT=TXT||',IDENTIDADE_GENERO = '||COALESCE(''''||NEW.IDENTIDADE_GENERO||'''','NULL');
IF (COALESCE(NEW.HISTORICO_VELHO,'')<>COALESCE(OLD.HISTORICO_VELHO,'')) THEN TXT=TXT||',HISTORICO_VELHO = '||COALESCE(''''||NEW.HISTORICO_VELHO||'''','NULL');
IF (COALESCE(NEW.TIPOPROCESSO,'')<>COALESCE(OLD.TIPOPROCESSO,'')) THEN TXT=TXT||',TIPOPROCESSO = '||COALESCE(''''||NEW.TIPOPROCESSO||'''','NULL');
IF (COALESCE(NEW.CONCEITO_DISCIPLINAR,'')<>COALESCE(OLD.CONCEITO_DISCIPLINAR,'')) THEN TXT=TXT||',CONCEITO_DISCIPLINAR = '||COALESCE(''''||NEW.CONCEITO_DISCIPLINAR||'''','NULL');
IF (COALESCE(NEW.TIPOCONDUTA,'')<>COALESCE(OLD.TIPOCONDUTA,'')) THEN TXT=TXT||',TIPOCONDUTA = '||COALESCE(''''||NEW.TIPOCONDUTA||'''','NULL');
IF (COALESCE(NEW.PERIODO,'')<>COALESCE(OLD.PERIODO,'')) THEN TXT=TXT||',PERIODO = '||COALESCE(''''||NEW.PERIODO||'''','NULL');
IF (COALESCE(NEW.FAMILIARPRESO,'')<>COALESCE(OLD.FAMILIARPRESO,'')) THEN TXT=TXT||',FAMILIARPRESO = '||COALESCE(''''||NEW.FAMILIARPRESO||'''','NULL');
IF (COALESCE(NEW.PARENTESCOPRESO,'')<>COALESCE(OLD.PARENTESCOPRESO,'')) THEN TXT=TXT||',PARENTESCOPRESO = '||COALESCE(''''||NEW.PARENTESCOPRESO||'''','NULL');
IF (COALESCE(NEW.UPFAMILIARPRESO,'')<>COALESCE(OLD.UPFAMILIARPRESO,'')) THEN TXT=TXT||',UPFAMILIARPRESO = '||COALESCE(''''||NEW.UPFAMILIARPRESO||'''','NULL');
IF (COALESCE(NEW.MOTIVODELITO,'')<>COALESCE(OLD.MOTIVODELITO,'')) THEN TXT=TXT||',MOTIVODELITO = '||COALESCE(''''||NEW.MOTIVODELITO||'''','NULL');
IF (COALESCE(NEW.MAIORPERDA,'')<>COALESCE(OLD.MAIORPERDA,'')) THEN TXT=TXT||',MAIORPERDA = '||COALESCE(''''||NEW.MAIORPERDA||'''','NULL');
IF (COALESCE(NEW.PAISVIVOS,'')<>COALESCE(OLD.PAISVIVOS,'')) THEN TXT=TXT||',PAISVIVOS = '||COALESCE(''''||NEW.PAISVIVOS||'''','NULL');
IF (COALESCE(NEW.PAISSEPARADOS,'')<>COALESCE(OLD.PAISSEPARADOS,'')) THEN TXT=TXT||',PAISSEPARADOS = '||COALESCE(''''||NEW.PAISSEPARADOS||'''','NULL');
IF (COALESCE(NEW.IDADEPAISSEPARADOS,'')<>COALESCE(OLD.IDADEPAISSEPARADOS,'')) THEN TXT=TXT||',IDADEPAISSEPARADOS = '||COALESCE(''''||NEW.IDADEPAISSEPARADOS||'''','NULL');
IF (COALESCE(NEW.PROFISSAOPAIS,'')<>COALESCE(OLD.PROFISSAOPAIS,'')) THEN TXT=TXT||',PROFISSAOPAIS = '||COALESCE(''''||NEW.PROFISSAOPAIS||'''','NULL');
IF (COALESCE(NEW.QUEMCRIOU,'')<>COALESCE(OLD.QUEMCRIOU,'')) THEN TXT=TXT||',QUEMCRIOU = '||COALESCE(''''||NEW.QUEMCRIOU||'''','NULL');
IF (COALESCE(NEW.TRABALHOFAMILIA,'')<>COALESCE(OLD.TRABALHOFAMILIA,'')) THEN TXT=TXT||',TRABALHOFAMILIA = '||COALESCE(''''||NEW.TRABALHOFAMILIA||'''','NULL');
IF (COALESCE(NEW.QTDEIRMAOS,'')<>COALESCE(OLD.QTDEIRMAOS,'')) THEN TXT=TXT||',QTDEIRMAOS = '||COALESCE(''''||NEW.QTDEIRMAOS||'''','NULL');
IF (COALESCE(NEW.CRIADOIRMAOS,'')<>COALESCE(OLD.CRIADOIRMAOS,'')) THEN TXT=TXT||',CRIADOIRMAOS = '||COALESCE(''''||NEW.CRIADOIRMAOS||'''','NULL');
IF (COALESCE(NEW.MORADIA,'')<>COALESCE(OLD.MORADIA,'')) THEN TXT=TXT||',MORADIA = '||COALESCE(''''||NEW.MORADIA||'''','NULL');
IF (COALESCE(NEW.REPRESENTACAOPAIS,'')<>COALESCE(OLD.REPRESENTACAOPAIS,'')) THEN TXT=TXT||',REPRESENTACAOPAIS = '||COALESCE(''''||NEW.REPRESENTACAOPAIS||'''','NULL');
IF (COALESCE(NEW.EDUCACAORECEBIDA,'')<>COALESCE(OLD.EDUCACAORECEBIDA,'')) THEN TXT=TXT||',EDUCACAORECEBIDA = '||COALESCE(''''||NEW.EDUCACAORECEBIDA||'''','NULL');
IF (COALESCE(NEW.MUDANCAFAMILIA,'')<>COALESCE(OLD.MUDANCAFAMILIA,'')) THEN TXT=TXT||',MUDANCAFAMILIA = '||COALESCE(''''||NEW.MUDANCAFAMILIA||'''','NULL');
IF (COALESCE(NEW.FUGACASA,'')<>COALESCE(OLD.FUGACASA,'')) THEN TXT=TXT||',FUGACASA = '||COALESCE(''''||NEW.FUGACASA||'''','NULL');
IF (COALESCE(NEW.CONDICOESCRIACAO,'')<>COALESCE(OLD.CONDICOESCRIACAO,'')) THEN TXT=TXT||',CONDICOESCRIACAO = '||COALESCE(''''||NEW.CONDICOESCRIACAO||'''','NULL');
IF (COALESCE(NEW.INSTITUICAOASSISTENCIAL,'')<>COALESCE(OLD.INSTITUICAOASSISTENCIAL,'')) THEN TXT=TXT||',INSTITUICAOASSISTENCIAL = '||COALESCE(''''||NEW.INSTITUICAOASSISTENCIAL||'''','NULL');
IF (COALESCE(NEW.VIOLENCIADOMESTICA,'')<>COALESCE(OLD.VIOLENCIADOMESTICA,'')) THEN TXT=TXT||',VIOLENCIADOMESTICA = '||COALESCE(''''||NEW.VIOLENCIADOMESTICA||'''','NULL');
IF (COALESCE(NEW.MORADIAANTESPRESO,'')<>COALESCE(OLD.MORADIAANTESPRESO,'')) THEN TXT=TXT||',MORADIAANTESPRESO = '||COALESCE(''''||NEW.MORADIAANTESPRESO||'''','NULL');
IF (COALESCE(NEW.RESIDENCIAFAMILIAR,'')<>COALESCE(OLD.RESIDENCIAFAMILIAR,'')) THEN TXT=TXT||',RESIDENCIAFAMILIAR = '||COALESCE(''''||NEW.RESIDENCIAFAMILIAR||'''','NULL');
IF (COALESCE(NEW.QTDEFILHOS,'')<>COALESCE(OLD.QTDEFILHOS,'')) THEN TXT=TXT||',QTDEFILHOS = '||COALESCE(''''||NEW.QTDEFILHOS||'''','NULL');
IF (COALESCE(NEW.FILHOSMENORES16,'')<>COALESCE(OLD.FILHOSMENORES16,'')) THEN TXT=TXT||',FILHOSMENORES16 = '||COALESCE(''''||NEW.FILHOSMENORES16||'''','NULL');
IF (COALESCE(NEW.FILHOSVIVEM,'')<>COALESCE(OLD.FILHOSVIVEM,'')) THEN TXT=TXT||',FILHOSVIVEM = '||COALESCE(''''||NEW.FILHOSVIVEM||'''','NULL');
IF (COALESCE(NEW.FILHOADOCAO,'')<>COALESCE(OLD.FILHOADOCAO,'')) THEN TXT=TXT||',FILHOADOCAO = '||COALESCE(''''||NEW.FILHOADOCAO||'''','NULL');
IF (COALESCE(NEW.PROVEDORFAMILIA,'')<>COALESCE(OLD.PROVEDORFAMILIA,'')) THEN TXT=TXT||',PROVEDORFAMILIA = '||COALESCE(''''||NEW.PROVEDORFAMILIA||'''','NULL');
IF (COALESCE(NEW.RENDIMENTOFAMILIAR,'')<>COALESCE(OLD.RENDIMENTOFAMILIAR,'')) THEN TXT=TXT||',RENDIMENTOFAMILIAR = '||COALESCE(''''||NEW.RENDIMENTOFAMILIAR||'''','NULL');
IF (COALESCE(NEW.PROGRAMASOCIAL,'')<>COALESCE(OLD.PROGRAMASOCIAL,'')) THEN TXT=TXT||',PROGRAMASOCIAL = '||COALESCE(''''||NEW.PROGRAMASOCIAL||'''','NULL');
IF (COALESCE(NEW.AUXRECLUSAO,'')<>COALESCE(OLD.AUXRECLUSAO,'')) THEN TXT=TXT||',AUXRECLUSAO = '||COALESCE(''''||NEW.AUXRECLUSAO||'''','NULL');
IF (COALESCE(NEW.REPROVADOESCOLA,'')<>COALESCE(OLD.REPROVADOESCOLA,'')) THEN TXT=TXT||',REPROVADOESCOLA = '||COALESCE(''''||NEW.REPROVADOESCOLA||'''','NULL');
IF (COALESCE(NEW.IDADETRABALHO,'')<>COALESCE(OLD.IDADETRABALHO,'')) THEN TXT=TXT||',IDADETRABALHO = '||COALESCE(''''||NEW.IDADETRABALHO||'''','NULL');
IF (COALESCE(NEW.CURSOPROFISSIONALIZANTE,'')<>COALESCE(OLD.CURSOPROFISSIONALIZANTE,'')) THEN TXT=TXT||',CURSOPROFISSIONALIZANTE = '||COALESCE(''''||NEW.CURSOPROFISSIONALIZANTE||'''','NULL');
IF (COALESCE(NEW.EXERCICIATRABALHO,'')<>COALESCE(OLD.EXERCICIATRABALHO,'')) THEN TXT=TXT||',EXERCICIATRABALHO = '||COALESCE(''''||NEW.EXERCICIATRABALHO||'''','NULL');
IF (COALESCE(NEW.REGISTROCARTEIRA,'')<>COALESCE(OLD.REGISTROCARTEIRA,'')) THEN TXT=TXT||',REGISTROCARTEIRA = '||COALESCE(''''||NEW.REGISTROCARTEIRA||'''','NULL');
IF (COALESCE(NEW.TRABALHOUPANTERIOR,'')<>COALESCE(OLD.TRABALHOUPANTERIOR,'')) THEN TXT=TXT||',TRABALHOUPANTERIOR = '||COALESCE(''''||NEW.TRABALHOUPANTERIOR||'''','NULL');
IF (COALESCE(NEW.DOCUMENTOS,'')<>COALESCE(OLD.DOCUMENTOS,'')) THEN TXT=TXT||',DOCUMENTOS = '||COALESCE(''''||NEW.DOCUMENTOS||'''','NULL');
IF (COALESCE(NEW.USODROGAS,'')<>COALESCE(OLD.USODROGAS,'')) THEN TXT=TXT||',USODROGAS = '||COALESCE(''''||NEW.USODROGAS||'''','NULL');
IF (COALESCE(NEW.DATADEPENDENCIA,'')<>COALESCE(OLD.DATADEPENDENCIA,'')) THEN TXT=TXT||',DATADEPENDENCIA = '||COALESCE(''''||NEW.DATADEPENDENCIA||'''','NULL');
IF (COALESCE(NEW.ABANDONODROGAS,'')<>COALESCE(OLD.ABANDONODROGAS,'')) THEN TXT=TXT||',ABANDONODROGAS = '||COALESCE(''''||NEW.ABANDONODROGAS||'''','NULL');
IF (COALESCE(NEW.DROGASCOMCRIME,'')<>COALESCE(OLD.DROGASCOMCRIME,'')) THEN TXT=TXT||',DROGASCOMCRIME = '||COALESCE(''''||NEW.DROGASCOMCRIME||'''','NULL');
IF (COALESCE(NEW.DOENCAGRAVE,'')<>COALESCE(OLD.DOENCAGRAVE,'')) THEN TXT=TXT||',DOENCAGRAVE = '||COALESCE(''''||NEW.DOENCAGRAVE||'''','NULL');
IF (COALESCE(NEW.DOENCAMENTAL,'')<>COALESCE(OLD.DOENCAMENTAL,'')) THEN TXT=TXT||',DOENCAMENTAL = '||COALESCE(''''||NEW.DOENCAMENTAL||'''','NULL');
IF (COALESCE(NEW.PROBLEMASAUDE,'')<>COALESCE(OLD.PROBLEMASAUDE,'')) THEN TXT=TXT||',PROBLEMASAUDE = '||COALESCE(''''||NEW.PROBLEMASAUDE||'''','NULL');
IF (COALESCE(NEW.DOENCALABORAL,'')<>COALESCE(OLD.DOENCALABORAL,'')) THEN TXT=TXT||',DOENCALABORAL = '||COALESCE(''''||NEW.DOENCALABORAL||'''','NULL');
IF (COALESCE(NEW.VISITAOUTRAPESSOA,'')<>COALESCE(OLD.VISITAOUTRAPESSOA,'')) THEN TXT=TXT||',VISITAOUTRAPESSOA = '||COALESCE(''''||NEW.VISITAOUTRAPESSOA||'''','NULL');
IF (COALESCE(NEW.ESTUDOCUMPENA,'')<>COALESCE(OLD.ESTUDOCUMPENA,'')) THEN TXT=TXT||',ESTUDOCUMPENA = '||COALESCE(''''||NEW.ESTUDOCUMPENA||'''','NULL');
IF (COALESCE(NEW.TRABALHOCUMPENA,'')<>COALESCE(OLD.TRABALHOCUMPENA,'')) THEN TXT=TXT||',TRABALHOCUMPENA = '||COALESCE(''''||NEW.TRABALHOCUMPENA||'''','NULL');
IF (COALESCE(NEW.PROFISSAOCUMPENA,'')<>COALESCE(OLD.PROFISSAOCUMPENA,'')) THEN TXT=TXT||',PROFISSAOCUMPENA = '||COALESCE(''''||NEW.PROFISSAOCUMPENA||'''','NULL');
IF (COALESCE(NEW.DATAPSICOSSOCIAL,'')<>COALESCE(OLD.DATAPSICOSSOCIAL,'')) THEN TXT=TXT||',DATAPSICOSSOCIAL = '||COALESCE(''''||NEW.DATAPSICOSSOCIAL||'''','NULL');
IF (COALESCE(NEW.IDTECNICO,'')<>COALESCE(OLD.IDTECNICO,'')) THEN TXT=TXT||',IDTECNICO = '||COALESCE(NEW.IDTECNICO,'NULL');
IF (COALESCE(NEW.OBSPSICOSSOCIAL,'')<>COALESCE(OLD.OBSPSICOSSOCIAL,'')) THEN TXT=TXT||',OBSPSICOSSOCIAL = '||COALESCE(''''||NEW.OBSPSICOSSOCIAL||'''','NULL');
IF (COALESCE(NEW.DATA_DELITO,'')<>COALESCE(OLD.DATA_DELITO,'')) THEN TXT=TXT||',DATA_DELITO = '||COALESCE(''''||NEW.DATA_DELITO||'''','NULL');
IF (COALESCE(NEW.DATA_REABILITACAO,'')<>COALESCE(OLD.DATA_REABILITACAO,'')) THEN TXT=TXT||',DATA_REABILITACAO = '||COALESCE(''''||NEW.DATA_REABILITACAO||'''','NULL');
IF (COALESCE(NEW.MP,'')<>COALESCE(OLD.MP,'')) THEN TXT=TXT||',MP = '||COALESCE(NEW.MP,'NULL');
IF (COALESCE(NEW.SUICIDIO,'')<>COALESCE(OLD.SUICIDIO,'')) THEN TXT=TXT||',SUICIDIO = '||COALESCE(''''||NEW.SUICIDIO||'''','NULL');
IF (COALESCE(NEW.CID,'')<>COALESCE(OLD.CID,'')) THEN TXT=TXT||',CID = '||COALESCE(''''||NEW.CID||'''','NULL');
IF (COALESCE(NEW.EFEITOSDROGA,'')<>COALESCE(OLD.EFEITOSDROGA,'')) THEN TXT=TXT||',EFEITOSDROGA = '||COALESCE(''''||NEW.EFEITOSDROGA||'''','NULL');
IF (COALESCE(NEW.SINTOMASDEPRESSIVOS,'')<>COALESCE(OLD.SINTOMASDEPRESSIVOS,'')) THEN TXT=TXT||',SINTOMASDEPRESSIVOS = '||COALESCE(''''||NEW.SINTOMASDEPRESSIVOS||'''','NULL');
IF (COALESCE(NEW.EPISODIOSHUMOR,'')<>COALESCE(OLD.EPISODIOSHUMOR,'')) THEN TXT=TXT||',EPISODIOSHUMOR = '||COALESCE(''''||NEW.EPISODIOSHUMOR||'''','NULL');
IF (COALESCE(NEW.SINTOMASPSICOTICOS,'')<>COALESCE(OLD.SINTOMASPSICOTICOS,'')) THEN TXT=TXT||',SINTOMASPSICOTICOS = '||COALESCE(''''||NEW.SINTOMASPSICOTICOS||'''','NULL');
IF (COALESCE(NEW.DELIRIOS,'')<>COALESCE(OLD.DELIRIOS,'')) THEN TXT=TXT||',DELIRIOS = '||COALESCE(''''||NEW.DELIRIOS||'''','NULL');
IF (COALESCE(NEW.ALUCINACOES,'')<>COALESCE(OLD.ALUCINACOES,'')) THEN TXT=TXT||',ALUCINACOES = '||COALESCE(''''||NEW.ALUCINACOES||'''','NULL');
IF (COALESCE(NEW.PERSONALIDADE,'')<>COALESCE(OLD.PERSONALIDADE,'')) THEN TXT=TXT||',PERSONALIDADE = '||COALESCE(''''||NEW.PERSONALIDADE||'''','NULL');
IF (COALESCE(NEW.VISITANTES,'')<>COALESCE(OLD.VISITANTES,'')) THEN TXT=TXT||',VISITANTES = '||COALESCE(''''||NEW.VISITANTES||'''','NULL');
IF (COALESCE(NEW.MEDICACAOCONTROLADA,'')<>COALESCE(OLD.MEDICACAOCONTROLADA,'')) THEN TXT=TXT||',MEDICACAOCONTROLADA = '||COALESCE(''''||NEW.MEDICACAOCONTROLADA||'''','NULL');
IF (COALESCE(NEW.DOENCAINFECTOCONTAGIOSA,'')<>COALESCE(OLD.DOENCAINFECTOCONTAGIOSA,'')) THEN TXT=TXT||',DOENCAINFECTOCONTAGIOSA = '||COALESCE(''''||NEW.DOENCAINFECTOCONTAGIOSA||'''','NULL');
IF (COALESCE(NEW.TRATAMENTOINFECTO,'')<>COALESCE(OLD.TRATAMENTOINFECTO,'')) THEN TXT=TXT||',TRATAMENTOINFECTO = '||COALESCE(''''||NEW.TRATAMENTOINFECTO||'''','NULL');
IF (COALESCE(NEW.RESULTADOINFECTO,'')<>COALESCE(OLD.RESULTADOINFECTO,'')) THEN TXT=TXT||',RESULTADOINFECTO = '||COALESCE(''''||NEW.RESULTADOINFECTO||'''','NULL');
IF (COALESCE(NEW.SITUACAOCIVIL,'')<>COALESCE(OLD.SITUACAOCIVIL,'')) THEN TXT=TXT||',SITUACAOCIVIL = '||COALESCE(''''||NEW.SITUACAOCIVIL||'''','NULL');
IF (COALESCE(NEW.MEDIDASEGURANCA,'')<>COALESCE(OLD.MEDIDASEGURANCA,'')) THEN TXT=TXT||',MEDIDASEGURANCA = '||COALESCE(''''||NEW.MEDIDASEGURANCA||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE INTERNO SET ID_INTERNO = '''||NEW.ID_INTERNO||''''||TXT||' WHERE ID_INTERNO = '''||NEW.ID_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: INTERNO_BD0 */
CREATE TRIGGER INTERNO_BD0 FOR INTERNO
ACTIVE BEFORE DELETE POSITION 0
AS
begin
  exception messagem_diversas 'No pode deletar.';
end
^

/* Trigger: INTERNO_BI0 */
CREATE TRIGGER INTERNO_BI0 FOR INTERNO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_interno IS null or (new.id_interno = 0)  ) then
    new.id_interno = gen_id (cod_up, 0) || gen_id (id_interno, 1);

    if (new.st is null) then
      new.st = 'A' ;

    if (NEW.IDPAVILHAO is not null) then
    begin
     SELECT ID_UP FROM PAVILHAO WHERE PAVILHAO.ID_PAVILHAO=NEW.IDPAVILHAO
     INTO NEW.ID_UP ;
    end


--    if (LTRIM(RTRIM(COALESCE(NEW.rgi,'')))='') then
--      NEW.rgi = 'NAO INFORMADO';

--    if (COALESCE(NEW.data_entrada,0)=0) then
--      NEW.data_entrada = CURRENT_DATE;

--    if (COALESCE(NEW.data_prisao,0)=0) then
--      NEW.data_prisao = NEW.data_entrada;



end
^

/* Trigger: INTERNO_BIU0 */
CREATE TRIGGER INTERNO_BIU0 FOR INTERNO
ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
declare variable idsetor integer;
declare variable data varchar(7);
declare variable descricao varchar(50);
begin
  --se for novo ativo e antigo inativo: limpa o setor trabalho;
  if (new.st='A' and old.st='I') then
  begin
    new.idsetor_trabalho = null;
  end


  if (new.idsetor_trabalho is null and (new.st <> 'I')) then
  begin
    
      select
        ltrim(rtrim(substr(extract(month from current_date)+100,2,3)||'/'||
        substr(extract(year from current_date)+10000,2,5)))
      from rdb$database
      into :data;
    
      idsetor = 0;
      descricao = 'Z - VAGA - '||:data;
    
      select first 1 id_setor_trabalho
      from setor_trabalho
      where setor_trabalho = :descricao
      into :idsetor;
    
      if (idsetor=0) then
      begin
        insert into setor_trabalho (id_setor_trabalho, setor_trabalho)
        values (:idsetor, :descricao);
      end
    
      select first 1 id_setor_trabalho
      from setor_trabalho
      where setor_trabalho = :descricao
      into :idsetor;

      new.idsetor_trabalho = :idsetor;

  end

end
^

/* Trigger: INTERNO_BIU_LIMPA_VARCHAR */
CREATE TRIGGER INTERNO_BIU_LIMPA_VARCHAR FOR INTERNO
ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
begin
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.CPF) INTO NEW.CPF;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.HISTORICO) INTO NEW.HISTORICO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.CONTATO) INTO NEW.CONTATO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.ENDERECO) INTO NEW.ENDERECO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.IDENTIDADE_GENERO) INTO NEW.IDENTIDADE_GENERO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.MAE) INTO NEW.MAE;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.NOME_INTERNO) INTO NEW.NOME_INTERNO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.NOME_SOCIAL) INTO NEW.NOME_SOCIAL;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.ORIENTACAO_SEXUAL) INTO NEW.ORIENTACAO_SEXUAL;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.PAI) INTO NEW.PAI;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.RELIGIAO) INTO NEW.RELIGIAO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.FONE) INTO NEW.FONE;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.NUMERO) INTO NEW.NUMERO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.CEP) INTO NEW.CEP;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.ST) INTO NEW.ST;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.SEXO) INTO NEW.SEXO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.ALTURA) INTO NEW.ALTURA;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.BAIRRO) INTO NEW.BAIRRO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.CI) INTO NEW.CI;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.CISAIDA) INTO NEW.CISAIDA;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.COMPLEMENETO) INTO NEW.COMPLEMENETO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.ESTADO_CIVIL) INTO NEW.ESTADO_CIVIL;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.PESO) INTO NEW.PESO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.RG) INTO NEW.RG;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.RGI) INTO NEW.RGI;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.STATUS_ISOLAMENTO) INTO NEW.STATUS_ISOLAMENTO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.ARTIGO) INTO NEW.ARTIGO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.COR_CABELOS) INTO NEW.COR_CABELOS;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.CONDENACAO) INTO NEW.CONDENACAO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.COR_OLHOS) INTO NEW.COR_OLHOS;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.DEFICIENCIA) INTO NEW.DEFICIENCIA;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.MOTIVO_SAIDA) INTO NEW.MOTIVO_SAIDA;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.OUTRO_NOME) INTO NEW.OUTRO_NOME;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.OBSTRABALHO) INTO NEW.OBSTRABALHO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.VULGO) INTO NEW.VULGO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.SINAIS_PARTICULARES) INTO NEW.SINAIS_PARTICULARES;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.HISTORICO_VELHO) INTO NEW.HISTORICO_VELHO;
SELECT RETORNO FROM SP_LIMPA_CHAR(NEW.OBSEDUCACAO) INTO NEW.OBSEDUCACAO;

end
^

/* Trigger: INTERNO_BU_MOVIMENTO */
CREATE TRIGGER INTERNO_BU_MOVIMENTO FOR INTERNO
ACTIVE BEFORE UPDATE POSITION 0
AS
DECLARE VARIABLE NOME_FUNC_ANTES VARCHAR(200);
DECLARE VARIABLE NOME_FUNC_ATUAL VARCHAR(200);
DECLARE VARIABLE PAVILHAO_ANTES VARCHAR(200);
DECLARE VARIABLE PAVILHAO_ATUAL VARCHAR(200);
DECLARE VARIABLE GALERIA_ANTES VARCHAR(200);
DECLARE VARIABLE GALERIA_ATUAL VARCHAR(200);
DECLARE VARIABLE SOLARIO_ANTES VARCHAR(200);
DECLARE VARIABLE SOLARIO_ATUAL VARCHAR(200);
DECLARE VARIABLE CELA_ANTES VARCHAR(200);
DECLARE VARIABLE CELA_ATUAL VARCHAR(200);
DECLARE VARIABLE CONDICAO_ANTES VARCHAR(200);
DECLARE VARIABLE CONDICAO_ATUAL VARCHAR(200);
DECLARE VARIABLE PROCEDENCIA_ANTES VARCHAR(200);
DECLARE VARIABLE PROCEDENCIA_ATUAL VARCHAR(200);
DECLARE VARIABLE SETOR_ANTES VARCHAR(200);
DECLARE VARIABLE SETOR_ATUAL VARCHAR(200);
DECLARE VARIABLE FOTO_ANTES VARCHAR(200);
DECLARE VARIABLE FOTO_ATUAL VARCHAR(200);
DECLARE VARIABLE STATUS_ANTES VARCHAR(200);
DECLARE VARIABLE STATUS_ATUAL VARCHAR(200);
DECLARE VARIABLE DESTINO_SAIDA VARCHAR(200);
DECLARE VARIABLE MOVIMENTACAO VARCHAR(16386);
BEGIN
/* NESTA TRIGGER SER TRATADO OS SEGUINTES MOVIMENTOS:
  --MUDANA DE PAVILHAO/GALERIA/SOLARIO/CELA
  --MUDANA DE CONDIO
  --MUDANA DE PROCEDENCIA
  --MUDANA DE SETOR DE TRABALHO
  --ADICIONANDO OU ALTERANDO FOTO
  --MUDANA PARA INATIVO INFORMANDO: DATA DA SAIDA / MOTIVO DA SAIDA / DESTINO
  --MUDANA PARA ATIVO INFORMANDO: DATA DA ENTRADA / PROCEDENCIA / APAGANDO DATA DE SAIDA E MOTIVO E DESTINO
*/

  IF (USER <> 'SYSDBA') THEN
    EXIT;

  --REGISTRO ANTES
  NOME_FUNC_ANTES = '(FUNCIONARIO ANTES - NAO INFORMADO)' ;
  SELECT F.MATRICULA||'-'||F.NOME_FUNCIONARIO
  FROM FUNCIONARIO F
  WHERE F.ID_FUNCIONARIO = OLD.ID_FUNCIONARIO
  INTO :NOME_FUNC_ANTES;

  PAVILHAO_ANTES = '(PAVILHAO ANTES - NAO INFORMADO)' ;
  SELECT P.PAVILHAO
  FROM PAVILHAO P
  WHERE P.ID_PAVILHAO = OLD.IDPAVILHAO
  INTO :PAVILHAO_ANTES;

  GALERIA_ANTES = '(GALERIA ANTES - NAO INFORMADO)' ;
  SELECT G.GALERIA
  FROM GALERIA G
  WHERE G.ID_GALERIA = OLD.IDGALERIA
  INTO :GALERIA_ANTES;

  SOLARIO_ANTES = '(SOLARIO ANTES - NAO INFORMADO)' ;
  SELECT S.SOLARIO
  FROM SOLARIO S
  WHERE S.ID_SOLARIO = OLD.IDSOLARIO
  INTO :SOLARIO_ANTES;

  CELA_ANTES = '(CELA ANTES - NAO INFORMADO)' ;
  SELECT C.CELA
  FROM CELA C
  WHERE C.ID_CELA = OLD.IDCELA
  INTO :CELA_ANTES;

  CONDICAO_ANTES = '(CONDICAO ANTES - NAO INFORMADO)' ;
  SELECT C.DESCRICAO
  FROM CONDICAO_INTERNO C
  WHERE C.IDCONDICAO_INTERNO = OLD.IDCONDICAO_INTERNO
  INTO :CONDICAO_ANTES;

  PROCEDENCIA_ANTES = '(PROCEDENCIA ANTES - NAO INFORMADO)' ;
  SELECT P.PROEDENCIA
  FROM PROCEDENCIA P
  WHERE P.ID_PROCEDENCIA = OLD.ID_PROCEDENCIA
  INTO :PROCEDENCIA_ANTES;

  SETOR_ANTES = '(SETOR ANTES - NAO INFORMADO)' ;
  SELECT S.SETOR_TRABALHO
  FROM SETOR_TRABALHO S
  WHERE S.ID_SETOR_TRABALHO = OLD.IDSETOR_TRABALHO
  INTO :SETOR_ANTES;

  --################################################################
  --################################################################
  --################################################################
  --REGISTRO ATUAL
  NOME_FUNC_ATUAL = '(FUNCIONARIO ATUAL - NAO INFORMADO)' ;
  SELECT F.MATRICULA||'-'||F.NOME_FUNCIONARIO
  FROM FUNCIONARIO F
  WHERE F.ID_FUNCIONARIO = NEW.ID_FUNCIONARIO
  INTO :NOME_FUNC_ATUAL;

  PAVILHAO_ATUAL = '(PAVILHAO ATUAL - NAO INFORMADO)' ;
  SELECT P.PAVILHAO
  FROM PAVILHAO P
  WHERE P.ID_PAVILHAO = NEW.IDPAVILHAO
  INTO :PAVILHAO_ATUAL;

  GALERIA_ATUAL = '(GALERIA ATUAL - NAO INFORMADO)' ;
  SELECT G.GALERIA
  FROM GALERIA G
  WHERE G.ID_GALERIA = NEW.IDGALERIA
  INTO :GALERIA_ATUAL;

  SOLARIO_ATUAL = '(SOLARIO ATUAL - NAO INFORMADO)' ;
  SELECT S.SOLARIO
  FROM SOLARIO S
  WHERE S.ID_SOLARIO = NEW.IDSOLARIO
  INTO :SOLARIO_ATUAL;

  CELA_ATUAL = '(CELA ATUAL - NAO INFORMADO)' ;
  SELECT C.CELA
  FROM CELA C
  WHERE C.ID_CELA = NEW.IDCELA
  INTO :CELA_ATUAL;

  CONDICAO_ATUAL = '(CONDICAO ATUAL - NAO INFORMADO)' ;
  SELECT C.DESCRICAO
  FROM CONDICAO_INTERNO C
  WHERE C.IDCONDICAO_INTERNO = NEW.IDCONDICAO_INTERNO
  INTO :CONDICAO_ATUAL;

  PROCEDENCIA_ATUAL = '(PROCEDENCIA ATUAL - NAO INFORMADO)' ;
  SELECT P.PROEDENCIA
  FROM PROCEDENCIA P
  WHERE P.ID_PROCEDENCIA = NEW.ID_PROCEDENCIA
  INTO :PROCEDENCIA_ATUAL;

  SETOR_ATUAL = '(SETOR ATUAL - NAO INFORMADO)' ;
  SELECT S.SETOR_TRABALHO
  FROM SETOR_TRABALHO S
  WHERE S.ID_SETOR_TRABALHO = NEW.IDSETOR_TRABALHO
  INTO :SETOR_ATUAL;
  
  MOVIMENTACAO = '----------------------------------------------------------------------
' ;
  MOVIMENTACAO = MOVIMENTACAO||'RESPONSAVEL DAS INFORMAES ANTERIORES:
'||COALESCE(NOME_FUNC_ANTES,'');
  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;
  MOVIMENTACAO = MOVIMENTACAO||'RESPONSAVEL PELO REGISTRO ATUAL:
'||COALESCE(NOME_FUNC_ATUAL,'');

  IF (NEW.IDCELA <> OLD.IDCELA) THEN
  BEGIN
  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;
    MOVIMENTACAO = MOVIMENTACAO||'..:: PAVILHAO/GALERIA/SOLARIO/CELA ::..
ANTES........: '||pavilhao_antes||'/'||galeria_antes||'/'||solario_antes||'/'||cela_antes||'
ATUAL........: '||pavilhao_atual||'/'||galeria_atual||'/'||solario_atual||'/'||cela_atual;
  END

  IF (NEW.idcondicao_interno <> OLD.idcondicao_interno) THEN
  BEGIN
  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;
    MOVIMENTACAO = MOVIMENTACAO||'..:: CONDICAO DO INTERNO ::..
ANTES........: '||condicao_antes||'
ATUAL........: '||condicao_atual;
  END

  IF (NEW.id_procedencia <> OLD.id_procedencia) THEN
  BEGIN
  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;
    MOVIMENTACAO = MOVIMENTACAO||'..:: PROCEDENCIA DO INTERNO ::..
ANTES........: '||procedencia_antes||'
ATUAL........: '||procedencia_atual;
  END

  IF (NEW.idsetor_trabalho <> OLD.idsetor_trabalho) THEN
  BEGIN
  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;
    MOVIMENTACAO = MOVIMENTACAO||'..:: SETOR DE TRABALHO ::..
ANTES........: '||setor_antes||'
ATUAL........: '||setor_atual;
  END

  IF (NEW.foto <> OLD.foto) THEN
  BEGIN
  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;
    MOVIMENTACAO = MOVIMENTACAO||'FOI ALTERADA A FOTO DO INTERNO.'||setor_antes ;
  END

  MOVIMENTACAO = MOVIMENTACAO||'
----------------------------------------------------------------
' ;

  IF (NEW.st <> OLD.st) THEN
  BEGIN
  
      if (new.st='I') then
      begin
          DESTINO_SAIDA = '(DESTINO - NAO INFORMADO)' ;
          SELECT D.destino
          FROM DESTINO D
          WHERE D.id_destino = NEW.iddestino
          INTO :DESTINO_SAIDA;
          MOVIMENTACAO = MOVIMENTACAO||'STATUS INATIVO NO CONFERE MOTIVO: '||NEW.MOTIVO_SAIDA||'
DESTINO: '||:destino_saida ;
      end
      else
      begin
          MOVIMENTACAO = MOVIMENTACAO||'STATUS ATIVO NO CONFERE';
          NEW.MOTIVO_SAIDA = NULL ;
          NEW.DATA_SAIDA = NULL ;
          NEW.iddestino = NULL ;
      end
  END

insert into mov_interno (id_mov_interno, id_interno, id_unidade_penal, tipo_movimentacao, data_movimentacao, hora_movimentacao, id_funcionario, id_procedencia, id_destino, idpavilhao, idgaleria, idsolario, idcela, st_interno)
values (0, NEW.id_interno, NEW.id_up,
:movimentacao, current_date, current_time,
NEW.id_funcionario, NEW.id_procedencia, NEW.iddestino,
NEW.idpavilhao, NEW.idgaleria, NEW.idsolario, NEW.idcela,
NEW.st)  ;

END
^

/* Trigger: INTERNO_IU_SINC_BLOB */
CREATE TRIGGER INTERNO_IU_SINC_BLOB FOR INTERNO
ACTIVE BEFORE INSERT OR UPDATE POSITION 999
AS
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7510
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_BLOB_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE
   DO
   BEGIN

    IF (INSERTING) THEN
    BEGIN
      
        IF (NEW.FOTO IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_PERFIL IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_PERFIL', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_TATUAGEM IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_TATUAGEM', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_SINAIS IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_SINAIS1 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS1', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_SINAIS2 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS2', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_SINAIS3 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS3', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (NEW.FOTO_SINAIS4 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS4', 'ID_INTERNO', NEW.ID_INTERNO);
        END

    END
    ELSE
    BEGIN
      
        IF (OLD.FOTO <> NEW.FOTO) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_PERFIL <> NEW.FOTO_PERFIL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_PERFIL', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_TATUAGEM <> NEW.FOTO_TATUAGEM) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_TATUAGEM', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_SINAIS <> NEW.FOTO_SINAIS) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_SINAIS1 <> NEW.FOTO_SINAIS1) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS1', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_SINAIS2 <> NEW.FOTO_SINAIS2) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS2', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_SINAIS3 <> NEW.FOTO_SINAIS3) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS3', 'ID_INTERNO', NEW.ID_INTERNO);
        END

        IF (OLD.FOTO_SINAIS4 <> NEW.FOTO_SINAIS4) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS4', 'ID_INTERNO', NEW.ID_INTERNO);
        END

    END

   END

END
^

/* Trigger: MENORES_AD_SINCRONISMO */
CREATE TRIGGER MENORES_AD_SINCRONISMO FOR MENORES
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7820

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM MENORES WHERE ID_MENORES = '||OLD.ID_MENORES||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: MENORES_AI_SINCRONISMO */
CREATE TRIGGER MENORES_AI_SINCRONISMO FOR MENORES
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7820

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO MENORES (ID_MENORES,'
||' NOME_MENORES,'
||' ID_VISITANTE) VALUES ('
||COALESCE(NEW.ID_MENORES,'NULL')||','
||COALESCE(''''||NEW.NOME_MENORES||'''','NULL')||','
||COALESCE(NEW.ID_VISITANTE,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: MENORES_AU_SINCRONISMO */
CREATE TRIGGER MENORES_AU_SINCRONISMO FOR MENORES
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7820
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.NOME_MENORES,'')<>COALESCE(OLD.NOME_MENORES,'')) THEN TXT=TXT||',NOME_MENORES = '||COALESCE(''''||NEW.NOME_MENORES||'''','NULL');
IF (COALESCE(NEW.ID_VISITANTE,'')<>COALESCE(OLD.ID_VISITANTE,'')) THEN TXT=TXT||',ID_VISITANTE = '||COALESCE(NEW.ID_VISITANTE,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE MENORES SET ID_MENORES = '''||NEW.ID_MENORES||''''||TXT||' WHERE ID_MENORES = '''||NEW.ID_MENORES||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: MENORES_BI0 */
CREATE TRIGGER MENORES_BI0 FOR MENORES
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
     if (NEW.id_menores IS null or (new.id_menores = 0)  ) then
    new.id_menores = gen_id (cod_up, 0) || gen_id (id_menores, 1);

end
^

/* Trigger: MOV_DIARIO_VISITANTES_AD_SINCRO */
CREATE TRIGGER MOV_DIARIO_VISITANTES_AD_SINCRO FOR MOV_DIARIO_VISITANTES
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM MOV_DIARIO_VISITANTES WHERE ID_MOV_DIARIO_VISITANTES = '||OLD.ID_MOV_DIARIO_VISITANTES||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: MOV_DIARIO_VISITANTES_AI_SINCRO */
CREATE TRIGGER MOV_DIARIO_VISITANTES_AI_SINCRO FOR MOV_DIARIO_VISITANTES
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO MOV_DIARIO_VISITANTES (ID_MOV_DIARIO_VISITANTES,'
||' ID_VISITANTE,'
||' NOME_VISITANTE,'
||' ID_GRAU_PARENTESCO,'
||' ID_INTERNO,'
||' NUMERO_CARTEIRINHA,'
||' CPF,'
||' RG,'
||' ORGAO_EXPEDIDOR,'
||' SEXO,'
||' DATA_VISITA,'
||' HORA_VISITA,'
||' ORDEM_VISITA,'
||' CANCELADO,'
||' QUANTIDADE_MENOR) VALUES ('
||COALESCE(NEW.ID_MOV_DIARIO_VISITANTES,'NULL')||','
||COALESCE(NEW.ID_VISITANTE,'NULL')||','
||COALESCE(''''||NEW.NOME_VISITANTE||'''','NULL')||','
||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.NUMERO_CARTEIRINHA||'''','NULL')||','
||COALESCE(''''||NEW.CPF||'''','NULL')||','
||COALESCE(''''||NEW.RG||'''','NULL')||','
||COALESCE(''''||NEW.ORGAO_EXPEDIDOR||'''','NULL')||','
||COALESCE(''''||NEW.SEXO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_VISITA||'''','NULL')||','
||COALESCE(''''||NEW.HORA_VISITA||'''','NULL')||','
||COALESCE(NEW.ORDEM_VISITA,'NULL')||','
||COALESCE(''''||NEW.CANCELADO||'''','NULL')||','
||COALESCE(NEW.QUANTIDADE_MENOR,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: MOV_DIARIO_VISITANTES_AU_SINCRO */
CREATE TRIGGER MOV_DIARIO_VISITANTES_AU_SINCRO FOR MOV_DIARIO_VISITANTES
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_VISITANTE,'')<>COALESCE(OLD.ID_VISITANTE,'')) THEN TXT=TXT||',ID_VISITANTE = '||COALESCE(NEW.ID_VISITANTE,'NULL');
IF (COALESCE(NEW.NOME_VISITANTE,'')<>COALESCE(OLD.NOME_VISITANTE,'')) THEN TXT=TXT||',NOME_VISITANTE = '||COALESCE(''''||NEW.NOME_VISITANTE||'''','NULL');
IF (COALESCE(NEW.ID_GRAU_PARENTESCO,'')<>COALESCE(OLD.ID_GRAU_PARENTESCO,'')) THEN TXT=TXT||',ID_GRAU_PARENTESCO = '||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL');
IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.NUMERO_CARTEIRINHA,'')<>COALESCE(OLD.NUMERO_CARTEIRINHA,'')) THEN TXT=TXT||',NUMERO_CARTEIRINHA = '||COALESCE(''''||NEW.NUMERO_CARTEIRINHA||'''','NULL');
IF (COALESCE(NEW.CPF,'')<>COALESCE(OLD.CPF,'')) THEN TXT=TXT||',CPF = '||COALESCE(''''||NEW.CPF||'''','NULL');
IF (COALESCE(NEW.RG,'')<>COALESCE(OLD.RG,'')) THEN TXT=TXT||',RG = '||COALESCE(''''||NEW.RG||'''','NULL');
IF (COALESCE(NEW.ORGAO_EXPEDIDOR,'')<>COALESCE(OLD.ORGAO_EXPEDIDOR,'')) THEN TXT=TXT||',ORGAO_EXPEDIDOR = '||COALESCE(''''||NEW.ORGAO_EXPEDIDOR||'''','NULL');
IF (COALESCE(NEW.SEXO,'')<>COALESCE(OLD.SEXO,'')) THEN TXT=TXT||',SEXO = '||COALESCE(''''||NEW.SEXO||'''','NULL');
IF (COALESCE(NEW.DATA_VISITA,'')<>COALESCE(OLD.DATA_VISITA,'')) THEN TXT=TXT||',DATA_VISITA = '||COALESCE(''''||NEW.DATA_VISITA||'''','NULL');
IF (COALESCE(NEW.HORA_VISITA,'')<>COALESCE(OLD.HORA_VISITA,'')) THEN TXT=TXT||',HORA_VISITA = '||COALESCE(''''||NEW.HORA_VISITA||'''','NULL');
IF (COALESCE(NEW.ORDEM_VISITA,'')<>COALESCE(OLD.ORDEM_VISITA,'')) THEN TXT=TXT||',ORDEM_VISITA = '||COALESCE(NEW.ORDEM_VISITA,'NULL');
IF (COALESCE(NEW.CANCELADO,'')<>COALESCE(OLD.CANCELADO,'')) THEN TXT=TXT||',CANCELADO = '||COALESCE(''''||NEW.CANCELADO||'''','NULL');
IF (COALESCE(NEW.QUANTIDADE_MENOR,'')<>COALESCE(OLD.QUANTIDADE_MENOR,'')) THEN TXT=TXT||',QUANTIDADE_MENOR = '||COALESCE(NEW.QUANTIDADE_MENOR,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE MOV_DIARIO_VISITANTES SET ID_MOV_DIARIO_VISITANTES = '''||NEW.ID_MOV_DIARIO_VISITANTES||''''||TXT||' WHERE ID_MOV_DIARIO_VISITANTES = '''||NEW.ID_MOV_DIARIO_VISITANTES||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: MOV_DIARIO_VISITANTES_BI0 */
CREATE TRIGGER MOV_DIARIO_VISITANTES_BI0 FOR MOV_DIARIO_VISITANTES
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_mov_diario_visitantes IS null or (new.id_mov_diario_visitantes = 0)  ) then
    new.id_mov_diario_visitantes = gen_id (cod_up, 0) || gen_id (id_mov_diario_visitante, 1);
end
^

/* Trigger: MOV_DIARIO_VISITANTES_ORDENAR */
CREATE TRIGGER MOV_DIARIO_VISITANTES_ORDENAR FOR MOV_DIARIO_VISITANTES
ACTIVE BEFORE INSERT POSITION 0
AS
begin

    select count(*)+1
    from mov_diario_visitantes
    where data_visita=current_date
    and mov_diario_visitantes.cancelado is null
    and mov_diario_visitantes.id_mov_diario_visitantes like gen_id(cod_up,0)||'%'
    into new.ordem_visita;

end
^

/* Trigger: MOV_DIARIO_VISITANTES_REORDENA */
CREATE TRIGGER MOV_DIARIO_VISITANTES_REORDENA FOR MOV_DIARIO_VISITANTES
ACTIVE AFTER UPDATE POSITION 0
AS
declare variable ordem integer;
declare variable id_mov_diario_visitantes integer;
begin
    ordem = 0;
    if (new.cancelado='S') then
    begin
        for
            select mov_diario_visitantes.id_mov_diario_visitantes
            from mov_diario_visitantes
            where mov_diario_visitantes.data_visita=current_date
            and mov_diario_visitantes.cancelado is null
            and mov_diario_visitantes.id_mov_diario_visitantes like gen_id(cod_up,0)||'%'
            order by id_mov_diario_visitantes
            into :id_mov_diario_visitantes
        do
        begin
            ordem = ordem + 1 ;
            update mov_diario_visitantes set mov_diario_visitantes.ordem_visita = :ordem
            where mov_diario_visitantes.id_mov_diario_visitantes = :id_mov_diario_visitantes;
        end
    end
end
^

/* Trigger: MOV_INTERNO_AD_SINCRONISMO */
CREATE TRIGGER MOV_INTERNO_AD_SINCRONISMO FOR MOV_INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM MOV_INTERNO WHERE ID_MOV_INTERNO = '||OLD.ID_MOV_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: MOV_INTERNO_AI_SINCRONISMO */
CREATE TRIGGER MOV_INTERNO_AI_SINCRONISMO FOR MOV_INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO MOV_INTERNO (ID_MOV_INTERNO,'
||' ID_INTERNO,'
||' ID_UNIDADE_PENAL,'
||' TIPO_MOVIMENTACAO,'
||' DATA_MOVIMENTACAO,'
||' HORA_MOVIMENTACAO,'
||' ID_FUNCIONARIO,'
||' ID_PROCEDENCIA,'
||' ID_DESTINO,'
||' IDPAVILHAO,'
||' IDGALERIA,'
||' IDSOLARIO,'
||' IDCELA,'
||' ST_INTERNO) VALUES ('
||COALESCE(NEW.ID_MOV_INTERNO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(NEW.ID_UNIDADE_PENAL,'NULL')||','
||COALESCE(''''||NEW.TIPO_MOVIMENTACAO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_MOVIMENTACAO||'''','NULL')||','
||COALESCE(''''||NEW.HORA_MOVIMENTACAO||'''','NULL')||','
||COALESCE(NEW.ID_FUNCIONARIO,'NULL')||','
||COALESCE(NEW.ID_PROCEDENCIA,'NULL')||','
||COALESCE(NEW.ID_DESTINO,'NULL')||','
||COALESCE(NEW.IDPAVILHAO,'NULL')||','
||COALESCE(NEW.IDGALERIA,'NULL')||','
||COALESCE(NEW.IDSOLARIO,'NULL')||','
||COALESCE(NEW.IDCELA,'NULL')||','
||COALESCE(''''||NEW.ST_INTERNO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: MOV_INTERNO_AU_SINCRONISMO */
CREATE TRIGGER MOV_INTERNO_AU_SINCRONISMO FOR MOV_INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.ID_UNIDADE_PENAL,'')<>COALESCE(OLD.ID_UNIDADE_PENAL,'')) THEN TXT=TXT||',ID_UNIDADE_PENAL = '||COALESCE(NEW.ID_UNIDADE_PENAL,'NULL');
IF (COALESCE(NEW.TIPO_MOVIMENTACAO,'')<>COALESCE(OLD.TIPO_MOVIMENTACAO,'')) THEN TXT=TXT||',TIPO_MOVIMENTACAO = '||COALESCE(''''||NEW.TIPO_MOVIMENTACAO||'''','NULL');
IF (COALESCE(NEW.DATA_MOVIMENTACAO,'')<>COALESCE(OLD.DATA_MOVIMENTACAO,'')) THEN TXT=TXT||',DATA_MOVIMENTACAO = '||COALESCE(''''||NEW.DATA_MOVIMENTACAO||'''','NULL');
IF (COALESCE(NEW.HORA_MOVIMENTACAO,'')<>COALESCE(OLD.HORA_MOVIMENTACAO,'')) THEN TXT=TXT||',HORA_MOVIMENTACAO = '||COALESCE(''''||NEW.HORA_MOVIMENTACAO||'''','NULL');
IF (COALESCE(NEW.ID_FUNCIONARIO,'')<>COALESCE(OLD.ID_FUNCIONARIO,'')) THEN TXT=TXT||',ID_FUNCIONARIO = '||COALESCE(NEW.ID_FUNCIONARIO,'NULL');
IF (COALESCE(NEW.ID_PROCEDENCIA,'')<>COALESCE(OLD.ID_PROCEDENCIA,'')) THEN TXT=TXT||',ID_PROCEDENCIA = '||COALESCE(NEW.ID_PROCEDENCIA,'NULL');
IF (COALESCE(NEW.ID_DESTINO,'')<>COALESCE(OLD.ID_DESTINO,'')) THEN TXT=TXT||',ID_DESTINO = '||COALESCE(NEW.ID_DESTINO,'NULL');
IF (COALESCE(NEW.IDPAVILHAO,'')<>COALESCE(OLD.IDPAVILHAO,'')) THEN TXT=TXT||',IDPAVILHAO = '||COALESCE(NEW.IDPAVILHAO,'NULL');
IF (COALESCE(NEW.IDGALERIA,'')<>COALESCE(OLD.IDGALERIA,'')) THEN TXT=TXT||',IDGALERIA = '||COALESCE(NEW.IDGALERIA,'NULL');
IF (COALESCE(NEW.IDSOLARIO,'')<>COALESCE(OLD.IDSOLARIO,'')) THEN TXT=TXT||',IDSOLARIO = '||COALESCE(NEW.IDSOLARIO,'NULL');
IF (COALESCE(NEW.IDCELA,'')<>COALESCE(OLD.IDCELA,'')) THEN TXT=TXT||',IDCELA = '||COALESCE(NEW.IDCELA,'NULL');
IF (COALESCE(NEW.ST_INTERNO,'')<>COALESCE(OLD.ST_INTERNO,'')) THEN TXT=TXT||',ST_INTERNO = '||COALESCE(''''||NEW.ST_INTERNO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE MOV_INTERNO SET ID_MOV_INTERNO = '''||NEW.ID_MOV_INTERNO||''''||TXT||' WHERE ID_MOV_INTERNO = '''||NEW.ID_MOV_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: MOV_INTERNO_BI0 */
CREATE TRIGGER MOV_INTERNO_BI0 FOR MOV_INTERNO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_mov_interno IS null or (new.id_mov_interno = 0)  ) then
    new.id_mov_interno = gen_id (cod_up, 0) || gen_id (id_mov_interno, 1);
end
^

/* Trigger: MOV_INTERNO_IU_SINC_BLOB */
CREATE TRIGGER MOV_INTERNO_IU_SINC_BLOB FOR MOV_INTERNO
ACTIVE BEFORE INSERT OR UPDATE POSITION 999
AS
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.7980
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_BLOB_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE
   DO
   BEGIN

    IF (INSERTING) THEN
    BEGIN
      
        IF (NEW.FOTO_INTERNO IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'MOV_INTERNO', 'FOTO_INTERNO', 'ID_MOV_INTERNO', NEW.ID_MOV_INTERNO);
        END

    END
    ELSE
    BEGIN
      
        IF (OLD.FOTO_INTERNO <> NEW.FOTO_INTERNO) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'MOV_INTERNO', 'FOTO_INTERNO', 'ID_MOV_INTERNO', NEW.ID_MOV_INTERNO);
        END

    END

   END

END
^

/* Trigger: MOV_TRABALHO_AD_SINCRONISMO */
CREATE TRIGGER MOV_TRABALHO_AD_SINCRONISMO FOR MOV_TRABALHO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8140

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM MOV_TRABALHO WHERE ID_MOV_TRABALHO = '||OLD.ID_MOV_TRABALHO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: MOV_TRABALHO_AI_SINCRONISMO */
CREATE TRIGGER MOV_TRABALHO_AI_SINCRONISMO FOR MOV_TRABALHO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8140

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO MOV_TRABALHO (ID_MOV_TRABALHO,'
||' ID_TRABALHO,'
||' ID_INTERNO,'
||' ID_SETOR_TRABALHO,'
||' ID_FUNCAO_INTERNO,'
||' DATA_MOV_TRABALHO,'
||' OBS_MOV_TRABALHO,'
||' TIPO_MOV_TRABALHO,'
||' ID_UNIDADE_PENAL) VALUES ('
||COALESCE(NEW.ID_MOV_TRABALHO,'NULL')||','
||COALESCE(NEW.ID_TRABALHO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL')||','
||COALESCE(NEW.ID_FUNCAO_INTERNO,'NULL')||','
||COALESCE(''''||NEW.DATA_MOV_TRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.OBS_MOV_TRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.TIPO_MOV_TRABALHO||'''','NULL')||','
||COALESCE(NEW.ID_UNIDADE_PENAL,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: MOV_TRABALHO_AU_SINCRONISMO */
CREATE TRIGGER MOV_TRABALHO_AU_SINCRONISMO FOR MOV_TRABALHO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8140
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_TRABALHO,'')<>COALESCE(OLD.ID_TRABALHO,'')) THEN TXT=TXT||',ID_TRABALHO = '||COALESCE(NEW.ID_TRABALHO,'NULL');
IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.ID_SETOR_TRABALHO,'')<>COALESCE(OLD.ID_SETOR_TRABALHO,'')) THEN TXT=TXT||',ID_SETOR_TRABALHO = '||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL');
IF (COALESCE(NEW.ID_FUNCAO_INTERNO,'')<>COALESCE(OLD.ID_FUNCAO_INTERNO,'')) THEN TXT=TXT||',ID_FUNCAO_INTERNO = '||COALESCE(NEW.ID_FUNCAO_INTERNO,'NULL');
IF (COALESCE(NEW.DATA_MOV_TRABALHO,'')<>COALESCE(OLD.DATA_MOV_TRABALHO,'')) THEN TXT=TXT||',DATA_MOV_TRABALHO = '||COALESCE(''''||NEW.DATA_MOV_TRABALHO||'''','NULL');
IF (COALESCE(NEW.OBS_MOV_TRABALHO,'')<>COALESCE(OLD.OBS_MOV_TRABALHO,'')) THEN TXT=TXT||',OBS_MOV_TRABALHO = '||COALESCE(''''||NEW.OBS_MOV_TRABALHO||'''','NULL');
IF (COALESCE(NEW.TIPO_MOV_TRABALHO,'')<>COALESCE(OLD.TIPO_MOV_TRABALHO,'')) THEN TXT=TXT||',TIPO_MOV_TRABALHO = '||COALESCE(''''||NEW.TIPO_MOV_TRABALHO||'''','NULL');
IF (COALESCE(NEW.ID_UNIDADE_PENAL,'')<>COALESCE(OLD.ID_UNIDADE_PENAL,'')) THEN TXT=TXT||',ID_UNIDADE_PENAL = '||COALESCE(NEW.ID_UNIDADE_PENAL,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE MOV_TRABALHO SET ID_MOV_TRABALHO = '''||NEW.ID_MOV_TRABALHO||''''||TXT||' WHERE ID_MOV_TRABALHO = '''||NEW.ID_MOV_TRABALHO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: MOV_TRABALHO_BI0 */
CREATE TRIGGER MOV_TRABALHO_BI0 FOR MOV_TRABALHO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_mov_trabalho IS null or (new.id_mov_trabalho = 0)  ) then
    new.id_mov_trabalho = gen_id (cod_up, 0) || gen_id (id_mov_trabalho, 1);
end
^

/* Trigger: NACIONALIDADE_AD_SINCRONISMO */
CREATE TRIGGER NACIONALIDADE_AD_SINCRONISMO FOR NACIONALIDADE
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8140

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM NACIONALIDADE WHERE ID_NACIONALIDADE = '||OLD.ID_NACIONALIDADE||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: NACIONALIDADE_AI_SINCRONISMO */
CREATE TRIGGER NACIONALIDADE_AI_SINCRONISMO FOR NACIONALIDADE
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8140

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO NACIONALIDADE (ID_NACIONALIDADE,'
||' NACIONALIDADE) VALUES ('
||COALESCE(NEW.ID_NACIONALIDADE,'NULL')||','
||COALESCE(''''||NEW.NACIONALIDADE||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: NACIONALIDADE_AU_SINCRONISMO */
CREATE TRIGGER NACIONALIDADE_AU_SINCRONISMO FOR NACIONALIDADE
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8140
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.NACIONALIDADE,'')<>COALESCE(OLD.NACIONALIDADE,'')) THEN TXT=TXT||',NACIONALIDADE = '||COALESCE(''''||NEW.NACIONALIDADE||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE NACIONALIDADE SET ID_NACIONALIDADE = '''||NEW.ID_NACIONALIDADE||''''||TXT||' WHERE ID_NACIONALIDADE = '''||NEW.ID_NACIONALIDADE||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: NACIONALIDADE_BI0 */
CREATE TRIGGER NACIONALIDADE_BI0 FOR NACIONALIDADE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_nacionalidade IS null or (new.id_nacionalidade = 0)  ) then
    new.id_nacionalidade = gen_id (cod_up, 0) || gen_id (id_nacionalidade, 1);
end
^

/* Trigger: PADRAO_AD_SINCRONISMO */
CREATE TRIGGER PADRAO_AD_SINCRONISMO FOR PADRAO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8290

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM PADRAO WHERE IDPADRAO = '||OLD.IDPADRAO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: PADRAO_AI_SINCRONISMO */
CREATE TRIGGER PADRAO_AI_SINCRONISMO FOR PADRAO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8290

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO PADRAO (IDPADRAO,'
||' COD_UP,'
||' SISTEMA,'
||' NOME_PAVILHAO,'
||' NOME_GALERIA,'
||' NOME_SOLARIO,'
||' NOME_CELA,'
||' NUMERO_VISITANTES) VALUES ('
||COALESCE(NEW.IDPADRAO,'NULL')||','
||COALESCE(NEW.COD_UP,'NULL')||','
||COALESCE(''''||NEW.SISTEMA||'''','NULL')||','
||COALESCE(''''||NEW.NOME_PAVILHAO||'''','NULL')||','
||COALESCE(''''||NEW.NOME_GALERIA||'''','NULL')||','
||COALESCE(''''||NEW.NOME_SOLARIO||'''','NULL')||','
||COALESCE(''''||NEW.NOME_CELA||'''','NULL')||','
||COALESCE(NEW.NUMERO_VISITANTES,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: PADRAO_AU_SINCRONISMO */
CREATE TRIGGER PADRAO_AU_SINCRONISMO FOR PADRAO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8290
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.COD_UP,'')<>COALESCE(OLD.COD_UP,'')) THEN TXT=TXT||',COD_UP = '||COALESCE(NEW.COD_UP,'NULL');
IF (COALESCE(NEW.SISTEMA,'')<>COALESCE(OLD.SISTEMA,'')) THEN TXT=TXT||',SISTEMA = '||COALESCE(''''||NEW.SISTEMA||'''','NULL');
IF (COALESCE(NEW.NOME_PAVILHAO,'')<>COALESCE(OLD.NOME_PAVILHAO,'')) THEN TXT=TXT||',NOME_PAVILHAO = '||COALESCE(''''||NEW.NOME_PAVILHAO||'''','NULL');
IF (COALESCE(NEW.NOME_GALERIA,'')<>COALESCE(OLD.NOME_GALERIA,'')) THEN TXT=TXT||',NOME_GALERIA = '||COALESCE(''''||NEW.NOME_GALERIA||'''','NULL');
IF (COALESCE(NEW.NOME_SOLARIO,'')<>COALESCE(OLD.NOME_SOLARIO,'')) THEN TXT=TXT||',NOME_SOLARIO = '||COALESCE(''''||NEW.NOME_SOLARIO||'''','NULL');
IF (COALESCE(NEW.NOME_CELA,'')<>COALESCE(OLD.NOME_CELA,'')) THEN TXT=TXT||',NOME_CELA = '||COALESCE(''''||NEW.NOME_CELA||'''','NULL');
IF (COALESCE(NEW.NUMERO_VISITANTES,'')<>COALESCE(OLD.NUMERO_VISITANTES,'')) THEN TXT=TXT||',NUMERO_VISITANTES = '||COALESCE(NEW.NUMERO_VISITANTES,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE PADRAO SET IDPADRAO = '''||NEW.IDPADRAO||''''||TXT||' WHERE IDPADRAO = '''||NEW.IDPADRAO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: PADRAO_BI0 */
CREATE TRIGGER PADRAO_BI0 FOR PADRAO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
  if (NEW.idpadrao IS null or (new.idpadrao = 0)  ) then
    new.idpadrao = gen_id (cod_up, 0) || gen_id (idpadrao, 1);
end
^

/* Trigger: PAVILHAO_AD_SINCRONISMO */
CREATE TRIGGER PAVILHAO_AD_SINCRONISMO FOR PAVILHAO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8290

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM PAVILHAO WHERE ID_PAVILHAO = '||OLD.ID_PAVILHAO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: PAVILHAO_AI_SINCRONISMO */
CREATE TRIGGER PAVILHAO_AI_SINCRONISMO FOR PAVILHAO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8290

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO PAVILHAO (ID_PAVILHAO,'
||' PAVILHAO,'
||' ID_UP) VALUES ('
||COALESCE(NEW.ID_PAVILHAO,'NULL')||','
||COALESCE(''''||NEW.PAVILHAO||'''','NULL')||','
||COALESCE(NEW.ID_UP,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: PAVILHAO_AU_SINCRONISMO */
CREATE TRIGGER PAVILHAO_AU_SINCRONISMO FOR PAVILHAO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8290
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.PAVILHAO,'')<>COALESCE(OLD.PAVILHAO,'')) THEN TXT=TXT||',PAVILHAO = '||COALESCE(''''||NEW.PAVILHAO||'''','NULL');
IF (COALESCE(NEW.ID_UP,'')<>COALESCE(OLD.ID_UP,'')) THEN TXT=TXT||',ID_UP = '||COALESCE(NEW.ID_UP,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE PAVILHAO SET ID_PAVILHAO = '''||NEW.ID_PAVILHAO||''''||TXT||' WHERE ID_PAVILHAO = '''||NEW.ID_PAVILHAO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: PAVILHAO_BI0 */
CREATE TRIGGER PAVILHAO_BI0 FOR PAVILHAO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_pavilhao IS null or (new.id_pavilhao = 0)  ) then
    new.id_pavilhao = gen_id (cod_up, 0) || gen_id (id_pavilhao, 1);
end
^

/* Trigger: PROCEDENCIA_AD_SINCRONISMO */
CREATE TRIGGER PROCEDENCIA_AD_SINCRONISMO FOR PROCEDENCIA
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM PROCEDENCIA WHERE ID_PROCEDENCIA = '||OLD.ID_PROCEDENCIA||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: PROCEDENCIA_AI_SINCRONISMO */
CREATE TRIGGER PROCEDENCIA_AI_SINCRONISMO FOR PROCEDENCIA
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO PROCEDENCIA (ID_PROCEDENCIA,'
||' PROEDENCIA,'
||' CAPITAL) VALUES ('
||COALESCE(NEW.ID_PROCEDENCIA,'NULL')||','
||COALESCE(''''||NEW.PROEDENCIA||'''','NULL')||','
||COALESCE(''''||NEW.CAPITAL||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: PROCEDENCIA_AU_SINCRONISMO */
CREATE TRIGGER PROCEDENCIA_AU_SINCRONISMO FOR PROCEDENCIA
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.PROEDENCIA,'')<>COALESCE(OLD.PROEDENCIA,'')) THEN TXT=TXT||',PROEDENCIA = '||COALESCE(''''||NEW.PROEDENCIA||'''','NULL');
IF (COALESCE(NEW.CAPITAL,'')<>COALESCE(OLD.CAPITAL,'')) THEN TXT=TXT||',CAPITAL = '||COALESCE(''''||NEW.CAPITAL||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE PROCEDENCIA SET ID_PROCEDENCIA = '''||NEW.ID_PROCEDENCIA||''''||TXT||' WHERE ID_PROCEDENCIA = '''||NEW.ID_PROCEDENCIA||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: PROCEDENCIA_BI0 */
CREATE TRIGGER PROCEDENCIA_BI0 FOR PROCEDENCIA
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_procedencia IS null or (new.id_procedencia = 0)  ) then
    new.id_procedencia = gen_id (cod_up, 0) || gen_id (id_procedencia, 1);
end
^

/* Trigger: PROCESSO_AD_SINCRONISMO */
CREATE TRIGGER PROCESSO_AD_SINCRONISMO FOR PROCESSO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM PROCESSO WHERE ID_PROCESSO = '||OLD.ID_PROCESSO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: PROCESSO_AI_SINCRONISMO */
CREATE TRIGGER PROCESSO_AI_SINCRONISMO FOR PROCESSO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO PROCESSO (ID_PROCESSO,'
||' ID_INTERNO,'
||' DATA_PROCESSO,'
||' ID_ARTIGO,'
||' DESCRICAO_PROCESSO) VALUES ('
||COALESCE(NEW.ID_PROCESSO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.DATA_PROCESSO||'''','NULL')||','
||COALESCE(NEW.ID_ARTIGO,'NULL')||','
||COALESCE(''''||NEW.DESCRICAO_PROCESSO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: PROCESSO_AU_SINCRONISMO */
CREATE TRIGGER PROCESSO_AU_SINCRONISMO FOR PROCESSO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.DATA_PROCESSO,'')<>COALESCE(OLD.DATA_PROCESSO,'')) THEN TXT=TXT||',DATA_PROCESSO = '||COALESCE(''''||NEW.DATA_PROCESSO||'''','NULL');
IF (COALESCE(NEW.ID_ARTIGO,'')<>COALESCE(OLD.ID_ARTIGO,'')) THEN TXT=TXT||',ID_ARTIGO = '||COALESCE(NEW.ID_ARTIGO,'NULL');
IF (COALESCE(NEW.DESCRICAO_PROCESSO,'')<>COALESCE(OLD.DESCRICAO_PROCESSO,'')) THEN TXT=TXT||',DESCRICAO_PROCESSO = '||COALESCE(''''||NEW.DESCRICAO_PROCESSO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE PROCESSO SET ID_PROCESSO = '''||NEW.ID_PROCESSO||''''||TXT||' WHERE ID_PROCESSO = '''||NEW.ID_PROCESSO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: PROCESSO_BI0 */
CREATE TRIGGER PROCESSO_BI0 FOR PROCESSO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
     if (NEW.id_processo IS null or (new.id_processo = 0)  ) then
    new.id_processo = gen_id (cod_up, 0) || gen_id (id_processo, 1);
end
^

/* Trigger: PROFISSAO_AD_SINCRONISMO */
CREATE TRIGGER PROFISSAO_AD_SINCRONISMO FOR PROFISSAO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM PROFISSAO WHERE ID_PROFISSAO = '||OLD.ID_PROFISSAO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: PROFISSAO_AI_SINCRONISMO */
CREATE TRIGGER PROFISSAO_AI_SINCRONISMO FOR PROFISSAO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO PROFISSAO (ID_PROFISSAO,'
||' PROFISSAO) VALUES ('
||COALESCE(NEW.ID_PROFISSAO,'NULL')||','
||COALESCE(''''||NEW.PROFISSAO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: PROFISSAO_AU_SINCRONISMO */
CREATE TRIGGER PROFISSAO_AU_SINCRONISMO FOR PROFISSAO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8450
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.PROFISSAO,'')<>COALESCE(OLD.PROFISSAO,'')) THEN TXT=TXT||',PROFISSAO = '||COALESCE(''''||NEW.PROFISSAO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE PROFISSAO SET ID_PROFISSAO = '''||NEW.ID_PROFISSAO||''''||TXT||' WHERE ID_PROFISSAO = '''||NEW.ID_PROFISSAO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: PROFISSAO_BI0 */
CREATE TRIGGER PROFISSAO_BI0 FOR PROFISSAO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_profissao IS null or (new.id_profissao = 0)  ) then
    new.id_profissao = gen_id (cod_up, 0) || gen_id (id_proffissao, 1);
end
^

/* Trigger: RACA_AD_SINCRONISMO */
CREATE TRIGGER RACA_AD_SINCRONISMO FOR RACA
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM RACA WHERE ID_RACA = '||OLD.ID_RACA||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: RACA_AI_SINCRONISMO */
CREATE TRIGGER RACA_AI_SINCRONISMO FOR RACA
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO RACA (ID_RACA,'
||' RACA) VALUES ('
||COALESCE(NEW.ID_RACA,'NULL')||','
||COALESCE(''''||NEW.RACA||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: RACA_AU_SINCRONISMO */
CREATE TRIGGER RACA_AU_SINCRONISMO FOR RACA
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.RACA,'')<>COALESCE(OLD.RACA,'')) THEN TXT=TXT||',RACA = '||COALESCE(''''||NEW.RACA||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE RACA SET ID_RACA = '''||NEW.ID_RACA||''''||TXT||' WHERE ID_RACA = '''||NEW.ID_RACA||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: RACA_BI0 */
CREATE TRIGGER RACA_BI0 FOR RACA
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_raca IS null or (new.id_raca = 0)  ) then
    new.id_raca = gen_id (cod_up, 0) || gen_id (id_raca, 1);
end
^

/* Trigger: SERIE_ESTUDO_AD_SINCRONISMO */
CREATE TRIGGER SERIE_ESTUDO_AD_SINCRONISMO FOR SERIE_ESTUDO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM SERIE_ESTUDO WHERE ID_SERIE_ESTUDO = '||OLD.ID_SERIE_ESTUDO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: SERIE_ESTUDO_AI_SINCRONISMO */
CREATE TRIGGER SERIE_ESTUDO_AI_SINCRONISMO FOR SERIE_ESTUDO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO SERIE_ESTUDO (ID_SERIE_ESTUDO,'
||' SERIE_ESTUDO) VALUES ('
||COALESCE(NEW.ID_SERIE_ESTUDO,'NULL')||','
||COALESCE(''''||NEW.SERIE_ESTUDO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: SERIE_ESTUDO_AU_SINCRONISMO */
CREATE TRIGGER SERIE_ESTUDO_AU_SINCRONISMO FOR SERIE_ESTUDO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.SERIE_ESTUDO,'')<>COALESCE(OLD.SERIE_ESTUDO,'')) THEN TXT=TXT||',SERIE_ESTUDO = '||COALESCE(''''||NEW.SERIE_ESTUDO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE SERIE_ESTUDO SET ID_SERIE_ESTUDO = '''||NEW.ID_SERIE_ESTUDO||''''||TXT||' WHERE ID_SERIE_ESTUDO = '''||NEW.ID_SERIE_ESTUDO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: SERIE_ESTUDO_BI0 */
CREATE TRIGGER SERIE_ESTUDO_BI0 FOR SERIE_ESTUDO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_serie_estudo IS null or (new.id_serie_estudo = 0)  ) then
    new.id_serie_estudo = gen_id (cod_up, 0) || gen_id (idsereiestudo, 1);
end
^

/* Trigger: SETOR_TRABALHO_BI0 */
CREATE TRIGGER SETOR_TRABALHO_BI0 FOR SETOR_TRABALHO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_setor_trabalho IS null or (new.id_setor_trabalho = 0)  ) then
    new.id_setor_trabalho = gen_id (cod_up, 0) || gen_id (id_setor_trabalho, 1);

end
^

/* Trigger: SINCRONISMO_AD0 */
CREATE TRIGGER SINCRONISMO_AD0 FOR SINCRONISMO
ACTIVE AFTER DELETE POSITION 0
AS
begin

insert into backup_sincronismo (idbackup_sincronismo, 
                                idsincronismo, 
                                idsincronismo_controle, 
                                script, 
                                status, 
                                ordem, 
                                data_hora, 
                                retorno)
values (0,
        OLD.idsincronismo, 
        OLD.idsincronismo_controle, 
        OLD.script, 
        OLD.status, 
        OLD.ordem, 
        OLD.data_hora, 
        OLD.retorno) ;

end
^

/* Trigger: SINCRONISMO_BI0 */
CREATE TRIGGER SINCRONISMO_BI0 FOR SINCRONISMO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  IF ((NEW.IDSINCRONISMO = 0) OR (NEW.IDSINCRONISMO IS NULL))  THEN
      NEW.IDSINCRONISMO = GEN_ID(cod_up,0)||GEN_ID(IDSINCRONISMO_GEN, 1);
end
^

/* Trigger: SINCRONISMO_BLOB_AD0 */
CREATE TRIGGER SINCRONISMO_BLOB_AD0 FOR SINCRONISMO_BLOB
ACTIVE AFTER DELETE POSITION 0
AS
begin
  INSERT INTO BACKUP_SINCRONISMO_BLOB (IDBACKUP_SINCRONISMO_BLOB, DATA_HORA_BACKUP, IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
  VALUES (0, 'NOW', OLD.IDSINCRONISMO_BLOB, OLD.IDSINCRONISMO_CONTROLE, OLD.DATA_HORA, OLD.USUARIO, OLD.TABELA, OLD.CAMPO, OLD.NOME_PK, OLD.VALOR_PK);
end
^

/* Trigger: SINCRONISMO_BLOB_BI0 */
CREATE TRIGGER SINCRONISMO_BLOB_BI0 FOR SINCRONISMO_BLOB
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  NEW.USUARIO = USER;
  NEW.DATA_HORA = 'NOW';
  NEW.IDSINCRONISMO_BLOB = GEN_ID(IDSINCRONISMO_BLOB_GEN,1);
END
^

/* Trigger: SINCRONISMO_CONTROLE_BI0 */
CREATE TRIGGER SINCRONISMO_CONTROLE_BI0 FOR SINCRONISMO_CONTROLE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  IF ((NEW.IDSINCRONISMO_CONTROLE = 0) OR (NEW.IDSINCRONISMO_CONTROLE IS NULL))  THEN
      NEW.IDSINCRONISMO_CONTROLE = GEN_ID(cod_up,0)||GEN_ID(IDSINCRONISMO_CONTROLE_GEN, 1);
end
^

/* Trigger: SOLARIO_AD_SINCRONISMO */
CREATE TRIGGER SOLARIO_AD_SINCRONISMO FOR SOLARIO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM SOLARIO WHERE ID_SOLARIO = '||OLD.ID_SOLARIO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: SOLARIO_AI_SINCRONISMO */
CREATE TRIGGER SOLARIO_AI_SINCRONISMO FOR SOLARIO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO SOLARIO (ID_SOLARIO,'
||' SOLARIO,'
||' IDGALERIA,'
||' IDPAVILHAO) VALUES ('
||COALESCE(NEW.ID_SOLARIO,'NULL')||','
||COALESCE(''''||NEW.SOLARIO||'''','NULL')||','
||COALESCE(NEW.IDGALERIA,'NULL')||','
||COALESCE(NEW.IDPAVILHAO,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: SOLARIO_AU_SINCRONISMO */
CREATE TRIGGER SOLARIO_AU_SINCRONISMO FOR SOLARIO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8600
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.SOLARIO,'')<>COALESCE(OLD.SOLARIO,'')) THEN TXT=TXT||',SOLARIO = '||COALESCE(''''||NEW.SOLARIO||'''','NULL');
IF (COALESCE(NEW.IDGALERIA,'')<>COALESCE(OLD.IDGALERIA,'')) THEN TXT=TXT||',IDGALERIA = '||COALESCE(NEW.IDGALERIA,'NULL');
IF (COALESCE(NEW.IDPAVILHAO,'')<>COALESCE(OLD.IDPAVILHAO,'')) THEN TXT=TXT||',IDPAVILHAO = '||COALESCE(NEW.IDPAVILHAO,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE SOLARIO SET ID_SOLARIO = '''||NEW.ID_SOLARIO||''''||TXT||' WHERE ID_SOLARIO = '''||NEW.ID_SOLARIO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: SOLARIO_BI0 */
CREATE TRIGGER SOLARIO_BI0 FOR SOLARIO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
    if (NEW.id_solario IS null or (new.id_solario = 0)  ) then
    new.id_solario = gen_id (cod_up, 0) || gen_id (id_solario, 1);
end
^

/* Trigger: TRABALHO_AD_SINCRONISMO */
CREATE TRIGGER TRABALHO_AD_SINCRONISMO FOR TRABALHO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8760

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM TRABALHO WHERE ID_TRABALHO = '||OLD.ID_TRABALHO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: TRABALHO_AI_SINCRONISMO */
CREATE TRIGGER TRABALHO_AI_SINCRONISMO FOR TRABALHO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8760

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO TRABALHO (ID_TRABALHO,'
||' ID_INTERNO,'
||' ID_SETOR_TRABALHO,'
||' ID_FUNCAO_INTERNO,'
||' DATA_TRABALHO,'
||' OBSERVACAO_TRABALHO,'
||' ID_UNIDADE_PENAL) VALUES ('
||COALESCE(NEW.ID_TRABALHO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL')||','
||COALESCE(NEW.ID_FUNCAO_INTERNO,'NULL')||','
||COALESCE(''''||NEW.DATA_TRABALHO||'''','NULL')||','
||COALESCE(''''||NEW.OBSERVACAO_TRABALHO||'''','NULL')||','
||COALESCE(NEW.ID_UNIDADE_PENAL,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: TRABALHO_AU_SINCRONISMO */
CREATE TRIGGER TRABALHO_AU_SINCRONISMO FOR TRABALHO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8760
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.ID_SETOR_TRABALHO,'')<>COALESCE(OLD.ID_SETOR_TRABALHO,'')) THEN TXT=TXT||',ID_SETOR_TRABALHO = '||COALESCE(NEW.ID_SETOR_TRABALHO,'NULL');
IF (COALESCE(NEW.ID_FUNCAO_INTERNO,'')<>COALESCE(OLD.ID_FUNCAO_INTERNO,'')) THEN TXT=TXT||',ID_FUNCAO_INTERNO = '||COALESCE(NEW.ID_FUNCAO_INTERNO,'NULL');
IF (COALESCE(NEW.DATA_TRABALHO,'')<>COALESCE(OLD.DATA_TRABALHO,'')) THEN TXT=TXT||',DATA_TRABALHO = '||COALESCE(''''||NEW.DATA_TRABALHO||'''','NULL');
IF (COALESCE(NEW.OBSERVACAO_TRABALHO,'')<>COALESCE(OLD.OBSERVACAO_TRABALHO,'')) THEN TXT=TXT||',OBSERVACAO_TRABALHO = '||COALESCE(''''||NEW.OBSERVACAO_TRABALHO||'''','NULL');
IF (COALESCE(NEW.ID_UNIDADE_PENAL,'')<>COALESCE(OLD.ID_UNIDADE_PENAL,'')) THEN TXT=TXT||',ID_UNIDADE_PENAL = '||COALESCE(NEW.ID_UNIDADE_PENAL,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE TRABALHO SET ID_TRABALHO = '''||NEW.ID_TRABALHO||''''||TXT||' WHERE ID_TRABALHO = '''||NEW.ID_TRABALHO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: TRABALHO_BI0 */
CREATE TRIGGER TRABALHO_BI0 FOR TRABALHO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
      if (NEW.id_trabalho IS null or (new.id_trabalho = 0)  ) then
    new.id_trabalho = gen_id (cod_up, 0) || gen_id (id_trabalho, 1);
end
^

/* Trigger: UNIDADE_PENAL_AD_SINCRONISMO */
CREATE TRIGGER UNIDADE_PENAL_AD_SINCRONISMO FOR UNIDADE_PENAL
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8760

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM UNIDADE_PENAL WHERE ID_UP = '||OLD.ID_UP||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: UNIDADE_PENAL_AI_SINCRONISMO */
CREATE TRIGGER UNIDADE_PENAL_AI_SINCRONISMO FOR UNIDADE_PENAL
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8760

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO UNIDADE_PENAL (ID_UP,'
||' NOME_UP,'
||' ENDERECO,'
||' NUMERO,'
||' BAIRRO,'
||' COMPLEMENTO,'
||' CEP,'
||' ID_CIDADE,'
||' FONE,'
||' FAX,'
||' CONTATO,'
||' FOTO,'
||' CAPITAL,'
||' REGIAO,'
||' SIGLA,'
||' REGIME,'
||' GENERO) VALUES ('
||COALESCE(NEW.ID_UP,'NULL')||','
||COALESCE(''''||NEW.NOME_UP||'''','NULL')||','
||COALESCE(''''||NEW.ENDERECO||'''','NULL')||','
||COALESCE(''''||NEW.NUMERO||'''','NULL')||','
||COALESCE(''''||NEW.BAIRRO||'''','NULL')||','
||COALESCE(''''||NEW.COMPLEMENTO||'''','NULL')||','
||COALESCE(''''||NEW.CEP||'''','NULL')||','
||COALESCE(NEW.ID_CIDADE,'NULL')||','
||COALESCE(''''||NEW.FONE||'''','NULL')||','
||COALESCE(''''||NEW.FAX||'''','NULL')||','
||COALESCE(''''||NEW.CONTATO||'''','NULL')||','
||COALESCE(''''||NEW.FOTO||'''','NULL')||','
||COALESCE(''''||NEW.CAPITAL||'''','NULL')||','
||COALESCE(''''||NEW.REGIAO||'''','NULL')||','
||COALESCE(''''||NEW.SIGLA||'''','NULL')||','
||COALESCE(''''||NEW.REGIME||'''','NULL')||','
||COALESCE(''''||NEW.GENERO||'''','NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: UNIDADE_PENAL_AU_SINCRONISMO */
CREATE TRIGGER UNIDADE_PENAL_AU_SINCRONISMO FOR UNIDADE_PENAL
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8760
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.NOME_UP,'')<>COALESCE(OLD.NOME_UP,'')) THEN TXT=TXT||',NOME_UP = '||COALESCE(''''||NEW.NOME_UP||'''','NULL');
IF (COALESCE(NEW.ENDERECO,'')<>COALESCE(OLD.ENDERECO,'')) THEN TXT=TXT||',ENDERECO = '||COALESCE(''''||NEW.ENDERECO||'''','NULL');
IF (COALESCE(NEW.NUMERO,'')<>COALESCE(OLD.NUMERO,'')) THEN TXT=TXT||',NUMERO = '||COALESCE(''''||NEW.NUMERO||'''','NULL');
IF (COALESCE(NEW.BAIRRO,'')<>COALESCE(OLD.BAIRRO,'')) THEN TXT=TXT||',BAIRRO = '||COALESCE(''''||NEW.BAIRRO||'''','NULL');
IF (COALESCE(NEW.COMPLEMENTO,'')<>COALESCE(OLD.COMPLEMENTO,'')) THEN TXT=TXT||',COMPLEMENTO = '||COALESCE(''''||NEW.COMPLEMENTO||'''','NULL');
IF (COALESCE(NEW.CEP,'')<>COALESCE(OLD.CEP,'')) THEN TXT=TXT||',CEP = '||COALESCE(''''||NEW.CEP||'''','NULL');
IF (COALESCE(NEW.ID_CIDADE,'')<>COALESCE(OLD.ID_CIDADE,'')) THEN TXT=TXT||',ID_CIDADE = '||COALESCE(NEW.ID_CIDADE,'NULL');
IF (COALESCE(NEW.FONE,'')<>COALESCE(OLD.FONE,'')) THEN TXT=TXT||',FONE = '||COALESCE(''''||NEW.FONE||'''','NULL');
IF (COALESCE(NEW.FAX,'')<>COALESCE(OLD.FAX,'')) THEN TXT=TXT||',FAX = '||COALESCE(''''||NEW.FAX||'''','NULL');
IF (COALESCE(NEW.CONTATO,'')<>COALESCE(OLD.CONTATO,'')) THEN TXT=TXT||',CONTATO = '||COALESCE(''''||NEW.CONTATO||'''','NULL');
IF (COALESCE(NEW.FOTO,'')<>COALESCE(OLD.FOTO,'')) THEN TXT=TXT||',FOTO = '||COALESCE(''''||NEW.FOTO||'''','NULL');
IF (COALESCE(NEW.CAPITAL,'')<>COALESCE(OLD.CAPITAL,'')) THEN TXT=TXT||',CAPITAL = '||COALESCE(''''||NEW.CAPITAL||'''','NULL');
IF (COALESCE(NEW.REGIAO,'')<>COALESCE(OLD.REGIAO,'')) THEN TXT=TXT||',REGIAO = '||COALESCE(''''||NEW.REGIAO||'''','NULL');
IF (COALESCE(NEW.SIGLA,'')<>COALESCE(OLD.SIGLA,'')) THEN TXT=TXT||',SIGLA = '||COALESCE(''''||NEW.SIGLA||'''','NULL');
IF (COALESCE(NEW.REGIME,'')<>COALESCE(OLD.REGIME,'')) THEN TXT=TXT||',REGIME = '||COALESCE(''''||NEW.REGIME||'''','NULL');
IF (COALESCE(NEW.GENERO,'')<>COALESCE(OLD.GENERO,'')) THEN TXT=TXT||',GENERO = '||COALESCE(''''||NEW.GENERO||'''','NULL');
IF (TXT <> '') THEN TXT = 'UPDATE UNIDADE_PENAL SET ID_UP = '''||NEW.ID_UP||''''||TXT||' WHERE ID_UP = '''||NEW.ID_UP||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: UNIDADE_PENAL_BI0 */
CREATE TRIGGER UNIDADE_PENAL_BI0 FOR UNIDADE_PENAL
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  /* Trigger text */
   if (NEW.id_up IS null or (new.id_up = 0)  ) then
    new.id_up = gen_id (cod_up, 0) || gen_id (id_unidade_penal, 1);
end
^

/* Trigger: VISITANTE_AD_SINCRONISMO */
CREATE TRIGGER VISITANTE_AD_SINCRONISMO FOR VISITANTE
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM VISITANTE WHERE ID_VISITANTE = '||OLD.ID_VISITANTE||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: VISITANTE_AI_MOVDIARIO */
CREATE TRIGGER VISITANTE_AI_MOVDIARIO FOR VISITANTE
ACTIVE AFTER INSERT POSITION 0
AS
begin
--  insert into mov_diario_visitantes (id_mov_diario_visitantes, id_visitante, nome_visitante, numero_carteirinha, cpf, rg, orgao_expedidor, sexo, data_visita, hora_visita, ordem_visita)
--  values (0, new.id_visitante, new.visitante, new.numero_carteirinha, new.cpf, new.rg, new.orgao_expedidor, new.sexo, current_date, current_time, 0);
end
^

/* Trigger: VISITANTE_AI_SINCRONISMO */
CREATE TRIGGER VISITANTE_AI_SINCRONISMO FOR VISITANTE
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO VISITANTE (ID_VISITANTE,'
||' VISITANTE,'
||' ID_GRAU_PARENTESCO,'
||' ID_INTERNO,'
||' NUMERO_CARTEIRINHA,'
||' CPF,'
||' RG,'
||' ORGAO_EXPEDIDOR,'
||' SEXO,'
||' DATA_CADASTRO,'
||' STATUS,'
||' DATA_ULT_VISITA,'
||' MOTIVO_INATIVO,'
||' QUANTIDADE_MENOR) VALUES ('
||COALESCE(NEW.ID_VISITANTE,'NULL')||','
||COALESCE(''''||NEW.VISITANTE||'''','NULL')||','
||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(''''||NEW.NUMERO_CARTEIRINHA||'''','NULL')||','
||COALESCE(''''||NEW.CPF||'''','NULL')||','
||COALESCE(''''||NEW.RG||'''','NULL')||','
||COALESCE(''''||NEW.ORGAO_EXPEDIDOR||'''','NULL')||','
||COALESCE(''''||NEW.SEXO||'''','NULL')||','
||COALESCE(''''||NEW.DATA_CADASTRO||'''','NULL')||','
||COALESCE(''''||NEW.STATUS||'''','NULL')||','
||COALESCE(''''||NEW.DATA_ULT_VISITA||'''','NULL')||','
||COALESCE(''''||NEW.MOTIVO_INATIVO||'''','NULL')||','
||COALESCE(NEW.QUANTIDADE_MENOR,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: VISITANTE_AU_SINCRONISMO */
CREATE TRIGGER VISITANTE_AU_SINCRONISMO FOR VISITANTE
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.VISITANTE,'')<>COALESCE(OLD.VISITANTE,'')) THEN TXT=TXT||',VISITANTE = '||COALESCE(''''||NEW.VISITANTE||'''','NULL');
IF (COALESCE(NEW.ID_GRAU_PARENTESCO,'')<>COALESCE(OLD.ID_GRAU_PARENTESCO,'')) THEN TXT=TXT||',ID_GRAU_PARENTESCO = '||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL');
IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.NUMERO_CARTEIRINHA,'')<>COALESCE(OLD.NUMERO_CARTEIRINHA,'')) THEN TXT=TXT||',NUMERO_CARTEIRINHA = '||COALESCE(''''||NEW.NUMERO_CARTEIRINHA||'''','NULL');
IF (COALESCE(NEW.CPF,'')<>COALESCE(OLD.CPF,'')) THEN TXT=TXT||',CPF = '||COALESCE(''''||NEW.CPF||'''','NULL');
IF (COALESCE(NEW.RG,'')<>COALESCE(OLD.RG,'')) THEN TXT=TXT||',RG = '||COALESCE(''''||NEW.RG||'''','NULL');
IF (COALESCE(NEW.ORGAO_EXPEDIDOR,'')<>COALESCE(OLD.ORGAO_EXPEDIDOR,'')) THEN TXT=TXT||',ORGAO_EXPEDIDOR = '||COALESCE(''''||NEW.ORGAO_EXPEDIDOR||'''','NULL');
IF (COALESCE(NEW.SEXO,'')<>COALESCE(OLD.SEXO,'')) THEN TXT=TXT||',SEXO = '||COALESCE(''''||NEW.SEXO||'''','NULL');
IF (COALESCE(NEW.DATA_CADASTRO,'')<>COALESCE(OLD.DATA_CADASTRO,'')) THEN TXT=TXT||',DATA_CADASTRO = '||COALESCE(''''||NEW.DATA_CADASTRO||'''','NULL');
IF (COALESCE(NEW.STATUS,'')<>COALESCE(OLD.STATUS,'')) THEN TXT=TXT||',STATUS = '||COALESCE(''''||NEW.STATUS||'''','NULL');
IF (COALESCE(NEW.DATA_ULT_VISITA,'')<>COALESCE(OLD.DATA_ULT_VISITA,'')) THEN TXT=TXT||',DATA_ULT_VISITA = '||COALESCE(''''||NEW.DATA_ULT_VISITA||'''','NULL');
IF (COALESCE(NEW.MOTIVO_INATIVO,'')<>COALESCE(OLD.MOTIVO_INATIVO,'')) THEN TXT=TXT||',MOTIVO_INATIVO = '||COALESCE(''''||NEW.MOTIVO_INATIVO||'''','NULL');
IF (COALESCE(NEW.QUANTIDADE_MENOR,'')<>COALESCE(OLD.QUANTIDADE_MENOR,'')) THEN TXT=TXT||',QUANTIDADE_MENOR = '||COALESCE(NEW.QUANTIDADE_MENOR,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE VISITANTE SET ID_VISITANTE = '''||NEW.ID_VISITANTE||''''||TXT||' WHERE ID_VISITANTE = '''||NEW.ID_VISITANTE||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: VISITANTE_BI0 */
CREATE TRIGGER VISITANTE_BI0 FOR VISITANTE
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  NEW.status = 'A';
  new.data_cadastro = current_date ;
--  new.data_ult_visita = current_date ;
  /* Trigger text */
    if (NEW.id_visitante IS null or (new.id_visitante = 0)  ) then
    new.id_visitante = gen_id (cod_up, 0) || gen_id (id_visitante, 1);
end
^

/* Trigger: VISITANTE_BIU0 */
CREATE TRIGGER VISITANTE_BIU0 FOR VISITANTE
ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
BEGIN

 INSERT INTO BACKUP_VISITANTE (IDBACKUP_VISITANTE, 
                               DATA_HORA, 
                               ID_VISITANTE, 
                               VISITANTE, 
                               ID_GRAU_PARENTESCO, 
                               ID_INTERNO, 
                               NUMERO_CARTEIRINHA, 
                               CPF, 
                               RG, 
                               ORGAO_EXPEDIDOR, 
                               SEXO, 
                               DATA_CADASTRO, 
                               STATUS, 
                               DATA_ULT_VISITA, 
                               TIPO_REGISTRO,
                               MOTIVO_INATIVO)
 VALUES (0,
         'NOW',
         NEW.ID_VISITANTE, 
         NEW.VISITANTE, 
         NEW.ID_GRAU_PARENTESCO, 
         NEW.ID_INTERNO, 
         NEW.NUMERO_CARTEIRINHA, 
         NEW.CPF, 
         NEW.RG, 
         NEW.ORGAO_EXPEDIDOR, 
         NEW.SEXO, 
         NEW.DATA_CADASTRO, 
         NEW.STATUS, 
         NEW.DATA_ULT_VISITA, 
         IIF(INSERTING,'I','U'),
         NEW.MOTIVO_INATIVO);

END
^

/* Trigger: VISITANTE_BU_DATA_VISITA */
CREATE TRIGGER VISITANTE_BU_DATA_VISITA FOR VISITANTE
ACTIVE BEFORE UPDATE POSITION 0
AS
begin
if (updating) then
begin
    if (new.data_ult_visita is not null) then
    begin
        if ((new.data_ult_visita <> old.data_ult_visita) or (old.data_ult_visita is null))  then
        begin
          insert into mov_diario_visitantes (id_mov_diario_visitantes, id_visitante, nome_visitante, numero_carteirinha, cpf, rg, orgao_expedidor, sexo, data_visita, hora_visita, ordem_visita)
          values (0, new.id_visitante, new.visitante, new.numero_carteirinha, new.cpf, new.rg, new.orgao_expedidor, new.sexo, current_date, current_time, 0);
        end
    end
end

end
^

/* Trigger: VISITANTE_INTERNO_AD_SINCRONISM */
CREATE TRIGGER VISITANTE_INTERNO_AD_SINCRONISM FOR VISITANTE_INTERNO
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = 'DELETE FROM VISITANTE_INTERNO WHERE ID_VISITANTE_INTERNO = '||OLD.ID_VISITANTE_INTERNO||';';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
   END

END
^

/* Trigger: VISITANTE_INTERNO_AI_SINCRONISM */
CREATE TRIGGER VISITANTE_INTERNO_AI_SINCRONISM FOR VISITANTE_INTERNO
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = 'INSERT INTO VISITANTE_INTERNO (ID_VISITANTE_INTERNO,'
||' ID_VISITANTE,'
||' ID_INTERNO,'
||' ID_GRAU_PARENTESCO) VALUES ('
||COALESCE(NEW.ID_VISITANTE_INTERNO,'NULL')||','
||COALESCE(NEW.ID_VISITANTE,'NULL')||','
||COALESCE(NEW.ID_INTERNO,'NULL')||','
||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL')||');';
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = 'EMPRESA') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
     END
   END
END
^

/* Trigger: VISITANTE_INTERNO_AU_SINCRONISM */
CREATE TRIGGER VISITANTE_INTERNO_AU_SINCRONISM FOR VISITANTE_INTERNO
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '';

IF (COALESCE(NEW.ID_VISITANTE,'')<>COALESCE(OLD.ID_VISITANTE,'')) THEN TXT=TXT||',ID_VISITANTE = '||COALESCE(NEW.ID_VISITANTE,'NULL');
IF (COALESCE(NEW.ID_INTERNO,'')<>COALESCE(OLD.ID_INTERNO,'')) THEN TXT=TXT||',ID_INTERNO = '||COALESCE(NEW.ID_INTERNO,'NULL');
IF (COALESCE(NEW.ID_GRAU_PARENTESCO,'')<>COALESCE(OLD.ID_GRAU_PARENTESCO,'')) THEN TXT=TXT||',ID_GRAU_PARENTESCO = '||COALESCE(NEW.ID_GRAU_PARENTESCO,'NULL');
IF (TXT <> '') THEN TXT = 'UPDATE VISITANTE_INTERNO SET ID_VISITANTE_INTERNO = '''||NEW.ID_VISITANTE_INTERNO||''''||TXT||' WHERE ID_VISITANTE_INTERNO = '''||NEW.ID_VISITANTE_INTERNO||''' ;';

    IF (TXT<>'') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = 'EMPRESA') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,'A',0);
         END
       END
    END
END
^

/* Trigger: VISITANTE_INTERNO_BI0 */
CREATE TRIGGER VISITANTE_INTERNO_BI0 FOR VISITANTE_INTERNO
ACTIVE BEFORE INSERT POSITION 0
AS
begin
  if (NEW.id_visitante_interno IS NULL OR (NEW.id_visitante_interno = 0)) then
  BEGIN
    NEW.id_visitante_interno = GEN_ID(cod_up,0)||GEN_ID(ID_VISITANTE_INTERNO,1);
  END
end
^

/* Trigger: VISITANTE_IU_SINC_BLOB */
CREATE TRIGGER VISITANTE_IU_SINC_BLOB FOR VISITANTE
ACTIVE BEFORE INSERT OR UPDATE POSITION 999
AS
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: 2011-08-05 13:41:00.8920
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_BLOB_TRIGGER
   */
   IF (USER = 'SINCRONIZADOR') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE
   DO
   BEGIN

    IF (INSERTING) THEN
    BEGIN
      
        IF (NEW.FOTO IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'VISITANTE', 'FOTO', 'ID_VISITANTE', NEW.ID_VISITANTE);
        END

    END
    ELSE
    BEGIN
      
        IF (OLD.FOTO <> NEW.FOTO) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'VISITANTE', 'FOTO', 'ID_VISITANTE', NEW.ID_VISITANTE);
        END

    END

   END

END
^

SET TERM ; ^



/******************************************************************************/
/****                          Stored Procedures                           ****/
/******************************************************************************/


SET TERM ^ ;

ALTER PROCEDURE CALCULA_DIAS_UTEIS (
    DAT_INI DATE,
    DAT_FIM DATE,
    IGNORAR VARCHAR(10))
RETURNS (
    UTEIS INTEGER)
AS
declare variable contar integer;
declare variable dia date;
declare variable dia_semana char(1);
declare variable dias integer;
BEGIN
  -- FUNO PARA CALCULAR OS DIAS ENTRE DUAS DATAS
  DIAS = (DATEDIFF(DAY, DAT_INI, DAT_FIM));
  --INICIALIZA AS VARIAVEIS
  CONTAR = 0;
  UTEIS = 0;
  DIA = (:DAT_INI);
  --COMEA O COMANDO WHILE AT OS NUMERO DE DIAS MXIMO
  WHILE (:CONTAR <= :DIAS) DO BEGIN
     --ADICINIONA 1 DIA NA DATA
     DIA = (:DIA + 1);
     --EXTRAI O DIA DA SEMANA DA DATA
     DIA_SEMANA = EXTRACT (WEEKDAY FROM :DIA);
     --TAMBEM PODE-SE UTILIZAR A FUNO YEARDAY PARA SABER SE  ALGUM FERIADO
     --A = EXTRACT (YEARDAY FROM :DIA);
     --VERIFICA SE O DIA DA SEMANA NO  0=DOMINDO E 6=SABADO

     IF (POSITION(DIA_SEMANA IN IGNORAR)=0) THEN
        UTEIS = (:UTEIS + 1);

     --ADICIONA UM NUMERO NO CONTADOR
     CONTAR = (:CONTAR + 1);
  END
  SUSPEND;
END^


ALTER PROCEDURE NEW_PROCEDURE (
    CAMPO VARCHAR(16386))
AS
declare variable var_i integer;
declare variable var_x integer;
declare variable subs varchar(1);
begin
  /* Procedure Text */
--  var_i = length(campo);
  var_x = 0 ;
  while (var_x <= var_i) do
  begin
    subs = substring(campo from 1 for 1);
    var_x = var_x + 1 ;
  end
  suspend;
end^


ALTER PROCEDURE SP_CRIAR_TRIGGERS_TABELA (
    TABELA VARCHAR(31),
    PK_TABELA VARCHAR(31))
AS
declare variable txt varchar(32700);
declare variable nome_trigger varchar(31);
declare variable sql_trigger varchar(32700);
BEGIN

  NOME_TRIGGER = SUBSTR(TABELA||'_AI_SINCRONISMO',1,31);

  select retorno
  from SP_GERA_SCRIPT_INSERT_TRIGGER(:TABELA)
  into :sql_trigger;

    TXT = 'CREATE OR ALTER TRIGGER '||:NOME_TRIGGER||' FOR '||:TABELA||'
ACTIVE BEFORE INSERT POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: '||current_timestamp||'

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_INSERT_TRIGGER
   */
   IF (USER = ''SINCRONIZADOR'') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '||:sql_trigger||'
   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
   DO
   BEGIN
     IF (TIPO_CONTROLE = ''EMPRESA'') THEN
     BEGIN
       IF (EMPRESA_DESTINO = 0) THEN
       BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
       END
       ELSE
       BEGIN
           IF (EMPRESA_DESTINO = IDEMPRESA) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
           END
       END
     END
     ELSE
     BEGIN
         INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
         VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
     END
   END
END';

   EXECUTE STATEMENT TXT ;
--UPDATE
  IF (TABELA IN ('LOCAL_ESTOQUE','GRADEESTOQUE') ) THEN
   EXIT;

  NOME_TRIGGER = SUBSTR(TABELA||'_AU_SINCRONISMO',1,31);

  SELECT RETORNO
  FROM SP_GERA_SCRIPT_UPDATE_TRIGGER(:TABELA,:PK_TABELA)
  INTO :SQL_TRIGGER;

    TXT = 'CREATE OR ALTER TRIGGER '||:NOME_TRIGGER||' FOR '||:TABELA||'
ACTIVE BEFORE UPDATE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
DECLARE VARIABLE IDEMPRESA INTEGER;
DECLARE VARIABLE EMPRESA_DESTINO INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: '||current_timestamp||'
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_UPDATE_TRIGGER
   */
   IF (USER = ''SINCRONIZADOR'') THEN
      EXIT;
   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;
   EMPRESA_DESTINO = 0 ;
   TXT = '''';
'||:sql_trigger||'

    IF (TXT<>'''') THEN
    BEGIN
       FOR
         SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE, IDEMPRESA
         FROM SINCRONISMO_CONTROLE
         WHERE USUARIO <> USER
         INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE, :IDEMPRESA
       DO
       BEGIN
         IF (TIPO_CONTROLE = ''EMPRESA'') THEN
         BEGIN
           IF (EMPRESA_DESTINO = 0) THEN
           BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
           END
           ELSE
           BEGIN
               IF (EMPRESA_DESTINO = IDEMPRESA) THEN
               BEGIN
                 INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
                 VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
               END
           END
         END
         ELSE
         BEGIN
             INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
             VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
         END
       END
    END
END';


   EXECUTE STATEMENT TXT ;

--DELETE

  NOME_TRIGGER = SUBSTR(TABELA||'_AD_SINCRONISMO',1,31);

    TXT = 'CREATE OR ALTER TRIGGER '||:NOME_TRIGGER||' FOR '||:TABELA||'
ACTIVE BEFORE DELETE POSITION 999
AS
DECLARE VARIABLE TXT VARCHAR(32700);
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: '||current_timestamp||'

   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
   */
   IF (USER = ''SINCRONIZADOR'') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   TXT = ''DELETE FROM '||:TABELA||' WHERE '||:PK_TABELA||' = ''||OLD.'||:PK_TABELA||'||'';'';

   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN
     INSERT INTO SINCRONISMO (IDSINCRONISMO,IDSINCRONISMO_CONTROLE,SCRIPT,STATUS,ORDEM)
     VALUES (0,:IDSINCRONISMO_CONTROLE,:TXT,''A'',0);
   END

END';


   EXECUTE STATEMENT TXT ;

--BLOB

  NOME_TRIGGER = SUBSTR(TABELA||'_IU_SINC_BLOB',1,31);

FOR SELECT RETORNO
FROM SP_GERA_SCRIPT_BLOB_TRIGGER(:TABELA,:PK_TABELA)
INTO :SQL_TRIGGER
DO
BEGIN
IF (SQL_TRIGGER<>'') THEN
BEGIN
    TXT = 'CREATE OR ALTER TRIGGER '||:NOME_TRIGGER||' FOR '||:TABELA||'
ACTIVE BEFORE INSERT OR UPDATE POSITION 999
AS
DECLARE VARIABLE IDSINCRONISMO_CONTROLE INTEGER;
DECLARE VARIABLE TIPO_CONTROLE VARCHAR(10);
BEGIN

   /* TRIGGER DE SINCRONISMO GERADA DIA: '||current_timestamp||'
   Ateno: Est trigger  gerada automaticamente,
   pelas procedures:
        -> SP_GERA_TRIGGERS_REPLICACAO
        -> SP_CRIAR_TRIGGERS_TABELA
        -> SP_GERA_SCRIPT_BLOB_TRIGGER
   */
   IF (USER = ''SINCRONIZADOR'') THEN
      EXIT;

   IF (GEN_ID(COD_UP,0)=0) THEN
      EXIT;

   FOR
     SELECT IDSINCRONISMO_CONTROLE, TIPO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     WHERE USUARIO <> USER
     INTO :IDSINCRONISMO_CONTROLE, :TIPO_CONTROLE
   DO
   BEGIN
'||:SQL_TRIGGER||'
   END

END';
END

END

   EXECUTE STATEMENT TXT ;



END^


ALTER PROCEDURE SP_ENVIAR_TODOS_BLOB
AS
declare variable idsincronismo_controle integer;
declare variable interno_id_interno integer;
declare variable interno_foto type of dm_foto;
declare variable interno_foto_perfil type of dm_foto;
declare variable interno_foto_tatuagem type of dm_foto;
declare variable interno_foto_sinais type of dm_foto;
declare variable interno_foto_sinais1 type of dm_foto;
declare variable interno_foto_sinais2 type of dm_foto;
declare variable interno_foto_sinais3 type of dm_foto;
declare variable interno_foto_sinais4 type of dm_foto;
BEGIN
   FOR
     SELECT IDSINCRONISMO_CONTROLE
     FROM SINCRONISMO_CONTROLE
     INTO :IDSINCRONISMO_CONTROLE
   DO
   BEGIN

   FOR
     SELECT
        ID_INTERNO,
        FOTO,
        FOTO_PERFIL,
        FOTO_TATUAGEM,
        FOTO_SINAIS,
        FOTO_SINAIS1,
        FOTO_SINAIS2,
        FOTO_SINAIS3,
        FOTO_SINAIS4
     FROM INTERNO
     WHERE ST='A'
     AND FOTO IS NOT NULL
     AND ID_UP <> (IIF(:IDSINCRONISMO_CONTROLE=1,11,
                       IIF(:IDSINCRONISMO_CONTROLE=2,62,
                          IIF(:IDSINCRONISMO_CONTROLE=3,73,52)
                          )
                      )
                   )
     INTO :INTERNO_ID_INTERNO,
        :INTERNO_FOTO,
        :INTERNO_FOTO_PERFIL,
        :INTERNO_FOTO_TATUAGEM,
        :INTERNO_FOTO_SINAIS,
        :INTERNO_FOTO_SINAIS1,
        :INTERNO_FOTO_SINAIS2,
        :INTERNO_FOTO_SINAIS3,
        :INTERNO_FOTO_SINAIS4
   DO
   BEGIN

        IF (:INTERNO_FOTO IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_PERFIL IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_PERFIL', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_TATUAGEM IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_TATUAGEM', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_SINAIS IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_SINAIS1 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS1', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_SINAIS2 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS2', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_SINAIS3 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS3', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END

        IF (:INTERNO_FOTO_SINAIS4 IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, 'NOW', USER, 'INTERNO', 'FOTO_SINAIS4', 'ID_INTERNO', :INTERNO_ID_INTERNO);
        END
    END

  END

END^


ALTER PROCEDURE SP_GERA_CONSTRAINT
RETURNS (
    DELETA VARCHAR(276),
    CRIA VARCHAR(915))
AS
BEGIN
  FOR
    SELECT
    'ALTER TABLE '||TRIM(A.RDB$RELATION_NAME)||
    ' DROP CONSTRAINT '||TRIM(A.RDB$CONSTRAINT_NAME)||';' DELETA,
    
    'ALTER TABLE '||TRIM(A.RDB$RELATION_NAME)||'
     ADD CONSTRAINT '||TRIM(A.RDB$CONSTRAINT_NAME)||'
     FOREIGN KEY ('||TRIM(C.RDB$FIELD_NAME)||')
     REFERENCES '
    ||--TABELA DEPENDENTE
    TRIM((SELECT
      RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME
    FROM RDB$RELATION_CONSTRAINTS,
    RDB$INDICES,
    RDB$INDEX_SEGMENTS
    WHERE RDB$RELATION_CONSTRAINTS.RDB$CONSTRAINT_TYPE = 'PRIMARY KEY'
    AND RDB$RELATION_CONSTRAINTS.RDB$INDEX_NAME = RDB$INDICES.RDB$INDEX_NAME
    AND RDB$INDEX_SEGMENTS.RDB$INDEX_NAME = RDB$INDICES.RDB$INDEX_NAME
    AND RDB$RELATION_CONSTRAINTS.rdb$constraint_name = B.rdb$const_name_uq))
    ||
    '('
    ||--PRIMARY KEY
    TRIM((SELECT
    RDB$INDEX_SEGMENTS.RDB$FIELD_NAME
    FROM RDB$RELATION_CONSTRAINTS,
    RDB$INDICES,
    RDB$INDEX_SEGMENTS
    WHERE RDB$RELATION_CONSTRAINTS.RDB$CONSTRAINT_TYPE = 'PRIMARY KEY'
    AND RDB$RELATION_CONSTRAINTS.RDB$INDEX_NAME = RDB$INDICES.RDB$INDEX_NAME
    AND RDB$INDEX_SEGMENTS.RDB$INDEX_NAME = RDB$INDICES.RDB$INDEX_NAME
    AND RDB$RELATION_CONSTRAINTS.rdb$constraint_name = B.rdb$const_name_uq))
    ||
    ')
     ON DELETE CASCADE
     ON UPDATE CASCADE
     USING INDEX '||TRIM(A.RDB$CONSTRAINT_NAME)||';' CRIA
    
    
    --A.RDB$CONSTRAINT_NAME FK, A.RDB$RELATION_NAME AS TABELA, RDB$INDEX_SEGMENTS.RDB$FIELD_NAME AS PK_TABELA
    FROM RDB$INDEX_SEGMENTS C
    INNER JOIN RDB$RELATION_CONSTRAINTS A ON (C.RDB$INDEX_NAME = A.RDB$INDEX_NAME)
    INNER JOIN RDB$REF_CONSTRAINTS B ON (B.rdb$constraint_name = A.rdb$constraint_name)
    WHERE A.RDB$CONSTRAINT_TYPE = 'FOREIGN KEY'
    INTO :DELETA,
         :CRIA
  DO
  BEGIN
    SUSPEND;
  END
END^


ALTER PROCEDURE SP_GERA_SCRIPT_BLOB_TRIGGER (
    TABELA VARCHAR(31),
    PK_TABELA VARCHAR(31))
RETURNS (
    RETORNO VARCHAR(32500))
AS
declare variable nome_campo varchar(31);
declare variable tipo varchar(31);
declare variable valor_insert varchar(32500);
declare variable valor_update varchar(32500);
declare variable virgula varchar(4);
declare variable txt_empresa varchar(500);
BEGIN
/*
ESTA PROCEDURE GERA O TXT PARA SER USADO NA TRIGGER DE BEFORE.
*/
    /* PROCEDURE TEXT */
    VALOR_INSERT = '';
    VALOR_UPDATE = '';
    VIRGULA = ''',';
    RETORNO = '';
    TXT_EMPRESA = '';
    FOR
        SELECT LTRIM(RTRIM(F.RDB$FIELD_NAME)) AS CAMPO
        FROM RDB$RELATION_FIELDS F
        JOIN RDB$FIELDS FS ON (FS.RDB$FIELD_NAME = F.RDB$FIELD_SOURCE)
        JOIN RDB$TYPES T ON ((FS.RDB$FIELD_TYPE = T.RDB$TYPE) AND (T.RDB$FIELD_NAME = 'RDB$FIELD_TYPE'))
        WHERE F.RDB$RELATION_NAME = :TABELA
        AND T.RDB$TYPE_NAME = 'BLOB'
        ORDER BY F.RDB$FIELD_POSITION
       INTO :NOME_CAMPO
   DO
   BEGIN
   VALOR_INSERT = VALOR_INSERT||'
        IF (NEW.'||:NOME_CAMPO||' IS NOT NULL) THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, ''NOW'', USER, '''||:TABELA||''', '''||:NOME_CAMPO||''', '''||:PK_TABELA||''', NEW.'||:PK_TABELA||');
        END
';

   VALOR_UPDATE = VALOR_UPDATE||'
        IF (OLD.'||:NOME_CAMPO||' <> NEW.'||:NOME_CAMPO||') THEN
        BEGIN
          INSERT INTO SINCRONISMO_BLOB (IDSINCRONISMO_BLOB, IDSINCRONISMO_CONTROLE, DATA_HORA, USUARIO, TABELA, CAMPO, NOME_PK, VALOR_PK)
          VALUES (0, :IDSINCRONISMO_CONTROLE, ''NOW'', USER, '''||:TABELA||''', '''||:NOME_CAMPO||''', '''||:PK_TABELA||''', NEW.'||:PK_TABELA||');
        END
';

   END

if (VALOR_INSERT<>'') then
BEGIN
   RETORNO = RETORNO||'
    IF (INSERTING) THEN
    BEGIN
      '||:VALOR_INSERT||'
    END
    ELSE
    BEGIN
      '||:VALOR_UPDATE||'
    END
';
   SUSPEND;

END

END^


ALTER PROCEDURE SP_GERA_SCRIPT_INSERT_TRIGGER (
    TABELA VARCHAR(31))
RETURNS (
    RETORNO VARCHAR(32500))
AS
declare variable nome_campo varchar(31);
declare variable tipo varchar(31);
declare variable nome_registro varchar(32500);
declare variable valor_registro varchar(32500);
BEGIN
/*
ESTA PROCEDURE GERA O TXT PARA SER USADO NA TRIGGER DE BEFORE.
*/
    /* PROCEDURE TEXT */
    NOME_REGISTRO  = '';
    FOR
        SELECT F.RDB$FIELD_NAME AS CAMPO,
               CASE T.RDB$TYPE_NAME
                 WHEN 'VARYING' THEN 'VARCHAR'
                 WHEN 'LONG' THEN 'INTEGER'
                 WHEN 'TEXT' THEN 'CHAR'
                 WHEN 'TIMESTAMP' THEN 'DATE'
                 WHEN 'DOUBLE' THEN
                   CASE WHEN FS.RDB$FIELD_SCALE < 0 THEN
                     'NUMERIC'
                   ELSE
                     'DOUBLE PRECISION' END
               ELSE
                 T.RDB$TYPE_NAME END AS TIPO
        FROM RDB$RELATION_FIELDS F
        JOIN RDB$FIELDS FS ON (FS.RDB$FIELD_NAME = F.RDB$FIELD_SOURCE)
        JOIN RDB$TYPES T ON ((FS.RDB$FIELD_TYPE = T.RDB$TYPE) AND (T.RDB$FIELD_NAME = 'RDB$FIELD_TYPE'))
        WHERE F.RDB$RELATION_NAME = :TABELA
        AND F.RDB$FIELD_NAME NOT IN ('PK_DEFINITIVA', 'EXECUTA_TRIGGER')
        ORDER BY F.RDB$FIELD_POSITION
       INTO :NOME_CAMPO, :TIPO
   DO
   BEGIN
     IF (:TIPO <> 'BLOB') THEN
     BEGIN    

       IF (NOME_REGISTRO = '') THEN
       BEGIN
           NOME_REGISTRO = LTRIM(RTRIM(:NOME_CAMPO));
           IF (LTRIM(RTRIM(TIPO)) IN ('CHAR','VARCHAR','TIME','DATE')) THEN
           BEGIN
                   VALOR_REGISTRO = '''
||COALESCE(''''''''||NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||'||'''''''',''NULL'')';
           END
           ELSE
           BEGIN
               VALOR_REGISTRO = '''
||COALESCE(NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||',''NULL'')';
           END
       END
       ELSE
       BEGIN
           NOME_REGISTRO = NOME_REGISTRO||',''
||'' '||LTRIM(RTRIM(:NOME_CAMPO));
           IF (LTRIM(RTRIM(TIPO)) IN ('CHAR','VARCHAR','TIME','DATE')) THEN
           BEGIN
                    VALOR_REGISTRO = VALOR_REGISTRO||'||'','||'''
||COALESCE(''''''''||NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||'||'''''''',''NULL'')';
           END
           ELSE
           BEGIN
             VALOR_REGISTRO = VALOR_REGISTRO||'||'','||'''
||COALESCE(NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||',''NULL'')';
           END
       END

     END
   END

   RETORNO = '''INSERT INTO '||TABELA||' ('||NOME_REGISTRO||') VALUES ('||VALOR_REGISTRO||'||'');'';';

   SUSPEND;
END^


ALTER PROCEDURE SP_GERA_SCRIPT_UPDATE_TRIGGER (
    TABELA VARCHAR(31),
    PK_TABELA VARCHAR(31))
RETURNS (
    RETORNO VARCHAR(32500))
AS
declare variable nome_campo varchar(31);
declare variable tipo varchar(31);
declare variable valor_registro varchar(32500);
declare variable virgula varchar(4);
BEGIN
/*
ESTA PROCEDURE GERA O TXT PARA SER USADO NA TRIGGER DE BEFORE.
*/
    /* PROCEDURE TEXT */
    VALOR_REGISTRO = '';
    VIRGULA = ''',';
    RETORNO = '';
    FOR
        SELECT F.RDB$FIELD_NAME AS CAMPO,
               CASE T.RDB$TYPE_NAME
                 WHEN 'VARYING' THEN 'VARCHAR'
                 WHEN 'LONG' THEN 'INTEGER'
                 WHEN 'TEXT' THEN 'CHAR'
                 WHEN 'TIMESTAMP' THEN 'DATE'
                 WHEN 'DOUBLE' THEN
                   CASE WHEN FS.RDB$FIELD_SCALE < 0 THEN
                     'NUMERIC'
                   ELSE
                     'DOUBLE PRECISION' END
               ELSE
                 T.RDB$TYPE_NAME END AS TIPO
        FROM RDB$RELATION_FIELDS F
        JOIN RDB$FIELDS FS ON (FS.RDB$FIELD_NAME = F.RDB$FIELD_SOURCE)
        JOIN RDB$TYPES T ON ((FS.RDB$FIELD_TYPE = T.RDB$TYPE) AND (T.RDB$FIELD_NAME = 'RDB$FIELD_TYPE'))
        WHERE F.RDB$RELATION_NAME = :TABELA
        AND F.RDB$FIELD_NAME NOT IN ('OBJ_EXIST','PK_DEFINITIVA', 'EXECUTA_TRIGGER','SALDOATUAL', 'SALDORESERVADO', 'SALDO_ADIANTAMENTO_C', 'SALDO_ADIANTAMENTO_F')
        ORDER BY F.RDB$FIELD_POSITION
       INTO :NOME_CAMPO, :TIPO
   DO
   BEGIN


     IF (:TIPO <> 'BLOB' AND (LTRIM(RTRIM(:NOME_CAMPO)) <> :PK_TABELA)) THEN
     BEGIN

       IF (LTRIM(RTRIM(TIPO)) IN ('CHAR','VARCHAR','TIME','DATE')) THEN
       BEGIN
               VALOR_REGISTRO = VALOR_REGISTRO||'
IF (COALESCE(NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||','''')<>COALESCE(OLD.'||LTRIM(RTRIM(:NOME_CAMPO))||','''')) THEN TXT=TXT||'||VIRGULA||LTRIM(RTRIM(:NOME_CAMPO))||' = ''||COALESCE(''''''''||NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||'||'''''''',''NULL'');';
       END
       ELSE
       BEGIN
           VALOR_REGISTRO = VALOR_REGISTRO||'
IF (COALESCE(NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||','''')<>COALESCE(OLD.'||LTRIM(RTRIM(:NOME_CAMPO))||','''')) THEN TXT=TXT||'||VIRGULA||LTRIM(RTRIM(:NOME_CAMPO))||' = ''||COALESCE(NEW.'||LTRIM(RTRIM(:NOME_CAMPO))||',''NULL'');';
       END
     END

   END

   RETORNO = VALOR_REGISTRO||'
IF (TXT <> '''') THEN TXT = ''UPDATE '||TABELA||' SET '||PK_TABELA||' = ''''''||NEW.'||PK_TABELA||'||''''''''||TXT||'' WHERE '||PK_TABELA||' = ''''''||NEW.'||PK_TABELA||'||'''''' ;'';';

   SUSPEND;

END^


ALTER PROCEDURE SP_GERA_TRIGGERS_REPLICACAO
RETURNS (
    RETORNO VARCHAR(16384))
AS
declare variable tabela char(93);
declare variable pk_tabela char(93);
BEGIN
  FOR
    SELECT RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME AS TABELA,--TABELAS
           RDB$INDEX_SEGMENTS.RDB$FIELD_NAME AS PK_TABELA--OS CAMPOS IDS
    FROM RDB$INDEX_SEGMENTS
    INNER JOIN RDB$RELATION_CONSTRAINTS ON (RDB$INDEX_SEGMENTS.RDB$INDEX_NAME = RDB$RELATION_CONSTRAINTS.RDB$INDEX_NAME)
    WHERE RDB$RELATION_CONSTRAINTS.RDB$CONSTRAINT_TYPE = 'PRIMARY KEY'
    AND ( (RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME NOT LIKE '%$%'
    AND RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME NOT LIKE 'SINCRONISMO%'
    AND RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME NOT LIKE 'SETOR_TRABALHO%'
    AND RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME NOT LIKE '%BACKUP%'))
    INTO :TABELA,
         :PK_TABELA
  DO
  BEGIN
    RETORNO = 'EXECUTE PROCEDURE SP_CRIAR_TRIGGERS_TABELA('''||LTRIM(RTRIM(TABELA))||''','''||LTRIM(RTRIM(PK_TABELA))||''');';
    EXECUTE STATEMENT RETORNO;
    SUSPEND;
    WHEN ANY DO
    BEGIN

     exception MESSAGEM_DIVERSAS ''||:RETORNO;

    END
  END
END^


ALTER PROCEDURE SP_LIMPA_CHAR (
    CAMPO VARCHAR(16386))
RETURNS (
    RETORNO VARCHAR(16386))
AS
declare variable var_i integer;
declare variable var_x integer;
declare variable subs varchar(1);
begin

  /* Procedure Text */
  var_i = 100;
  var_x = 0 ;
  retorno = '' ;

  while (var_x <= var_i) do
  begin
    var_x = var_x + 1 ;
    subs = substring(campo from var_x for 1);
    if (subs = '''') then
    begin
      subs = '' ;
    end
    retorno = retorno || subs;
  end
  var_x = var_x + 1 ;
  retorno = retorno || substring(campo from var_x for 16286);
  suspend;

end^


ALTER PROCEDURE SP_MIGRA_CONFERE
RETURNS (
    NOME VARCHAR(100),
    PAVILHAO VARCHAR(50),
    IDPAVILHAO INTEGER,
    GALERIA VARCHAR(50),
    IDGALERIA INTEGER,
    SOLARIO VARCHAR(50),
    IDSOLARIO INTEGER,
    CELA VARCHAR(50),
    IDCELA INTEGER)
AS
BEGIN
  FOR
    SELECT NOME,
    PAVILHAO,
    (SELECT ID_PAVILHAO FROM PAVILHAO P
     WHERE p.id_up=80 and P.pavilhao =C.pavilhao) IDPAVILHAO,
    galeria, 
    (SELECT G.id_galeria FROM
     PAVILHAO P, GALERIA G
     WHERE p.id_up=80 and P.pavilhao =C.pavilhao
     AND P.id_pavilhao = G.idpavilhao
     AND G.galeria = C.galeria) IDGALERIA,
    solario, 
    (SELECT S.id_solario FROM
     PAVILHAO P, GALERIA G, SOLARIO S
     WHERE p.id_up=80 and P.pavilhao =C.pavilhao
     AND P.id_pavilhao = G.idpavilhao
     AND G.galeria = C.galeria
     AND S.idpavilhao =P.id_pavilhao
     AND S.idgaleria = G.id_galeria
     AND S.solario = C.solario) IDSOLARIO,
    CELA,
    (SELECT FIRST 1 l.id_cela FROM
     CELA L
     JOIN PAVILHAO P ON L.idpavilhao=P.id_pavilhao and P.pavilhao =C.pavilhao
     JOIN GALERIA G ON L.idgaleria=G.id_galeria and G.galeria = C.galeria
     JOIN SOLARIO S ON L.idsolario=s.id_solario and S.solario = C.solario
     WHERE p.id_up=80 and
     P.id_pavilhao = G.idpavilhao
     AND S.idpavilhao =P.id_pavilhao
     AND S.idgaleria = G.id_galeria
     AND L.cela=C.cela) IDCELA
    FROM CONFERE C
    WHERE C.pavilhao <> '[EXCLUIDO]'
    INTO :NOME,
         :PAVILHAO,
         :IDPAVILHAO,
         :GALERIA,
         :IDGALERIA,
         :SOLARIO,
         :IDSOLARIO,
         :CELA,
         :IDCELA
  DO
  BEGIN
    SUSPEND;
  END
END^


ALTER PROCEDURE SP_MIGRA_CONFERE_2
RETURNS (
    CONCATENATION VARCHAR(169))
AS
BEGIN
  FOR
    select
    'insert into cela (id_cela, cela, idsolario, idpavilhao, idgaleria) '||
    'values (0, '''||cela||''', '||idsolario||','|| idpavilhao||','|| idgaleria||');'
    from confere
    WHERE pavilhao <> '[EXCLUIDO]'
    INTO :CONCATENATION
  DO
  BEGIN
    SUSPEND;
  END
END^


ALTER PROCEDURE SP_MIGRA_CONFERE_3
RETURNS (
    IDCELA INTEGER,
    IDPAVILHAO INTEGER,
    IDGALERIA INTEGER,
    IDSOLARIO INTEGER,
    CELA VARCHAR(50),
    NOME VARCHAR(100))
AS
BEGIN
  FOR
    SELECT
    (SELECT FIRST 1 l.id_cela FROM
         CELA L
         WHERE L.idpavilhao=C.idpavilhao
         AND L.idgaleria=C.idgaleria
         AND L.idsolario=C.idsolario
         AND L.cela=C.cela) IDCELA,
    C.idpavilhao,
    C.idgaleria,
    C.idsolario,
    C.cela,
    C.nome
    FROM CONFERE C
    WHERE C.PAVILHAO <> '[EXCLUIDO]'
    INTO :IDCELA,
         :IDPAVILHAO,
         :IDGALERIA,
         :IDSOLARIO,
         :CELA,
         :NOME
  DO
  BEGIN
    SUSPEND;
  END
END^


ALTER PROCEDURE SP_MIGRA_CONFERE_4
RETURNS (
    ID_INTERNO INTEGER,
    NOME_INTERNO VARCHAR(50),
    RGI VARCHAR(30),
    IDPROFISSAO INTEGER,
    IDGALERIA INTEGER,
    IDPAVILHAO INTEGER,
    IDSOLARIO INTEGER,
    IDCELA INTEGER,
    DATA_ENTRADA TIMESTAMP,
    MAE VARCHAR(50),
    PAI VARCHAR(50),
    IDNATURALIDADE INTEGER,
    IDNACIONALIDADE INTEGER,
    IDRACA INTEGER,
    IDESCOLARIDADE INTEGER,
    ENDERECO VARCHAR(50),
    NUMERO VARCHAR(10),
    BAIRRO VARCHAR(30),
    COMPLEMENETO VARCHAR(30),
    CEP VARCHAR(8),
    IDCIDADE INTEGER,
    FONE VARCHAR(10),
    CONTATO VARCHAR(50),
    RELIGIAO VARCHAR(50),
    IDADVOGADO INTEGER,
    ID_PROCEDENCIA INTEGER,
    CONDENACAO VARCHAR(100),
    DATA_PRISAO TIMESTAMP,
    HISTORICO VARCHAR(16386),
    ST VARCHAR(8),
    SEXO VARCHAR(1),
    ID_UP INTEGER,
    IDCONDICAO_INTERNO INTEGER,
    IDDESTINO INTEGER,
    ID_FUNCIONARIO INTEGER,
    STATUS_ISOLAMENTO VARCHAR(30),
    IDSETOR_TRABALHO INTEGER,
    DATA_SETOR TIMESTAMP)
AS
BEGIN
DELETE FROM MOV_INTERNO WHERE EXISTS (SELECT NULL FROM INTERNO WHERE INTERNO.id_interno like '80%' AND INTERNO.ID_INTERNO=MOV_INTERNO.ID_INTERNO);
--DELETE FROM VISITANTE_INTERNO WHERE EXISTS (SELECT NULL FROM INTERNO WHERE ID_UP=80 AND VISITANTE_INTERNO.ID_INTERNO=INTERNO.ID_INTERNO);
DELETE FROM INTERNO WHERE id_interno like '80%';
  FOR
    SELECT 0 ID_INTERNO,
           SUBSTR(NOME,1,50) NOME_INTERNO,
           NULL RGI,
           NULL IDPROFISSAO, 
           IDGALERIA, 
           IDPAVILHAO, 
           IDSOLARIO, 
           COALESCE(IDCELA,801221),
           C.data DATA_ENTRADA,
           C.NOME_MAE MAE,
           C.NOME_PAI PAI,
           NULL IDNATURALIDADE, 
           NULL IDNACIONALIDADE, 
           NULL IDRACA, 
           NULL IDESCOLARIDADE, 
           NULL ENDERECO, 
           NULL NUMERO, 
           NULL BAIRRO, 
           NULL COMPLEMENETO, 
           NULL CEP, 
           NULL IDCIDADE, 
           NULL FONE, 
           NULL CONTATO, 
           NULL RELIGIAO, 
           NULL IDADVOGADO, 
           NULL ID_PROCEDENCIA, 
           NULL CONDENACAO, 
           C.DATA DATA_PRISAO,
           NULL HISTORICO, 
           NULL ST, 
           NULL SEXO, 
           80 ID_UP,
           NULL IDCONDICAO_INTERNO, 
           NULL IDDESTINO, 
           NULL ID_FUNCIONARIO,
           C.CAMPO1 STATUS_ISOLAMENTO,
           C.IDSETOR,
           C.data_setor
    FROM CONFERE C
    WHERE C.PAVILHAO <> '[EXCLUIDO]'
    INTO :ID_INTERNO,
         :NOME_INTERNO,
         :RGI,
         :IDPROFISSAO,
         :IDGALERIA,
         :IDPAVILHAO,
         :IDSOLARIO,
         :IDCELA,
         :DATA_ENTRADA,
         :MAE,
         :PAI,
         :IDNATURALIDADE,
         :IDNACIONALIDADE,
         :IDRACA,
         :IDESCOLARIDADE,
         :ENDERECO,
         :NUMERO,
         :BAIRRO,
         :COMPLEMENETO,
         :CEP,
         :IDCIDADE,
         :FONE,
         :CONTATO,
         :RELIGIAO,
         :IDADVOGADO,
         :ID_PROCEDENCIA,
         :CONDENACAO,
         :DATA_PRISAO,
         :HISTORICO,
         :ST,
         :SEXO,
         :ID_UP,
         :IDCONDICAO_INTERNO,
         :IDDESTINO,
         :ID_FUNCIONARIO,
         :STATUS_ISOLAMENTO,
         :IDSETOR_TRABALHO,
         :DATA_SETOR
  DO
  BEGIN

    INSERT INTO INTERNO (ID_INTERNO, NOME_INTERNO, RGI, IDPROFISSAO, IDGALERIA, IDPAVILHAO, IDSOLARIO, IDCELA, DATA_ENTRADA, MAE, PAI, IDNATURALIDADE, IDNACIONALIDADE, IDRACA, IDESCOLARIDADE, ENDERECO, NUMERO, BAIRRO, COMPLEMENETO, CEP, IDCIDADE, FONE, CONTATO, RELIGIAO, IDADVOGADO, ID_PROCEDENCIA, CONDENACAO, DATA_PRISAO, HISTORICO, ST, SEXO, ID_UP, IDCONDICAO_INTERNO, IDDESTINO, ID_FUNCIONARIO,STATUS_ISOLAMENTO, IDSETOR_TRABALHO,DATA_SETOR)
    VALUES (:ID_INTERNO, :NOME_INTERNO, :RGI, :IDPROFISSAO, :IDGALERIA, :IDPAVILHAO, :IDSOLARIO, :IDCELA, :DATA_ENTRADA, :MAE, :PAI, :IDNATURALIDADE, :IDNACIONALIDADE, :IDRACA, :IDESCOLARIDADE, :ENDERECO, :NUMERO, :BAIRRO, :COMPLEMENETO, :CEP, :IDCIDADE, :FONE, :CONTATO, :RELIGIAO, :IDADVOGADO, :ID_PROCEDENCIA, :CONDENACAO, :DATA_PRISAO, :HISTORICO, :ST, :SEXO, :ID_UP, :IDCONDICAO_INTERNO, :IDDESTINO, :ID_FUNCIONARIO,:STATUS_ISOLAMENTO,:IDSETOR_TRABALHO,:DATA_SETOR);

    SUSPEND;
  END
END^


ALTER PROCEDURE SP_ORDENA_VISITANTE
AS
declare variable ordem integer;
declare variable id_mov_diario_visitantes integer;
begin
    ordem = 0;
    for
        select mov_diario_visitantes.id_mov_diario_visitantes
        from mov_diario_visitantes
        where mov_diario_visitantes.data_visita=current_date
        and mov_diario_visitantes.cancelado is null
        and mov_diario_visitantes.id_mov_diario_visitantes like gen_id(cod_up,0)||'%'
        order by id_mov_diario_visitantes
        into :id_mov_diario_visitantes
    do
    begin
        ordem = ordem + 1 ;
        update mov_diario_visitantes set mov_diario_visitantes.ordem_visita = :ordem
        where mov_diario_visitantes.id_mov_diario_visitantes = :id_mov_diario_visitantes;
    end

end^


ALTER PROCEDURE SP_REDUNDANCIA
RETURNS (
    ID_INTERNO INTEGER,
    NOME_INTERNO VARCHAR(50),
    RGI VARCHAR(30),
    IDPROFISSAO INTEGER,
    IDGALERIA INTEGER,
    IDPAVILHAO INTEGER,
    IDSOLARIO INTEGER,
    IDCELA INTEGER,
    DATA_ENTRADA TIMESTAMP,
    MAE VARCHAR(50),
    PAI VARCHAR(50),
    IDNATURALIDADE INTEGER,
    IDNACIONALIDADE INTEGER,
    IDRACA INTEGER,
    IDESCOLARIDADE INTEGER,
    ENDERECO VARCHAR(50),
    NUMERO VARCHAR(10),
    BAIRRO VARCHAR(30),
    COMPLEMENETO VARCHAR(30),
    CEP VARCHAR(8),
    IDCIDADE INTEGER,
    FONE VARCHAR(10),
    CONTATO VARCHAR(50),
    RELIGIAO VARCHAR(50),
    IDADVOGADO INTEGER,
    ID_PROCEDENCIA INTEGER,
    CONDENACAO VARCHAR(100),
    DATA_PRISAO TIMESTAMP,
    HISTORICO VARCHAR(16386),
    ST VARCHAR(1),
    SEXO VARCHAR(1),
    ID_UP INTEGER,
    IDCONDICAO_INTERNO INTEGER,
    IDDESTINO INTEGER,
    ID_FUNCIONARIO INTEGER,
    STATUS_ISOLAMENTO VARCHAR(30),
    IDSETOR_TRABALHO INTEGER,
    DATA_SETOR TIMESTAMP,
    FOTO BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_PERFIL BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_TATUAGEM BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    DATA_SAIDA TIMESTAMP,
    MOTIVO_SAIDA VARCHAR(100),
    ID_FUNCAOINTERNO INTEGER,
    OBSTRABALHO VARCHAR(100),
    DATA_NASCIMENTO TIMESTAMP,
    RG VARCHAR(30),
    CPF VARCHAR(11),
    ESTADO_CIVIL VARCHAR(30),
    VULGO VARCHAR(100),
    OUTRO_NOME VARCHAR(100),
    SINAIS_PARTICULARES VARCHAR(200),
    ALTURA VARCHAR(30),
    PESO VARCHAR(30),
    CI VARCHAR(30),
    CISAIDA VARCHAR(30),
    FOTO_SINAIS BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS1 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS2 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS3 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    FOTO_SINAIS4 BLOB SUB_TYPE 0 SEGMENT SIZE 80,
    ARTIGO VARCHAR(100),
    DATA_ISOLAMENTO TIMESTAMP,
    DATA_MATRICULA TIMESTAMP,
    OBSEDUCACAO VARCHAR(16386),
    DEFICIENCIA VARCHAR(100),
    IDSERIEESTUDO INTEGER,
    COR_OLHOS VARCHAR(100),
    COR_CABELOS VARCHAR(100),
    NOME_SOCIAL VARCHAR(50),
    ORIENTACAO_SEXUAL VARCHAR(50),
    IDENTIDADE_GENERO VARCHAR(50),
    HISTORICO_VELHO VARCHAR(16386),
    TIPOPROCESSO VARCHAR(100),
    CONCEITO_DISCIPLINAR VARCHAR(200),
    TIPOCONDUTA VARCHAR(30),
    PERIODO VARCHAR(30),
    FAMILIARPRESO VARCHAR(30),
    PARENTESCOPRESO VARCHAR(50),
    UPFAMILIARPRESO VARCHAR(200),
    MOTIVODELITO VARCHAR(200),
    MAIORPERDA VARCHAR(200),
    PAISVIVOS VARCHAR(30),
    PAISSEPARADOS VARCHAR(30),
    IDADEPAISSEPARADOS VARCHAR(30),
    PROFISSAOPAIS VARCHAR(100),
    QUEMCRIOU VARCHAR(100),
    TRABALHOFAMILIA VARCHAR(100),
    QTDEIRMAOS VARCHAR(30),
    CRIADOIRMAOS VARCHAR(30),
    MORADIA VARCHAR(100),
    REPRESENTACAOPAIS VARCHAR(200),
    EDUCACAORECEBIDA VARCHAR(200),
    MUDANCAFAMILIA VARCHAR(100),
    FUGACASA VARCHAR(100),
    CONDICOESCRIACAO VARCHAR(30),
    INSTITUICAOASSISTENCIAL VARCHAR(100),
    VIOLENCIADOMESTICA VARCHAR(200),
    MORADIAANTESPRESO VARCHAR(100),
    RESIDENCIAFAMILIAR VARCHAR(100),
    QTDEFILHOS VARCHAR(100),
    FILHOSMENORES16 VARCHAR(100),
    FILHOSVIVEM VARCHAR(200),
    FILHOADOCAO VARCHAR(200),
    PROVEDORFAMILIA VARCHAR(30),
    RENDIMENTOFAMILIAR VARCHAR(200),
    PROGRAMASOCIAL VARCHAR(200),
    AUXRECLUSAO VARCHAR(200),
    REPROVADOESCOLA VARCHAR(200),
    IDADETRABALHO VARCHAR(200),
    CURSOPROFISSIONALIZANTE VARCHAR(200),
    EXERCICIATRABALHO VARCHAR(100),
    REGISTROCARTEIRA VARCHAR(100),
    TRABALHOUPANTERIOR VARCHAR(200),
    DOCUMENTOS VARCHAR(200),
    USODROGAS VARCHAR(200),
    DATADEPENDENCIA VARCHAR(100),
    ABANDONODROGAS VARCHAR(200),
    DROGASCOMCRIME VARCHAR(200),
    DOENCAGRAVE VARCHAR(30),
    DOENCAMENTAL VARCHAR(30),
    PROBLEMASAUDE VARCHAR(200),
    DOENCALABORAL VARCHAR(200),
    VISITAOUTRAPESSOA VARCHAR(200),
    ESTUDOCUMPENA VARCHAR(100),
    TRABALHOCUMPENA VARCHAR(100),
    PROFISSAOCUMPENA VARCHAR(100),
    DATAPSICOSSOCIAL TIMESTAMP,
    IDTECNICO INTEGER,
    OBSPSICOSSOCIAL VARCHAR(200),
    DATA_DELITO TIMESTAMP,
    DATA_REABILITACAO TIMESTAMP,
    MP INTEGER,
    SUICIDIO VARCHAR(100),
    CID VARCHAR(100),
    EFEITOSDROGA VARCHAR(200),
    SINTOMASDEPRESSIVOS VARCHAR(200),
    EPISODIOSHUMOR VARCHAR(200),
    SINTOMASPSICOTICOS VARCHAR(200),
    DELIRIOS VARCHAR(200),
    ALUCINACOES VARCHAR(100),
    PERSONALIDADE VARCHAR(100),
    VISITANTES VARCHAR(200),
    MEDICACAOCONTROLADA VARCHAR(200),
    DOENCAINFECTOCONTAGIOSA VARCHAR(200),
    TRATAMENTOINFECTO VARCHAR(200),
    RESULTADOINFECTO VARCHAR(200),
    SITUACAOCIVIL VARCHAR(100))
AS
declare variable idinterno_2 integer;
BEGIN

  DELETE FROM AA_REDUNDANCIA;

  FOR
    SELECT ID_INTERNO, 
           NOME_INTERNO, 
           RGI, 
           IDPROFISSAO, 
           IDGALERIA, 
           IDPAVILHAO, 
           IDSOLARIO, 
           IDCELA, 
           DATA_ENTRADA, 
           MAE, 
           PAI, 
           IDNATURALIDADE, 
           IDNACIONALIDADE, 
           IDRACA, 
           IDESCOLARIDADE, 
           ENDERECO, 
           NUMERO, 
           BAIRRO, 
           COMPLEMENETO, 
           CEP, 
           IDCIDADE, 
           FONE, 
           CONTATO, 
           RELIGIAO, 
           IDADVOGADO, 
           ID_PROCEDENCIA, 
           CONDENACAO, 
           DATA_PRISAO, 
           HISTORICO, 
           ST, 
           SEXO, 
           ID_UP, 
           IDCONDICAO_INTERNO, 
           IDDESTINO, 
           ID_FUNCIONARIO, 
           STATUS_ISOLAMENTO, 
           IDSETOR_TRABALHO, 
           DATA_SETOR, 
           FOTO, 
           FOTO_PERFIL, 
           FOTO_TATUAGEM, 
           DATA_SAIDA, 
           MOTIVO_SAIDA, 
           ID_FUNCAOINTERNO, 
           OBSTRABALHO, 
           DATA_NASCIMENTO, 
           RG, 
           CPF, 
           ESTADO_CIVIL, 
           VULGO, 
           OUTRO_NOME, 
           SINAIS_PARTICULARES, 
           ALTURA, 
           PESO, 
           CI, 
           CISAIDA, 
           FOTO_SINAIS, 
           FOTO_SINAIS1, 
           FOTO_SINAIS2, 
           FOTO_SINAIS3, 
           FOTO_SINAIS4, 
           ARTIGO, 
           DATA_ISOLAMENTO, 
           DATA_MATRICULA, 
           OBSEDUCACAO, 
           DEFICIENCIA, 
           IDSERIEESTUDO, 
           COR_OLHOS, 
           COR_CABELOS, 
           NOME_SOCIAL, 
           ORIENTACAO_SEXUAL, 
           IDENTIDADE_GENERO, 
           HISTORICO_VELHO, 
           TIPOPROCESSO, 
           CONCEITO_DISCIPLINAR, 
           TIPOCONDUTA, 
           PERIODO, 
           FAMILIARPRESO, 
           PARENTESCOPRESO, 
           UPFAMILIARPRESO, 
           MOTIVODELITO, 
           MAIORPERDA, 
           PAISVIVOS, 
           PAISSEPARADOS, 
           IDADEPAISSEPARADOS, 
           PROFISSAOPAIS, 
           QUEMCRIOU, 
           TRABALHOFAMILIA, 
           QTDEIRMAOS, 
           CRIADOIRMAOS, 
           MORADIA, 
           REPRESENTACAOPAIS, 
           EDUCACAORECEBIDA, 
           MUDANCAFAMILIA, 
           FUGACASA, 
           CONDICOESCRIACAO, 
           INSTITUICAOASSISTENCIAL, 
           VIOLENCIADOMESTICA, 
           MORADIAANTESPRESO, 
           RESIDENCIAFAMILIAR, 
           QTDEFILHOS, 
           FILHOSMENORES16, 
           FILHOSVIVEM, 
           FILHOADOCAO, 
           PROVEDORFAMILIA, 
           RENDIMENTOFAMILIAR, 
           PROGRAMASOCIAL, 
           AUXRECLUSAO, 
           REPROVADOESCOLA, 
           IDADETRABALHO, 
           CURSOPROFISSIONALIZANTE, 
           EXERCICIATRABALHO, 
           REGISTROCARTEIRA, 
           TRABALHOUPANTERIOR, 
           DOCUMENTOS, 
           USODROGAS, 
           DATADEPENDENCIA, 
           ABANDONODROGAS, 
           DROGASCOMCRIME, 
           DOENCAGRAVE, 
           DOENCAMENTAL, 
           PROBLEMASAUDE, 
           DOENCALABORAL, 
           VISITAOUTRAPESSOA, 
           ESTUDOCUMPENA, 
           TRABALHOCUMPENA, 
           PROFISSAOCUMPENA, 
           DATAPSICOSSOCIAL, 
           IDTECNICO, 
           OBSPSICOSSOCIAL, 
           DATA_DELITO, 
           DATA_REABILITACAO, 
           MP, 
           SUICIDIO, 
           CID, 
           EFEITOSDROGA, 
           SINTOMASDEPRESSIVOS, 
           EPISODIOSHUMOR, 
           SINTOMASPSICOTICOS, 
           DELIRIOS, 
           ALUCINACOES, 
           PERSONALIDADE, 
           VISITANTES, 
           MEDICACAOCONTROLADA, 
           DOENCAINFECTOCONTAGIOSA, 
           TRATAMENTOINFECTO, 
           RESULTADOINFECTO, 
           SITUACAOCIVIL
    FROM INTERNO
    where nome_interno not like 'xx%'
    INTO :ID_INTERNO,
         :NOME_INTERNO,
         :RGI,
         :IDPROFISSAO,
         :IDGALERIA,
         :IDPAVILHAO,
         :IDSOLARIO,
         :IDCELA,
         :DATA_ENTRADA,
         :MAE,
         :PAI,
         :IDNATURALIDADE,
         :IDNACIONALIDADE,
         :IDRACA,
         :IDESCOLARIDADE,
         :ENDERECO,
         :NUMERO,
         :BAIRRO,
         :COMPLEMENETO,
         :CEP,
         :IDCIDADE,
         :FONE,
         :CONTATO,
         :RELIGIAO,
         :IDADVOGADO,
         :ID_PROCEDENCIA,
         :CONDENACAO,
         :DATA_PRISAO,
         :HISTORICO,
         :ST,
         :SEXO,
         :ID_UP,
         :IDCONDICAO_INTERNO,
         :IDDESTINO,
         :ID_FUNCIONARIO,
         :STATUS_ISOLAMENTO,
         :IDSETOR_TRABALHO,
         :DATA_SETOR,
         :FOTO,
         :FOTO_PERFIL,
         :FOTO_TATUAGEM,
         :DATA_SAIDA,
         :MOTIVO_SAIDA,
         :ID_FUNCAOINTERNO,
         :OBSTRABALHO,
         :DATA_NASCIMENTO,
         :RG,
         :CPF,
         :ESTADO_CIVIL,
         :VULGO,
         :OUTRO_NOME,
         :SINAIS_PARTICULARES,
         :ALTURA,
         :PESO,
         :CI,
         :CISAIDA,
         :FOTO_SINAIS,
         :FOTO_SINAIS1,
         :FOTO_SINAIS2,
         :FOTO_SINAIS3,
         :FOTO_SINAIS4,
         :ARTIGO,
         :DATA_ISOLAMENTO,
         :DATA_MATRICULA,
         :OBSEDUCACAO,
         :DEFICIENCIA,
         :IDSERIEESTUDO,
         :COR_OLHOS,
         :COR_CABELOS,
         :NOME_SOCIAL,
         :ORIENTACAO_SEXUAL,
         :IDENTIDADE_GENERO,
         :HISTORICO_VELHO,
         :TIPOPROCESSO,
         :CONCEITO_DISCIPLINAR,
         :TIPOCONDUTA,
         :PERIODO,
         :FAMILIARPRESO,
         :PARENTESCOPRESO,
         :UPFAMILIARPRESO,
         :MOTIVODELITO,
         :MAIORPERDA,
         :PAISVIVOS,
         :PAISSEPARADOS,
         :IDADEPAISSEPARADOS,
         :PROFISSAOPAIS,
         :QUEMCRIOU,
         :TRABALHOFAMILIA,
         :QTDEIRMAOS,
         :CRIADOIRMAOS,
         :MORADIA,
         :REPRESENTACAOPAIS,
         :EDUCACAORECEBIDA,
         :MUDANCAFAMILIA,
         :FUGACASA,
         :CONDICOESCRIACAO,
         :INSTITUICAOASSISTENCIAL,
         :VIOLENCIADOMESTICA,
         :MORADIAANTESPRESO,
         :RESIDENCIAFAMILIAR,
         :QTDEFILHOS,
         :FILHOSMENORES16,
         :FILHOSVIVEM,
         :FILHOADOCAO,
         :PROVEDORFAMILIA,
         :RENDIMENTOFAMILIAR,
         :PROGRAMASOCIAL,
         :AUXRECLUSAO,
         :REPROVADOESCOLA,
         :IDADETRABALHO,
         :CURSOPROFISSIONALIZANTE,
         :EXERCICIATRABALHO,
         :REGISTROCARTEIRA,
         :TRABALHOUPANTERIOR,
         :DOCUMENTOS,
         :USODROGAS,
         :DATADEPENDENCIA,
         :ABANDONODROGAS,
         :DROGASCOMCRIME,
         :DOENCAGRAVE,
         :DOENCAMENTAL,
         :PROBLEMASAUDE,
         :DOENCALABORAL,
         :VISITAOUTRAPESSOA,
         :ESTUDOCUMPENA,
         :TRABALHOCUMPENA,
         :PROFISSAOCUMPENA,
         :DATAPSICOSSOCIAL,
         :IDTECNICO,
         :OBSPSICOSSOCIAL,
         :DATA_DELITO,
         :DATA_REABILITACAO,
         :MP,
         :SUICIDIO,
         :CID,
         :EFEITOSDROGA,
         :SINTOMASDEPRESSIVOS,
         :EPISODIOSHUMOR,
         :SINTOMASPSICOTICOS,
         :DELIRIOS,
         :ALUCINACOES,
         :PERSONALIDADE,
         :VISITANTES,
         :MEDICACAOCONTROLADA,
         :DOENCAINFECTOCONTAGIOSA,
         :TRATAMENTOINFECTO,
         :RESULTADOINFECTO,
         :SITUACAOCIVIL
  DO
  BEGIN

    FOR
        SELECT ID_INTERNO
        FROM INTERNO I
        WHERE I.NOME_INTERNO = :NOME_INTERNO
        AND I.MAE LIKE SUBSTR(:MAE,1,5)||'%'
        AND I.PAI LIKE SUBSTR(:PAI,1,5)||'%'
        AND ID_INTERNO<>:ID_INTERNO
        INTO :IDINTERNO_2
    DO
    BEGIN

        DELETE FROM AA_REDUNDANCIA
        WHERE IDINTERNO_1 = :IDINTERNO_2
        AND IDINTERNO_2 = :ID_INTERNO;

        INSERT INTO AA_REDUNDANCIA (IDINTERNO_1,
                                    IDINTERNO_2)
        VALUES (:ID_INTERNO,
                :IDINTERNO_2);

    END

    SUSPEND;
  END
END^


ALTER PROCEDURE SP_REDUNDANCIA_UNICO_INATIVO
RETURNS (
    MAXIMO INTEGER,
    NOME_INTERNO VARCHAR(50),
    SUBSTR VARCHAR(255),
    SUBSTR1 VARCHAR(255),
    NUM INTEGER)
AS
BEGIN
  FOR
    select
    MAX(v.idinterno),
    i.nome_interno,
    SUBSTR(i.mae,1,5),
    SUBSTR(i.pai,1,5),
    COUNT(*)
    from vw_redundancia v
    left join interno i on i.id_interno=v.idinterno
    where i.st='I'
    GROUP BY
    i.nome_interno,
    SUBSTR(i.mae,1,5),
    SUBSTR(i.pai,1,5)
    HAVING COUNT(*)>1
    INTO :maximo,
         :NOME_INTERNO,
         :SUBSTR,
         :SUBSTR1,
         :num
  DO
  BEGIN
    SUSPEND;
  END
END^


ALTER PROCEDURE SP_SINCRONIZA_GENERATOR
AS
declare variable tabela varchar(1000);
declare variable sincroniza varchar(1000);
declare variable idtabela integer;
declare variable rdb$relation_name char(31);
declare variable rdb$field_name char(31);
declare variable rdb$generator_name char(31);
declare variable chave_sinc varchar(20);
declare variable sidtabelas varchar(30);
declare variable num_casas integer;
declare variable tem_trigger integer;
declare variable codigo integer;
declare variable nome_trigger varchar(31);
BEGIN

/* O OBJETIVO DESSA PROCEDURE  SINCRONIZAR OS GENERATORS COM OS IDS DAS TABELAS
   NO QUAL ELES CORRESPONDEM */

  CHAVE_SINC = GEN_ID(cod_up,0);

  FOR
    SELECT RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME,--TABELAS
           RDB$INDEX_SEGMENTS.RDB$FIELD_NAME,--OS CAMPOS IDS
           RDB$GENERATORS.RDB$GENERATOR_NAME--NOME DOS GENERATOR
    FROM RDB$GENERATORS
       INNER JOIN RDB$INDEX_SEGMENTS ON (RTRIM( RDB$GENERATORS.RDB$GENERATOR_NAME ) = RTRIM( RDB$INDEX_SEGMENTS.RDB$FIELD_NAME ))
       INNER JOIN RDB$RELATION_CONSTRAINTS ON (RDB$INDEX_SEGMENTS.RDB$INDEX_NAME = RDB$RELATION_CONSTRAINTS.RDB$INDEX_NAME)
    WHERE RDB$RELATION_CONSTRAINTS.RDB$CONSTRAINT_TYPE = 'PRIMARY KEY'
          AND RDB$INDEX_SEGMENTS.RDB$FIELD_NAME LIKE 'ID%'
--          and RDB$RELATION_CONSTRAINTS.RDB$RELATION_NAME = 'VISITANTE'

    INTO
      :RDB$RELATION_NAME,
      :RDB$FIELD_NAME,
      :RDB$GENERATOR_NAME
  DO
  BEGIN --BUSCA O ID MAIOR QUE TEM NA TABELA

       TEM_TRIGGER = 0 ;

       IF (GEN_ID(cod_up,0) > 0) THEN
       BEGIN
          NOME_TRIGGER = SUBSTR(LTRIM(RTRIM(RDB$RELATION_NAME))||'_AI_SINCRONISMO',1,31);
        
          SELECT COALESCE(COUNT(*),0)
          FROM RDB$TRIGGERS
          WHERE RDB$TRIGGER_NAME = :NOME_TRIGGER AND RDB$RELATION_NAME = LTRIM(RTRIM(:RDB$RELATION_NAME))
          INTO :TEM_TRIGGER ;

       END

        IF (TEM_TRIGGER>0) THEN
        BEGIN

          TABELA = 'SELECT MAX('||RTRIM(:RDB$FIELD_NAME)||') FROM '||:RDB$RELATION_NAME
            ||' WHERE SUBSTR('||RTRIM(:RDB$FIELD_NAME)||',1,1) = '
            ||GEN_ID(cod_up,0) ;

        END
        ELSE
        BEGIN
          TABELA = 'SELECT MAX('||RTRIM(:RDB$FIELD_NAME)||') FROM '||:RDB$RELATION_NAME;
        END

        FOR EXECUTE STATEMENT TABELA
        INTO :IDTABELA
        DO
        BEGIN
           IF (IDTABELA IS NULL) THEN
           BEGIN
              IDTABELA = 0 ;
           END--ATUALIZA O GENERATOR

          IF (TEM_TRIGGER > 0) THEN
          BEGIN
              SIDTABELAS = LTRIM(RTRIM(CAST(IDTABELA AS VARCHAR(30))));
              NUM_CASAS = STRLEN(:CHAVE_SINC);
              IF ((NUM_CASAS+1) < STRLEN(:SIDTABELAS)) THEN
              BEGIN
                  IDTABELA = SUBSTR(SIDTABELAS,NUM_CASAS+1,STRLEN(:SIDTABELAS));
                  codigo = SUBSTR(SIDTABELAS,2,STRLEN(:SIDTABELAS));
              END
          END

           SINCRONIZA = 'SET GENERATOR '||RTRIM( RDB$GENERATOR_NAME )||' TO '||IDTABELA||';' ;
           EXECUTE STATEMENT SINCRONIZA ;

        END
  END

END^



SET TERM ; ^


/******************************************************************************/
/****                             Descriptions                             ****/
/******************************************************************************/



/* Fields descriptions */

DESCRIBE FIELD NOME_INTERNO TABLE INT_CT
'=CONCATENAR("insert into int_ct (nome_interno, pavilhao, cela, tipo_cela, vulgo, outro_nome, procedencia, data_entrada, setor_trabalho, data_inicio_trabalho, data_final_trabalho, status) values (''";A2;"'',''";B2;"'',''";C2;"'',''";D2;"'',''";E2;"'',''";F2;"'',''";G2;"'',''";H2;"'',''";I2;"'',''";J2;"'',''";K2;"'',''";L2;"'');commit;")';

DESCRIBE FIELD IDSINCRONISMO TABLE SINCRONISMO
'Mandamentos da Replicao
1-faa um compare
2-Cadastre a tabela Controle e Status
3-Faa um script que gere os inserts de:
*Cidades
*Cliente
4-Faa um update do registro de IDEMPRESA
*Faa um update da tabela atual para a permanente
*Update para a empresa definitiva nas tabelas:
Movestoque
Movinan
Ctasrecpag
5-Faa um script que gere os inserts de:
Movestoque
Movfinan
Ctasrecpag
6-Estoque';

